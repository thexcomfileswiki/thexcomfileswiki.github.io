var app=function(){"use strict";function t(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function e(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}var n,r,i=(function(t,e){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e){t.exports=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var i=n(2),o=n(8),a=n(0),s=function(){function t(e,n){var r=n.location,i=void 0===r?0:r,a=n.distance,s=void 0===a?100:a,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,p=void 0===u?32:u,f=n.caseSensitive,d=void 0!==f&&f,h=n.tokenSeparator,m=void 0===h?/ +/g:h,g=n.findAllMatches,v=void 0!==g&&g,y=n.minMatchCharLength,b=void 0===y?1:y,$=n.id,k=void 0===$?null:$,w=n.keys,x=void 0===w?[]:w,A=n.shouldSort,S=void 0===A||A,O=n.getFn,T=void 0===O?o:O,C=n.sortFn,_=void 0===C?function(t,e){return t.score-e.score}:C,j=n.tokenize,M=void 0!==j&&j,I=n.matchAllTokens,E=void 0!==I&&I,N=n.includeMatches,L=void 0!==N&&N,F=n.includeScore,B=void 0!==F&&F,H=n.verbose,D=void 0!==H&&H;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:i,distance:s,threshold:c,maxPatternLength:p,isCaseSensitive:d,tokenSeparator:m,findAllMatches:v,minMatchCharLength:b,id:k,keys:x,includeMatches:L,includeScore:B,shouldSort:S,getFn:T,sortFn:_,verbose:D,tokenize:M,matchAllTokens:E},this.setCollection(e)}var e,n;return e=t,(n=[{key:"setCollection",value:function(t){return this.list=t,t}},{key:"search",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{limit:!1};this._log('---------\nSearch pattern: "'.concat(t,'"'));var n=this._prepareSearchers(t),r=n.tokenSearchers,i=n.fullSearcher,o=this._search(r,i),a=o.weights,s=o.results;return this._computeScore(a,s),this.options.shouldSort&&this._sort(s),e.limit&&"number"==typeof e.limit&&(s=s.slice(0,e.limit)),this._format(s)}},{key:"_prepareSearchers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=[];if(this.options.tokenize)for(var n=t.split(this.options.tokenSeparator),r=0,o=n.length;r<o;r+=1)e.push(new i(n[r],this.options));return{tokenSearchers:e,fullSearcher:new i(t,this.options)}}},{key:"_search",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=this.list,r={},i=[];if("string"==typeof n[0]){for(var o=0,a=n.length;o<a;o+=1)this._analyze({key:"",value:n[o],record:o,index:o},{resultMap:r,results:i,tokenSearchers:t,fullSearcher:e});return{weights:null,results:i}}for(var s={},l=0,c=n.length;l<c;l+=1)for(var u=n[l],p=0,f=this.options.keys.length;p<f;p+=1){var d=this.options.keys[p];if("string"!=typeof d){if(s[d.name]={weight:1-d.weight||1},d.weight<=0||d.weight>1)throw new Error("Key weight has to be > 0 and <= 1");d=d.name}else s[d]={weight:1};this._analyze({key:d,value:this.options.getFn(u,d),record:u,index:l},{resultMap:r,results:i,tokenSearchers:t,fullSearcher:e})}return{weights:s,results:i}}},{key:"_analyze",value:function(t,e){var n=t.key,r=t.arrayIndex,i=void 0===r?-1:r,o=t.value,s=t.record,l=t.index,c=e.tokenSearchers,u=void 0===c?[]:c,p=e.fullSearcher,f=void 0===p?[]:p,d=e.resultMap,h=void 0===d?{}:d,m=e.results,g=void 0===m?[]:m;if(null!=o){var v=!1,y=-1,b=0;if("string"==typeof o){this._log("\nKey: ".concat(""===n?"-":n));var $=f.search(o);if(this._log('Full text: "'.concat(o,'", score: ').concat($.score)),this.options.tokenize){for(var k=o.split(this.options.tokenSeparator),w=[],x=0;x<u.length;x+=1){var A=u[x];this._log('\nPattern: "'.concat(A.pattern,'"'));for(var S=!1,O=0;O<k.length;O+=1){var T=k[O],C=A.search(T),_={};C.isMatch?(_[T]=C.score,v=!0,S=!0,w.push(C.score)):(_[T]=1,this.options.matchAllTokens||w.push(1)),this._log('Token: "'.concat(T,'", score: ').concat(_[T]))}S&&(b+=1)}y=w[0];for(var j=w.length,M=1;M<j;M+=1)y+=w[M];y/=j,this._log("Token score average:",y)}var I=$.score;y>-1&&(I=(I+y)/2),this._log("Score average:",I);var E=!this.options.tokenize||!this.options.matchAllTokens||b>=u.length;if(this._log("\nCheck Matches: ".concat(E)),(v||$.isMatch)&&E){var N=h[l];N?N.output.push({key:n,arrayIndex:i,value:o,score:I,matchedIndices:$.matchedIndices}):(h[l]={item:s,output:[{key:n,arrayIndex:i,value:o,score:I,matchedIndices:$.matchedIndices}]},g.push(h[l]))}}else if(a(o))for(var L=0,F=o.length;L<F;L+=1)this._analyze({key:n,arrayIndex:L,value:o[L],record:s,index:l},{resultMap:h,results:g,tokenSearchers:u,fullSearcher:f})}}},{key:"_computeScore",value:function(t,e){this._log("\n\nComputing score:\n");for(var n=0,r=e.length;n<r;n+=1){for(var i=e[n].output,o=i.length,a=1,s=1,l=0;l<o;l+=1){var c=t?t[i[l].key].weight:1,u=(1===c?i[l].score:i[l].score||.001)*c;1!==c?s=Math.min(s,u):(i[l].nScore=u,a*=u)}e[n].score=1===s?a:s,this._log(e[n])}}},{key:"_sort",value:function(t){this._log("\n\nSorting...."),t.sort(this.options.sortFn)}},{key:"_format",value:function(t){var e=[];if(this.options.verbose){var n=[];this._log("\n\nOutput:\n\n",JSON.stringify(t,function(t,e){if("object"===r(e)&&null!==e){if(-1!==n.indexOf(e))return;n.push(e)}return e})),n=null}var i=[];this.options.includeMatches&&i.push(function(t,e){var n=t.output;e.matches=[];for(var r=0,i=n.length;r<i;r+=1){var o=n[r];if(0!==o.matchedIndices.length){var a={indices:o.matchedIndices,value:o.value};o.key&&(a.key=o.key),o.hasOwnProperty("arrayIndex")&&o.arrayIndex>-1&&(a.arrayIndex=o.arrayIndex),e.matches.push(a)}}}),this.options.includeScore&&i.push(function(t,e){e.score=t.score});for(var o=0,a=t.length;o<a;o+=1){var s=t[o];if(this.options.id&&(s.item=this.options.getFn(s.item,this.options.id)[0]),i.length){for(var l={item:s.item},c=0,u=i.length;c<u;c+=1)i[c](s,l);e.push(l)}else e.push(s.item)}return e}},{key:"_log",value:function(){var t;this.options.verbose&&(t=console).log.apply(t,arguments)}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();t.exports=s},function(t,e,n){var r=n(3),i=n(4),o=n(7),a=function(){function t(e,n){var r=n.location,i=void 0===r?0:r,a=n.distance,s=void 0===a?100:a,l=n.threshold,c=void 0===l?.6:l,u=n.maxPatternLength,p=void 0===u?32:u,f=n.isCaseSensitive,d=void 0!==f&&f,h=n.tokenSeparator,m=void 0===h?/ +/g:h,g=n.findAllMatches,v=void 0!==g&&g,y=n.minMatchCharLength,b=void 0===y?1:y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options={location:i,distance:s,threshold:c,maxPatternLength:p,isCaseSensitive:d,tokenSeparator:m,findAllMatches:v,minMatchCharLength:b},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=p&&(this.patternAlphabet=o(this.pattern))}var e,n;return e=t,(n=[{key:"search",value:function(t){if(this.options.isCaseSensitive||(t=t.toLowerCase()),this.pattern===t)return{isMatch:!0,score:0,matchedIndices:[[0,t.length-1]]};var e=this.options,n=e.maxPatternLength,o=e.tokenSeparator;if(this.pattern.length>n)return r(t,this.pattern,o);var a=this.options,s=a.location,l=a.distance,c=a.threshold,u=a.findAllMatches,p=a.minMatchCharLength;return i(t,this.pattern,this.patternAlphabet,{location:s,distance:l,threshold:c,findAllMatches:u,minMatchCharLength:p})}}])&&function(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(e.prototype,n),t}();t.exports=a},function(t,e){var n=/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g;t.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/ +/g,i=new RegExp(e.replace(n,"\\$&").replace(r,"|")),o=t.match(i),a=!!o,s=[];if(a)for(var l=0,c=o.length;l<c;l+=1){var u=o[l];s.push([t.indexOf(u),u.length-1])}return{score:a?.5:1,isMatch:a,matchedIndices:s}}},function(t,e,n){var r=n(5),i=n(6);t.exports=function(t,e,n,o){for(var a=o.location,s=void 0===a?0:a,l=o.distance,c=void 0===l?100:l,u=o.threshold,p=void 0===u?.6:u,f=o.findAllMatches,d=void 0!==f&&f,h=o.minMatchCharLength,m=void 0===h?1:h,g=s,v=t.length,y=p,b=t.indexOf(e,g),$=e.length,k=[],w=0;w<v;w+=1)k[w]=0;if(-1!==b){var x=r(e,{errors:0,currentLocation:b,expectedLocation:g,distance:c});if(y=Math.min(x,y),-1!==(b=t.lastIndexOf(e,g+$))){var A=r(e,{errors:0,currentLocation:b,expectedLocation:g,distance:c});y=Math.min(A,y)}}b=-1;for(var S=[],O=1,T=$+v,C=1<<$-1,_=0;_<$;_+=1){for(var j=0,M=T;j<M;)r(e,{errors:_,currentLocation:g+M,expectedLocation:g,distance:c})<=y?j=M:T=M,M=Math.floor((T-j)/2+j);T=M;var I=Math.max(1,g-M+1),E=d?v:Math.min(g+M,v)+$,N=Array(E+2);N[E+1]=(1<<_)-1;for(var L=E;L>=I;L-=1){var F=L-1,B=n[t.charAt(F)];if(B&&(k[F]=1),N[L]=(N[L+1]<<1|1)&B,0!==_&&(N[L]|=(S[L+1]|S[L])<<1|1|S[L+1]),N[L]&C&&(O=r(e,{errors:_,currentLocation:F,expectedLocation:g,distance:c}))<=y){if(y=O,(b=F)<=g)break;I=Math.max(1,2*g-b)}}if(r(e,{errors:_+1,currentLocation:g,expectedLocation:g,distance:c})>y)break;S=N}return{isMatch:b>=0,score:0===O?.001:O,matchedIndices:i(k,m)}}},function(t,e){t.exports=function(t,e){var n=e.errors,r=void 0===n?0:n,i=e.currentLocation,o=void 0===i?0:i,a=e.expectedLocation,s=void 0===a?0:a,l=e.distance,c=void 0===l?100:l,u=r/t.length,p=Math.abs(s-o);return c?u+p/c:p?1:u}},function(t,e){t.exports=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=-1,i=-1,o=0,a=t.length;o<a;o+=1){var s=t[o];s&&-1===r?r=o:s||-1===r||((i=o-1)-r+1>=e&&n.push([r,i]),r=-1)}return t[o-1]&&o-r>=e&&n.push([r,o-1]),n}},function(t,e){t.exports=function(t){for(var e={},n=t.length,r=0;r<n;r+=1)e[t.charAt(r)]=0;for(var i=0;i<n;i+=1)e[t.charAt(i)]|=1<<n-i-1;return e}},function(t,e,n){var r=n(0);t.exports=function(t,e){return function t(e,n,i){if(n){var o=n.indexOf("."),a=n,s=null;-1!==o&&(a=n.slice(0,o),s=n.slice(o+1));var l=e[a];if(null!=l)if(s||"string"!=typeof l&&"number"!=typeof l)if(r(l))for(var c=0,u=l.length;c<u;c+=1)t(l[c],s,i);else s&&t(l,s,i);else i.push(l.toString())}else i.push(e);return i}(t,e,[])}}])}(n={exports:{}},n.exports),n.exports),o=(r=i)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;i.Fuse;function a(t){return null==t}var s={isNothing:a,isObject:function(t){return"object"==typeof t&&null!==t},toArray:function(t){return Array.isArray(t)?t:a(t)?[]:[t]},repeat:function(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r},isNegativeZero:function(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t},extend:function(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t}};function l(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.toString=function(t){var e=this.name+": ";return e+=this.reason||"(unknown reason)",!t&&this.mark&&(e+=" "+this.mark.toString()),e};var c=l;function u(t,e,n,r,i){this.name=t,this.buffer=e,this.position=n,this.line=r,this.column=i}u.prototype.getSnippet=function(t,e){var n,r,i,o,a;if(!this.buffer)return null;for(t=t||4,e=e||75,n="",r=this.position;r>0&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(r-1));)if(r-=1,this.position-r>e/2-1){n=" ... ",r+=5;break}for(i="",o=this.position;o<this.buffer.length&&-1==="\0\r\n\u2028\u2029".indexOf(this.buffer.charAt(o));)if((o+=1)-this.position>e/2-1){i=" ... ",o-=5;break}return a=this.buffer.slice(r,o),s.repeat(" ",t)+n+a+i+"\n"+s.repeat(" ",t+this.position-r+n.length)+"^"},u.prototype.toString=function(t){var e,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),t||(e=this.getSnippet())&&(n+=":\n"+e),n};var p=u,f=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],d=["scalar","sequence","mapping"];var h=function(t,e){var n,r;if(e=e||{},Object.keys(e).forEach(function(e){if(-1===f.indexOf(e))throw new c('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=(n=e.styleAliases||null,r={},null!==n&&Object.keys(n).forEach(function(t){n[t].forEach(function(e){r[String(e)]=t})}),r),-1===d.indexOf(this.kind))throw new c('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')};function m(t,e,n){var r=[];return t.include.forEach(function(t){n=m(t,e,n)}),t[e].forEach(function(t){n.forEach(function(e,n){e.tag===t.tag&&e.kind===t.kind&&r.push(n)}),n.push(t)}),n.filter(function(t,e){return-1===r.indexOf(e)})}function g(t){this.include=t.include||[],this.implicit=t.implicit||[],this.explicit=t.explicit||[],this.implicit.forEach(function(t){if(t.loadKind&&"scalar"!==t.loadKind)throw new c("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=m(this,"implicit",[]),this.compiledExplicit=m(this,"explicit",[]),this.compiledTypeMap=function(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{}};function r(t){n[t.kind][t.tag]=n.fallback[t.tag]=t}for(t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(r);return n}(this.compiledImplicit,this.compiledExplicit)}g.DEFAULT=null,g.create=function(){var t,e;switch(arguments.length){case 1:t=g.DEFAULT,e=arguments[0];break;case 2:t=arguments[0],e=arguments[1];break;default:throw new c("Wrong number of arguments for Schema.create function")}if(t=s.toArray(t),e=s.toArray(e),!t.every(function(t){return t instanceof g}))throw new c("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!e.every(function(t){return t instanceof h}))throw new c("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new g({include:t,explicit:e})};var v=g,y=new v({explicit:[new h("tag:yaml.org,2002:str",{kind:"scalar",construct:function(t){return null!==t?t:""}}),new h("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(t){return null!==t?t:[]}}),new h("tag:yaml.org,2002:map",{kind:"mapping",construct:function(t){return null!==t?t:{}}})]});var b=new h("tag:yaml.org,2002:null",{kind:"scalar",resolve:function(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)},construct:function(){return null},predicate:function(t){return null===t},represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"});var $=new h("tag:yaml.org,2002:bool",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)},construct:function(t){return"true"===t||"True"===t||"TRUE"===t},predicate:function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},represent:{lowercase:function(t){return t?"true":"false"},uppercase:function(t){return t?"TRUE":"FALSE"},camelcase:function(t){return t?"True":"False"}},defaultStyle:"lowercase"});function k(t){return 48<=t&&t<=55}function w(t){return 48<=t&&t<=57}var x=new h("tag:yaml.org,2002:int",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=t.length,i=0,o=!1;if(!r)return!1;if("-"!==(e=t[i])&&"+"!==e||(e=t[++i]),"0"===e){if(i+1===r)return!0;if("b"===(e=t[++i])){for(i++;i<r;i++)if("_"!==(e=t[i])){if("0"!==e&&"1"!==e)return!1;o=!0}return o&&"_"!==e}if("x"===e){for(i++;i<r;i++)if("_"!==(e=t[i])){if(!(48<=(n=t.charCodeAt(i))&&n<=57||65<=n&&n<=70||97<=n&&n<=102))return!1;o=!0}return o&&"_"!==e}for(;i<r;i++)if("_"!==(e=t[i])){if(!k(t.charCodeAt(i)))return!1;o=!0}return o&&"_"!==e}if("_"===e)return!1;for(;i<r;i++)if("_"!==(e=t[i])){if(":"===e)break;if(!w(t.charCodeAt(i)))return!1;o=!0}return!(!o||"_"===e)&&(":"!==e||/^(:[0-5]?[0-9])+$/.test(t.slice(i)))},construct:function(t){var e,n,r=t,i=1,o=[];return-1!==r.indexOf("_")&&(r=r.replace(/_/g,"")),"-"!==(e=r[0])&&"+"!==e||("-"===e&&(i=-1),e=(r=r.slice(1))[0]),"0"===r?0:"0"===e?"b"===r[1]?i*parseInt(r.slice(2),2):"x"===r[1]?i*parseInt(r,16):i*parseInt(r,8):-1!==r.indexOf(":")?(r.split(":").forEach(function(t){o.unshift(parseInt(t,10))}),r=0,n=1,o.forEach(function(t){r+=t*n,n*=60}),i*r):i*parseInt(r,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!s.isNegativeZero(t)},represent:{binary:function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},octal:function(t){return t>=0?"0"+t.toString(8):"-0"+t.toString(8).slice(1)},decimal:function(t){return t.toString(10)},hexadecimal:function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),A=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");var S=/^[-+]?[0-9]+e/;var O=new v({include:[y],implicit:[b,$,x,new h("tag:yaml.org,2002:float",{kind:"scalar",resolve:function(t){return null!==t&&!(!A.test(t)||"_"===t[t.length-1])},construct:function(t){var e,n,r,i;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,i=[],"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:e.indexOf(":")>=0?(e.split(":").forEach(function(t){i.unshift(parseFloat(t,10))}),e=0,r=1,i.forEach(function(t){e+=t*r,r*=60}),n*e):n*parseFloat(e,10)},predicate:function(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||s.isNegativeZero(t))},represent:function(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(s.isNegativeZero(t))return"-0.0";return n=t.toString(10),S.test(n)?n.replace("e",".e"):n},defaultStyle:"lowercase"})]}),T=new v({include:[O]}),C=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");var j=new h("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:function(t){return null!==t&&(null!==C.exec(t)||null!==_.exec(t))},construct:function(t){var e,n,r,i,o,a,s,l,c=0,u=null;if(null===(e=C.exec(t))&&(e=_.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(u=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(u=-u)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),u&&l.setTime(l.getTime()-u),l},instanceOf:Date,represent:function(t){return t.toISOString()}});var M,I=new h("tag:yaml.org,2002:merge",{kind:"scalar",resolve:function(t){return"<<"===t||null===t}});try{M=e("buffer").Buffer}catch(t){}var E="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";var N=new h("tag:yaml.org,2002:binary",{kind:"scalar",resolve:function(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=E;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0},construct:function(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=E,a=0,s=[];for(e=0;e<i;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0==(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),M?M.from?M.from(s):new M(s):s},predicate:function(t){return M&&M.isBuffer(t)},represent:function(t){var e,n,r="",i=0,o=t.length,a=E;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0==(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}}),L=Object.prototype.hasOwnProperty,F=Object.prototype.toString;var B=new h("tag:yaml.org,2002:omap",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=[],s=t;for(e=0,n=s.length;e<n;e+=1){if(r=s[e],o=!1,"[object Object]"!==F.call(r))return!1;for(i in r)if(L.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0},construct:function(t){return null!==t?t:[]}}),H=Object.prototype.toString;var D=new h("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:function(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==H.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0},construct:function(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}}),q=Object.prototype.hasOwnProperty;var P=new v({include:[T],implicit:[j,I],explicit:[N,B,D,new h("tag:yaml.org,2002:set",{kind:"mapping",resolve:function(t){if(null===t)return!0;var e,n=t;for(e in n)if(q.call(n,e)&&null!==n[e])return!1;return!0},construct:function(t){return null!==t?t:{}}})]});var R=new h("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:function(){return!0},construct:function(){},predicate:function(t){return void 0===t},represent:function(){return""}});var W,z=new h("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:function(t){if(null===t)return!1;if(0===t.length)return!1;var e=t,n=/\/([gim]*)$/.exec(t),r="";if("/"===e[0]){if(n&&(r=n[1]),r.length>3)return!1;if("/"!==e[e.length-r.length-1])return!1}return!0},construct:function(t){var e=t,n=/\/([gim]*)$/.exec(t),r="";return"/"===e[0]&&(n&&(r=n[1]),e=e.slice(1,e.length-r.length-1)),new RegExp(e,r)},predicate:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},represent:function(t){var e="/"+t.source+"/";return t.global&&(e+="g"),t.multiline&&(e+="m"),t.ignoreCase&&(e+="i"),e}});try{W=e("esprima")}catch(t){"undefined"!=typeof window&&(W=window.esprima)}var U=new h("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:function(t){if(null===t)return!1;try{var e="("+t+")",n=W.parse(e,{range:!0});return"Program"===n.type&&1===n.body.length&&"ExpressionStatement"===n.body[0].type&&("ArrowFunctionExpression"===n.body[0].expression.type||"FunctionExpression"===n.body[0].expression.type)}catch(t){return!1}},construct:function(t){var e,n="("+t+")",r=W.parse(n,{range:!0}),i=[];if("Program"!==r.type||1!==r.body.length||"ExpressionStatement"!==r.body[0].type||"ArrowFunctionExpression"!==r.body[0].expression.type&&"FunctionExpression"!==r.body[0].expression.type)throw new Error("Failed to resolve function");return r.body[0].expression.params.forEach(function(t){i.push(t.name)}),e=r.body[0].expression.body.range,"BlockStatement"===r.body[0].expression.body.type?new Function(i,n.slice(e[0]+1,e[1]-1)):new Function(i,"return "+n.slice(e[0],e[1]))},predicate:function(t){return"[object Function]"===Object.prototype.toString.call(t)},represent:function(t){return t.toString()}}),G=v.DEFAULT=new v({include:[P],explicit:[R,z,U]}),V=Object.prototype.hasOwnProperty,K=1,Y=2,X=3,Z=4,Q=1,J=2,tt=3,et=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,nt=/[\x85\u2028\u2029]/,rt=/[,\[\]\{\}]/,it=/^(?:!|!!|![a-z\-]+!)$/i,ot=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function at(t){return Object.prototype.toString.call(t)}function st(t){return 10===t||13===t}function lt(t){return 9===t||32===t}function ct(t){return 9===t||32===t||10===t||13===t}function ut(t){return 44===t||91===t||93===t||123===t||125===t}function pt(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function ft(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t?"\t":9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?" ":76===t?"\u2028":80===t?"\u2029":""}function dt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}for(var ht=new Array(256),mt=new Array(256),gt=0;gt<256;gt++)ht[gt]=ft(gt)?1:0,mt[gt]=ft(gt);function vt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||G,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function yt(t,e){return new c(e,new p(t.filename,t.input,t.position,t.line,t.position-t.lineStart))}function bt(t,e){throw yt(t,e)}function $t(t,e){t.onWarning&&t.onWarning.call(null,yt(t,e))}var kt={YAML:function(t,e,n){var r,i,o;null!==t.version&&bt(t,"duplication of %YAML directive"),1!==n.length&&bt(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&bt(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&bt(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&$t(t,"unsupported YAML version of the document")},TAG:function(t,e,n){var r,i;2!==n.length&&bt(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],it.test(r)||bt(t,"ill-formed tag handle (first argument) of the TAG directive"),V.call(t.tagMap,r)&&bt(t,'there is a previously declared suffix for "'+r+'" tag handle'),ot.test(i)||bt(t,"ill-formed tag prefix (second argument) of the TAG directive"),t.tagMap[r]=i}};function wt(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||bt(t,"expected valid JSON character");else et.test(s)&&bt(t,"the stream contains non-printable characters");t.result+=s}}function xt(t,e,n,r){var i,o,a,l;for(s.isObject(n)||bt(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,l=(i=Object.keys(n)).length;a<l;a+=1)o=i[a],V.call(e,o)||(e[o]=n[o],r[o]=!0)}function At(t,e,n,r,i,o,a,s){var l,c;if(Array.isArray(i))for(l=0,c=(i=Array.prototype.slice.call(i)).length;l<c;l+=1)Array.isArray(i[l])&&bt(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===at(i[l])&&(i[l]="[object Object]");if("object"==typeof i&&"[object Object]"===at(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(l=0,c=o.length;l<c;l+=1)xt(t,e,o[l],n);else xt(t,e,o,n);else t.json||V.call(n,i)||!V.call(e,i)||(t.line=a||t.line,t.position=s||t.position,bt(t,"duplicated mapping key")),e[i]=o,delete n[i];return e}function St(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):bt(t,"a line break is expected"),t.line+=1,t.lineStart=t.position}function Ot(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;lt(i);)i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!st(i))break;for(St(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&$t(t,"deficient indentation"),r}function Tt(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!ct(e)))}function Ct(t,e){1===e?t.result+=" ":e>1&&(t.result+=s.repeat("\n",e-1))}function _t(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&45===r&&ct(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,Ot(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,It(t,e,X,!1,!0),a.push(t.result),Ot(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)bt(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function jt(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&bt(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):bt(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!ct(i);)33===i&&(a?bt(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),it.test(n)||bt(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),rt.test(r)&&bt(t,"tag suffix cannot contain flow indicator characters")}return r&&!ot.test(r)&&bt(t,"tag name cannot contain such characters: "+r),o?t.tag=r:V.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:bt(t,'undeclared tag handle "'+n+'"'),!0}function Mt(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&bt(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!ct(n)&&!ut(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&bt(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function It(t,e,n,r,i){var o,a,l,c,u,p,f,d,h=1,m=!1,g=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=Z===n||X===n,r&&Ot(t,!0,-1)&&(m=!0,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)),1===h)for(;jt(t)||Mt(t);)Ot(t,!0,-1)?(m=!0,l=o,t.lineIndent>e?h=1:t.lineIndent===e?h=0:t.lineIndent<e&&(h=-1)):l=!1;if(l&&(l=m||i),1!==h&&Z!==n||(f=K===n||Y===n?e:e+1,d=t.position-t.lineStart,1===h?l&&(_t(t,d)||function(t,e,n){var r,i,o,a,s,l=t.tag,c=t.anchor,u={},p={},f=null,d=null,h=null,m=!1,g=!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=u),s=t.input.charCodeAt(t.position);0!==s;){if(r=t.input.charCodeAt(t.position+1),o=t.line,a=t.position,63!==s&&58!==s||!ct(r)){if(!It(t,n,Y,!1,!0))break;if(t.line===o){for(s=t.input.charCodeAt(t.position);lt(s);)s=t.input.charCodeAt(++t.position);if(58===s)ct(s=t.input.charCodeAt(++t.position))||bt(t,"a whitespace character is expected after the key-value separator within a block mapping"),m&&(At(t,u,p,f,d,null),f=d=h=null),g=!0,m=!1,i=!1,f=t.tag,d=t.result;else{if(!g)return t.tag=l,t.anchor=c,!0;bt(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!g)return t.tag=l,t.anchor=c,!0;bt(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===s?(m&&(At(t,u,p,f,d,null),f=d=h=null),g=!0,m=!0,i=!0):m?(m=!1,i=!0):bt(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,s=r;if((t.line===o||t.lineIndent>e)&&(It(t,e,Z,!0,i)&&(m?d=t.result:h=t.result),m||(At(t,u,p,f,d,h,o,a),f=d=h=null),Ot(t,!0,-1),s=t.input.charCodeAt(t.position)),t.lineIndent>e&&0!==s)bt(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return m&&At(t,u,p,f,d,null),g&&(t.tag=l,t.anchor=c,t.kind="mapping",t.result=u),g}(t,d,f))||function(t,e){var n,r,i,o,a,s,l,c,u,p,f=!0,d=t.tag,h=t.anchor,m={};if(91===(p=t.input.charCodeAt(t.position)))i=93,s=!1,r=[];else{if(123!==p)return!1;i=125,s=!0,r={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=r),p=t.input.charCodeAt(++t.position);0!==p;){if(Ot(t,!0,e),(p=t.input.charCodeAt(t.position))===i)return t.position++,t.tag=d,t.anchor=h,t.kind=s?"mapping":"sequence",t.result=r,!0;f||bt(t,"missed comma between flow collection entries"),u=null,o=a=!1,63===p&&ct(t.input.charCodeAt(t.position+1))&&(o=a=!0,t.position++,Ot(t,!0,e)),n=t.line,It(t,e,K,!1,!0),c=t.tag,l=t.result,Ot(t,!0,e),p=t.input.charCodeAt(t.position),!a&&t.line!==n||58!==p||(o=!0,p=t.input.charCodeAt(++t.position),Ot(t,!0,e),It(t,e,K,!1,!0),u=t.result),s?At(t,r,m,c,l,u):o?r.push(At(t,null,m,c,l,u)):r.push(l),Ot(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(f=!0,p=t.input.charCodeAt(++t.position)):f=!1}bt(t,"unexpected end of the stream within a flow collection")}(t,f)?g=!0:(a&&function(t,e){var n,r,i,o,a,l=Q,c=!1,u=!1,p=e,f=0,d=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)Q===l?l=43===o?tt:J:bt(t,"repeat of a chomping mode identifier");else{if(!((i=48<=(a=o)&&a<=57?a-48:-1)>=0))break;0===i?bt(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):u?bt(t,"repeat of an indentation width identifier"):(p=e+i-1,u=!0)}if(lt(o)){do{o=t.input.charCodeAt(++t.position)}while(lt(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!st(o)&&0!==o)}for(;0!==o;){for(St(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!u||t.lineIndent<p)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!u&&t.lineIndent>p&&(p=t.lineIndent),st(o))f++;else{if(t.lineIndent<p){l===tt?t.result+=s.repeat("\n",c?1+f:f):l===Q&&c&&(t.result+="\n");break}for(r?lt(o)?(d=!0,t.result+=s.repeat("\n",c?1+f:f)):d?(d=!1,t.result+=s.repeat("\n",f+1)):0===f?c&&(t.result+=" "):t.result+=s.repeat("\n",f):t.result+=s.repeat("\n",c?1+f:f),c=!0,u=!0,f=0,n=t.position;!st(o)&&0!==o;)o=t.input.charCodeAt(++t.position);wt(t,n,t.position,!1)}}return!0}(t,f)||function(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(wt(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else st(n)?(wt(t,r,i,!0),Ct(t,Ot(t,!1,e)),r=i=t.position):t.position===t.lineStart&&Tt(t)?bt(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);bt(t,"unexpected end of the stream within a single quoted scalar")}(t,f)||function(t,e){var n,r,i,o,a,s,l;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return wt(t,n,t.position,!0),t.position++,!0;if(92===s){if(wt(t,n,t.position,!0),st(s=t.input.charCodeAt(++t.position)))Ot(t,!1,e);else if(s<256&&ht[s])t.result+=mt[s],t.position++;else if((a=120===(l=s)?2:117===l?4:85===l?8:0)>0){for(i=a,o=0;i>0;i--)(a=pt(s=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:bt(t,"expected hexadecimal character");t.result+=dt(o),t.position++}else bt(t,"unknown escape sequence");n=r=t.position}else st(s)?(wt(t,n,r,!0),Ct(t,Ot(t,!1,e)),n=r=t.position):t.position===t.lineStart&&Tt(t)?bt(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}bt(t,"unexpected end of the stream within a double quoted scalar")}(t,f)?g=!0:!function(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!ct(r)&&!ut(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&bt(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),t.anchorMap.hasOwnProperty(n)||bt(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Ot(t,!0,-1),!0}(t)?function(t,e,n){var r,i,o,a,s,l,c,u,p=t.kind,f=t.result;if(ct(u=t.input.charCodeAt(t.position))||ut(u)||35===u||38===u||42===u||33===u||124===u||62===u||39===u||34===u||37===u||64===u||96===u)return!1;if((63===u||45===u)&&(ct(r=t.input.charCodeAt(t.position+1))||n&&ut(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==u;){if(58===u){if(ct(r=t.input.charCodeAt(t.position+1))||n&&ut(r))break}else if(35===u){if(ct(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&Tt(t)||n&&ut(u))break;if(st(u)){if(s=t.line,l=t.lineStart,c=t.lineIndent,Ot(t,!1,-1),t.lineIndent>=e){a=!0,u=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=c;break}}a&&(wt(t,i,o,!1),Ct(t,t.line-s),i=o=t.position,a=!1),lt(u)||(o=t.position+1),u=t.input.charCodeAt(++t.position)}return wt(t,i,o,!1),!!t.result||(t.kind=p,t.result=f,!1)}(t,f,K===n)&&(g=!0,null===t.tag&&(t.tag="?")):(g=!0,null===t.tag&&null===t.anchor||bt(t,"alias node should not have any properties")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===h&&(g=l&&_t(t,d))),null!==t.tag&&"!"!==t.tag)if("?"===t.tag){for(c=0,u=t.implicitTypes.length;c<u;c+=1)if((p=t.implicitTypes[c]).resolve(t.result)){t.result=p.construct(t.result),t.tag=p.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else V.call(t.typeMap[t.kind||"fallback"],t.tag)?(p=t.typeMap[t.kind||"fallback"][t.tag],null!==t.result&&p.kind!==t.kind&&bt(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+p.kind+'", not "'+t.kind+'"'),p.resolve(t.result)?(t.result=p.construct(t.result),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):bt(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")):bt(t,"unknown tag !<"+t.tag+">");return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||g}function Et(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap={},t.anchorMap={};0!==(i=t.input.charCodeAt(t.position))&&(Ot(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!ct(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&bt(t,"directive name must not be less than one character in length");0!==i;){for(;lt(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!st(i));break}if(st(i))break;for(e=t.position;0!==i&&!ct(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&St(t),V.call(kt,n)?kt[n](t,n,r):$t(t,'unknown document directive "'+n+'"')}Ot(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Ot(t,!0,-1)):a&&bt(t,"directives end mark is expected"),It(t,t.lineIndent-1,Z,!1,!0),Ot(t,!0,-1),t.checkLineBreaks&&nt.test(t.input.slice(o,t.position))&&$t(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&Tt(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Ot(t,!0,-1)):t.position<t.length-1&&bt(t,"end of the stream or a document separator is expected")}function Nt(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new vt(t,e);for(n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)Et(n);return n.documents}function Lt(t,e,n){var r,i,o=Nt(t,n);if("function"!=typeof e)return o;for(r=0,i=o.length;r<i;r+=1)e(o[r])}function Ft(t,e){var n=Nt(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new c("expected a single document in the stream, but found more")}}var Bt={loadAll:Lt,load:Ft,safeLoadAll:function(t,e,n){if("function"!=typeof e)return Lt(t,s.extend({schema:P},n));Lt(t,e,s.extend({schema:P},n))},safeLoad:function(t,e){return Ft(t,s.extend({schema:P},e))}},Ht=Object.prototype.toString,Dt=Object.prototype.hasOwnProperty,qt=9,Pt=10,Rt=32,Wt=33,zt=34,Ut=35,Gt=37,Vt=38,Kt=39,Yt=42,Xt=44,Zt=45,Qt=58,Jt=62,te=63,ee=64,ne=91,re=93,ie=96,oe=123,ae=124,se=125,le={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},ce=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function ue(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else{if(!(t<=4294967295))throw new c("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+s.repeat("0",r-e.length)+e}function pe(t){this.schema=t.schema||G,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=s.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=function(t,e){var n,r,i,o,a,s,l;if(null===e)return{};for(n={},i=0,o=(r=Object.keys(e)).length;i<o;i+=1)a=r[i],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=t.compiledTypeMap.fallback[a])&&Dt.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function fe(t,e){for(var n,r=s.repeat(" ",e),i=0,o=-1,a="",l=t.length;i<l;)-1===(o=t.indexOf("\n",i))?(n=t.slice(i),i=l):(n=t.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function de(t,e){return"\n"+s.repeat(" ",t.indent*e)}function he(t){return t===Rt||t===qt}function me(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&65279!==t||65536<=t&&t<=1114111}function ge(t){return me(t)&&65279!==t&&t!==Xt&&t!==ne&&t!==re&&t!==oe&&t!==se&&t!==Qt&&t!==Ut}function ve(t){return/^\n* /.test(t)}var ye=1,be=2,$e=3,ke=4,we=5;function xe(t,e,n,r,i){var o,a,s,l=!1,c=!1,u=-1!==r,p=-1,f=me(s=t.charCodeAt(0))&&65279!==s&&!he(s)&&s!==Zt&&s!==te&&s!==Qt&&s!==Xt&&s!==ne&&s!==re&&s!==oe&&s!==se&&s!==Ut&&s!==Vt&&s!==Yt&&s!==Wt&&s!==ae&&s!==Jt&&s!==Kt&&s!==zt&&s!==Gt&&s!==ee&&s!==ie&&!he(t.charCodeAt(t.length-1));if(e)for(o=0;o<t.length;o++){if(!me(a=t.charCodeAt(o)))return we;f=f&&ge(a)}else{for(o=0;o<t.length;o++){if((a=t.charCodeAt(o))===Pt)l=!0,u&&(c=c||o-p-1>r&&" "!==t[p+1],p=o);else if(!me(a))return we;f=f&&ge(a)}c=c||u&&o-p-1>r&&" "!==t[p+1]}return l||c?n>9&&ve(t)?we:c?ke:$e:f&&!i(t)?ye:be}function Ae(t,e,n,r){t.dump=function(){if(0===e.length)return"''";if(!t.noCompatMode&&-1!==ce.indexOf(e))return"'"+e+"'";var i=t.indent*Math.max(1,n),o=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-i),a=r||t.flowLevel>-1&&n>=t.flowLevel;switch(xe(e,a,t.indent,o,function(e){return function(t,e){var n,r;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1}(t,e)})){case ye:return e;case be:return"'"+e.replace(/'/g,"''")+"'";case $e:return"|"+Se(e,t.indent)+Oe(fe(e,i));case ke:return">"+Se(e,t.indent)+Oe(fe(function(t,e){var n,r,i=/(\n+)([^\n]*)/g,o=(s=t.indexOf("\n"),s=-1!==s?s:t.length,i.lastIndex=s,Te(t.slice(0,s),e)),a="\n"===t[0]||" "===t[0];var s;for(;r=i.exec(t);){var l=r[1],c=r[2];n=" "===c[0],o+=l+(a||n||""===c?"":"\n")+Te(c,e),a=n}return o}(e,o),i));case we:return'"'+function(t){for(var e,n,r,i="",o=0;o<t.length;o++)(e=t.charCodeAt(o))>=55296&&e<=56319&&(n=t.charCodeAt(o+1))>=56320&&n<=57343?(i+=ue(1024*(e-55296)+n-56320+65536),o++):(r=le[e],i+=!r&&me(e)?t[o]:r||ue(e));return i}(e)+'"';default:throw new c("impossible error: invalid scalar style")}}()}function Se(t,e){var n=ve(t)?String(e):"",r="\n"===t[t.length-1];return n+(r&&("\n"===t[t.length-2]||"\n"===t)?"+":r?"":"-")+"\n"}function Oe(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function Te(t,e){if(""===t||" "===t[0])return t;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,l="";n=i.exec(t);)(s=n.index)-o>e&&(r=a>o?a:s,l+="\n"+t.slice(o,r),o=r+1),a=s;return l+="\n",t.length-o>e&&a>o?l+=t.slice(o,a)+"\n"+t.slice(a+1):l+=t.slice(o),l.slice(1)}function Ce(t,e,n){var r,i,o,a,s,l;for(o=0,a=(i=n?t.explicitTypes:t.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof e&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(t.tag=n?s.tag:"?",s.represent){if(l=t.styleMap[s.tag]||s.defaultStyle,"[object Function]"===Ht.call(s.represent))r=s.represent(e,l);else{if(!Dt.call(s.represent,l))throw new c("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](e,l)}t.dump=r}return!0}return!1}function _e(t,e,n,r,i,o){t.tag=null,t.dump=n,Ce(t,n,!1)||Ce(t,n,!0);var a=Ht.call(t.dump);r&&(r=t.flowLevel<0||t.flowLevel>e);var s,l,u="[object Object]"===a||"[object Array]"===a;if(u&&(l=-1!==(s=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||l||2!==t.indent&&e>0)&&(i=!1),l&&t.usedDuplicates[s])t.dump="*ref_"+s;else{if(u&&l&&!t.usedDuplicates[s]&&(t.usedDuplicates[s]=!0),"[object Object]"===a)r&&0!==Object.keys(t.dump).length?(!function(t,e,n,r){var i,o,a,s,l,u,p="",f=t.tag,d=Object.keys(n);if(!0===t.sortKeys)d.sort();else if("function"==typeof t.sortKeys)d.sort(t.sortKeys);else if(t.sortKeys)throw new c("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)u="",r&&0===i||(u+=de(t,e)),s=n[a=d[i]],_e(t,e+1,a,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&Pt===t.dump.charCodeAt(0)?u+="?":u+="? "),u+=t.dump,l&&(u+=de(t,e)),_e(t,e+1,s,!0,l)&&(t.dump&&Pt===t.dump.charCodeAt(0)?u+=":":u+=": ",p+=u+=t.dump));t.tag=f,t.dump=p||"{}"}(t,e,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(!function(t,e,n){var r,i,o,a,s,l="",c=t.tag,u=Object.keys(n);for(r=0,i=u.length;r<i;r+=1)s=t.condenseFlow?'"':"",0!==r&&(s+=", "),a=n[o=u[r]],_e(t,e,o,!1,!1)&&(t.dump.length>1024&&(s+="? "),s+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),_e(t,e,a,!1,!1)&&(l+=s+=t.dump));t.tag=c,t.dump="{"+l+"}"}(t,e,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump));else if("[object Array]"===a){var p=t.noArrayIndent&&e>0?e-1:e;r&&0!==t.dump.length?(!function(t,e,n,r){var i,o,a="",s=t.tag;for(i=0,o=n.length;i<o;i+=1)_e(t,e+1,n[i],!0,!0)&&(r&&0===i||(a+=de(t,e)),t.dump&&Pt===t.dump.charCodeAt(0)?a+="-":a+="- ",a+=t.dump);t.tag=s,t.dump=a||"[]"}(t,p,t.dump,i),l&&(t.dump="&ref_"+s+t.dump)):(!function(t,e,n){var r,i,o="",a=t.tag;for(r=0,i=n.length;r<i;r+=1)_e(t,e,n[r],!1,!1)&&(0!==r&&(o+=","+(t.condenseFlow?"":" ")),o+=t.dump);t.tag=a,t.dump="["+o+"]"}(t,p,t.dump),l&&(t.dump="&ref_"+s+" "+t.dump))}else{if("[object String]"!==a){if(t.skipInvalid)return!1;throw new c("unacceptable kind of an object to dump "+a)}"?"!==t.tag&&Ae(t,t.dump,e,o)}null!==t.tag&&"?"!==t.tag&&(t.dump="!<"+t.tag+"> "+t.dump)}return!0}function je(t,e){var n,r,i=[],o=[];for(function t(e,n,r){var i,o,a;if(null!==e&&"object"==typeof e)if(-1!==(o=n.indexOf(e)))-1===r.indexOf(o)&&r.push(o);else if(n.push(e),Array.isArray(e))for(o=0,a=e.length;o<a;o+=1)t(e[o],n,r);else for(i=Object.keys(e),o=0,a=i.length;o<a;o+=1)t(e[i[o]],n,r)}(t,i,o),n=0,r=o.length;n<r;n+=1)e.duplicates.push(i[o[n]]);e.usedDuplicates=new Array(r)}function Me(t,e){var n=new pe(e=e||{});return n.noRefs||je(t,n),_e(n,0,t,!0,!0)?n.dump+"\n":""}var Ie={dump:Me,safeDump:function(t,e){return Me(t,s.extend({schema:P},e))}};function Ee(t){return function(){throw new Error("Function "+t+" is deprecated and cannot be used.")}}var Ne,Le={Type:h,Schema:v,FAILSAFE_SCHEMA:y,JSON_SCHEMA:O,CORE_SCHEMA:T,DEFAULT_SAFE_SCHEMA:P,DEFAULT_FULL_SCHEMA:G,load:Bt.load,loadAll:Bt.loadAll,safeLoad:Bt.safeLoad,safeLoadAll:Bt.safeLoadAll,dump:Ie.dump,safeDump:Ie.safeDump,YAMLException:c,MINIMAL_SCHEMA:y,SAFE_SCHEMA:P,DEFAULT_SCHEMA:G,scan:Ee("scan"),parse:Ee("parse"),compose:Ee("compose"),addConstructor:Ee("addConstructor")};function Fe(t,e,n,r){if(e)for(var i=0,o=e;i<o.length;i++){var a=n[o[i]];a[r]=a[r]||[],a[r].push(t)}}var Be=function(){function t(){this.articles=new o(Ne.articlesOrder,{keys:["id","type","title","text"],tokenize:!0,matchAllTokens:!0,distance:10,threshold:.1})}return t.prototype.findArticles=function(t){return this.articles.search(t)},t}(),He=function(){return function(t){if(Object.assign(this,t),Ne.manufacture[this.name]=this,this.requires)for(var e=0,n=this.requires;e<n.length;e++){var r=n[e],i=Ne.research[r];i.manufacture||(i.manufacture=[]),i.manufacture.push(this.name)}if(this.producedItems)for(var o=0,a=Object.keys(this.producedItems);o<a.length;o++){var s=a[o];(u=Ne.items[s])&&(u.manufacture||(u.manufacture={}),u.manufacture[this.name]=this.producedItems[s])}if(this.requiredItems)for(var l=0,c=Object.keys(this.requiredItems);l<c.length;l++){var u;s=c[l],(u=Ne.items[s])&&(u.componentOf||(u.componentOf={}),u.componentOf[this.name]=this.requiredItems[s])}if(this.randomProducedItems){this.chanceSum=0;for(var p=0,f=this.randomProducedItems;p<f.length;p++){var d=f[p];this.chanceSum+=d[0]}}qe.add("allowsManufacture",this.name,this.requiresBaseFunc),Ye.create({id:this.name,section:"MANUFACTURE",type_id:"MANUFACTURE"})}}(),De=function(){return function(t){Object.assign(this,t),Ne.research[this.name]=this,qe.add("allowsResearching",this.name,this.requiresBaseFunc),Ye.create({id:this.name,section:"RESEARCH",type_id:"RESEARCH"})}}(),qe=function(){function t(t){this.id=t,Ye.create({id:t,type_id:"SERVICES",section:"SERVICES"})}return t.add=function(e,n,r){if(r)for(var i=0,o=r;i<o.length;i++){var a=o[i];a in Ne.baseServices||(Ne.baseServices[a]=new t(a)),e in Ne.baseServices[a]||(Ne.baseServices[a][e]=[]),Ne.baseServices[a][e].push(n)}},t}(),Pe=function(){return function(t){Object.assign(this,t),Ne.alienDeployments[this.type]=this;var e=Ne.startingConditions[this.startingCondition];e&&e.deployments.push(this.type)}}(),Re=function(){return function(t){Object.assign(this,t),Ne.craftWeapons[this.type]=this,qe.add("canBuy",this.type,this.requiresBuyBaseFunc)}}(),We=function(){return function(t){this.startingConditions=[],Object.assign(this,t),Ne.crafts[this.type]=this}}(),ze=function(){return function(t){Object.assign(this,t),Ne.ufos[this.type]=this}}(),Ue=function(){return function(t){Object.assign(this,t),Ne.facilities[this.type]=this,qe.add("providedBy",this.type,this.provideBaseFunc),qe.add("allowsBuilding",this.type,this.requiresBaseFunc),qe.add("forbidsBuilding",this.type,this.forbiddenBaseFunc)}}(),Ge=function(){return function(t){this.allowedCraft=[],this.allowedItemCategories=[],this.allowedArmors=[],this.allowedVehicles=[],this.deployments=[],Object.assign(this,t),Ne.startingConditions[this.type]=this,Ne.lang[this.type]=Ne.str(this.type.substr(12));for(var e=0,n=this.allowedCraft;e<n.length;e++){var r=n[e];Ne.crafts[r].startingConditions.push(this.type)}Ye.create({id:this.type,section:"CONDITIONS",type_id:"CONDITIONS"})}}(),Ve=function(){return function(t){Object.assign(this,t),Ne.units[this.type]=this;var e=Ne.armors[t.armor];e&&(e.users=e.users||[],e.users.push(this.type))}}(),Ke=function(){return function(t,e){this.mode=e,this.possible=!1,this.flatTime=!1,this.shots=1,this.pellets=1;var n=e.charAt(0).toUpperCase()+e.substr(1),r="ammo"==e&&2==t.battleType||"melee"==e&&3==t.battleType||"psi"==e&&9==t.battleType||"throw"==e&&[4,5].includes(t.battleType);if(!t["accuracy"+n]&&!r)return null;"melee"==e&&3!=t.battleType?(this.damage=t.meleePower,this.damageBonus=t.meleeBonus,this.damageType=t.meleeType):t.compatibleAmmo||(this.damage=t.power,this.damageBonus=t.damageBonus,this.damageType=t.damageType),this.pellets=t.shotgunPellets||1,this.shots="auto"==e?t.autoShots||3:1,this.name=e.substr(0,1).toUpperCase()+e.substr(1);var i="conf"+this.name;if(i in t){var o=t[i];o.name&&(this.name=Ne.str(o.name)),o.shots&&(this.shots=o.shots),delete t[i]}if(t[e+"AttackName"]&&(this.name=Ne.str(t[e+"AttackName"])),"melee"==e&&(this.alter=t.meleeAlter),3!=t.battleType&&"melee"==e||(this.alter=t.damageAlter),"ammo"!=e){("melee"==e&&3==t.battleType||"melee"!=e)&&t.flatRate&&(this.flatTime=t.flatRate),t["flat"+n]&&t["flat"+n].time&&(this.flatTime=!0),"Psi"==n&&(n="Use"),this.cost=this.cost=t["cost"+n]||{time:t["tu"+n],energy:0},this.accuracy=t["accuracy"+n]||100;var a="throw"==e?t.throwMultiplier:"melee"==e?t.meleeMultiplier:t.accuracyMultiplier;a||((a={})["throw"==e?"throwing":"melee"==e?"melee":"firing"]=1),this.accuracyMultiplier=a}this.alter&&this.alter.ResistType&&(this.damageType=this.alter.ResistType),e+"Range"in t&&(this.alter=this.alter||{},this.alter.range=t[e+"Range"]),this.possible=!0}}(),Ye=function(){function t(t){this.id=t.id,this.title=t.title||Ne.str(t.id),Ne.lang[this.id]=this.title,this.text=Ne.lang[t.text]||Ne.lang[t.id+"_UFOPEDIA"],this.image_id=t.image_id,this.type_id=t.type_id||"-1",Ne.articles[this.id]=this;var e=t.id;Ne.articles[e]=this,t.section&&Ne.addToSection(this,t.section)}return t.create=function(e){if(e.id in Ne.articles){var n=Ne.articles[e.id];return e.section&&n.section!=e.section&&Ne.sections[e.section].add(n),n}return new t(e)},t}(),Xe=function(){function t(t,e){void 0===e&&(e="PEDIA"),this.id=t,this.type_id=e,this._articles=[],Ne.sections[t]=this,this.isType()?Ne.typeSectionsOrder.push(this):Ne.sectionsOrder.push(this),this.title=Ne.str(t),Ye.create({id:t,section:t,type_id:e})}return Object.defineProperty(t.prototype,"articles",{get:function(){return this._articles},enumerable:!0,configurable:!0}),t.prototype.isType=function(){return"TYPE"==this.type_id},t.prototype.add=function(t){this._articles.includes(t)||this._articles.push(t),t.section||(t.section=this)},t}(),Ze=function(){return function(t){this.id=t.type||t.typeSingle,t.files&&(this.path=t.files[0],this.extra=t.files),t.fileSingle&&(this.path=t.fileSingle)}}(),Qe=function(){return function(t){if(this.dollSprites={},this.armor={},Object.assign(this,t),Ne.armors[t.type]=this,this.layersDefinition){var e=this.layersDefaultPrefix;for(var n in this.layersDefinition){var r=this.layersDefinition[n],i=[];for(var o in r){var a=r[o];if(a&&a.length){var s=e+"__"+o+"__"+a;i.push(Ne.sprite(s))}}this.dollSprites[n]=i}}else if(this.spriteInv){var l=this.spriteInv,c=l.length;if(this.spriteInv+".SPK"in Ne.sprites)this.dollSprites={0:[Ne.path+Ne.sprites[this.spriteInv+".SPK"].path]};else for(var u in Ne.sprites)u.substr(0,c)==l&&(this.dollSprites[u.substr(c,u.length-c-4)]=[Ne.path+Ne.sprites[u].path])}if(this.armor={Front:this.frontArmor,Side:this.sideArmor,Rear:this.rearArmor,Under:this.underArmor},this.storeItem&&Ne.items[this.storeItem]){var p=Ne.items[this.storeItem];p.armors||(p.armors=[]),p.armors.push(this.type)}}}(),Je=function(){function t(t){this.invWidth=1,this.invHeight=1,Object.assign(this,t),Ne.items[t.type]=this,this.sprite=Ne.bigSprite[this.bigSprite];var e=this;if("flatThrow"in e&&(e.flatThrowTime=e.flatThrow.time,delete e.flatThrow),qe.add("canBuyItem",this.type,this.requiresBuyBaseFunc),this.categories)for(var n=0,r=this.categories;n<r.length;n++){var i=r[n];this.addCategory(i)}Ye.create({id:this.type,type_id:"ITEMS",section:"ITEMS"})}return t.prototype.attacks=function(){if(!this._attacks){this._attacks=[];for(var t=0,e=["ammo","melee","snap","aimed","auto","throw","psi"];t<e.length;t++){var n=new Ke(this,e[t]);if(n.possible&&(this._attacks.push(n),isNaN(+n.damageType)||this.addCategory("dmg="+Ne.damageTypes[n.damageType]),n.damageBonus)){for(var r in n.damageBonus)this.addCategory("dmg*"+r);for(var r in n.accuracyMultiplier)this.addCategory("acc*"+r)}}}return this._attacks},t.prototype.addCategory=function(t){var e=Ne.categories[t]||[];e.includes(this)||e.push(this),Ne.categories[t]=e},t}(),tn=function(){function e(){this.articles={},this.articlesOrder=[],this.sections={},this.sectionsOrder=[],this.typeSectionsOrder=[],this.sprites={},this.raw={},this.items={},this.categories={},this.armors={},this.units={},this.crafts={},this.ufos={},this.facilities={},this.craftWeapons={},this.alienDeployments={},this.research={},this.manufacture={},this.startingConditions={},this.bigSprite=[],this.floorSprite=[],this.handSprite=[],this.baseSprite=[],this.sounds=[],this.baseServices={},this.redirect={},this.lang={},this.damageTypes=["STR_DAMAGE_NONE","STR_DAMAGE_ARMOR_PIERCING","STR_DAMAGE_INCENDIARY","STR_DAMAGE_HIGH_EXPLOSIVE","STR_DAMAGE_LASER_BEAM","STR_DAMAGE_PLASMA_BEAM","STR_DAMAGE_STUN","STR_DAMAGE_MELEE","STR_DAMAGE_ACID","STR_DAMAGE_SMOKE","STR_DAMAGE_10","STR_DAMAGE_11","STR_DAMAGE_12","STR_DAMAGE_13","STR_DAMAGE_14","STR_DAMAGE_15","STR_DAMAGE_16","STR_DAMAGE_17","STR_DAMAGE_18","STR_MANA"],this.battleTypes=["None (Geoscape-only item)","Firearm","Ammo","Melee","Grenade","Proximity Grenade","Medikit","Motion Scanner","Mind Probe","Psi-Amp","Electro-flare","Corpse"],Ne=this}return e.prototype.damageTypeName=function(t){return this.lang[this.damageTypes[t]]},e.prototype.sound=function(t){return this.path+this.sounds[t]},e.prototype.str=function(t){return this.lang[t]||t},e.prototype.specialSprite=function(t,e){return e in this[t]?this.path+this[t][e]:"xpedia/0.png"},e.prototype.parse=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];for(var i in r)if("lang"==i.substr(0,4)&&Object.assign(this.lang,r[i]),i in this.raw){var o=this.raw[i],a=r[i];if(o.concat)this.raw[i]=o.concat(a);else for(var s=0,l=a;s<l.length;s++){($=l[s])in o?Object.assign(o[$],a[$]):o[$]=a[$]}}else this.raw[i]=r[i]}for(var c=["ITEMS","CONDITIONS","CATEGORIES","RESEARCH","MANUFACTURE","SERVICES"],u=0,p=c;u<p.length;u++){new Xe(St=p[u],"TYPE")}for(var f=0,d=["items","armors","ufopaedia","manufacture","units","alienDeployments","research"];f<d.length;f++){for(var h=d[f],m={},g=0,v=this.raw[h];g<v.length;g++){var y=v[g],b=y.type||y.id||y.name||y.delete;"delete"in y?delete m[b]:b&&b in m?Object.assign(m[b],y):m[b]=y}this.raw[h]=Object.values(m)}for(var $ in this.modName=this.raw.modName,this.path="user/mods/"+Ne.modName+"/",this.lang){var k=this.lang[$];"string"==typeof k&&(k=(k=(k=(k=k.replace(/^({ALT})+/,"")).replace(/{ALT}/g,"")).replace(/^({NEWLINE})+/,"")).replace(/{NEWLINE}/g,"<br/>"),this.lang[$]=k)}for(var w=0,x=Ne.damageTypes;w<x.length;w++){var A=x[w];Ne.categories["dmg="+A]=[],this.redirect[A]="dmg="+A,this.lang["dmg="+A]=this.lang[A]}this.parsePedia(this.raw.ufopaedia),this.parseSprites(this.raw.extraSprites),this.sprites["BIGOBS.PCK"]&&(this.bigSprite=this.sprites["BIGOBS.PCK"].extra),this.sprites["FLOOROB.PCK"]&&(this.floorSprite=this.sprites["FLOOROB.PCK"].extra),this.sprites["HANDOB.PCK"]&&(this.handSprite=this.sprites["HANDOB.PCK"].extra),this.sprites["BASEBITS.PCK"]&&(this.baseSprite=this.sprites["BASEBITS.PCK"].extra),this.raw.extraSounds&&this.raw.extraSounds[0]&&(this.sounds=this.raw.extraSounds[0].files);for(var S=0,O=this.raw.items;S<O.length;S++){var T=O[S];new Je(T)}for(var C=0,_=this.raw.armors;C<_.length;C++){var j=_[C];new Qe(j)}for(var M=0,I=this.raw.units;M<I.length;M++){var E=I[M];new Ve(E)}for(var N=0,L=this.raw.crafts;N<L.length;N++){var F=L[N];new We(F)}for(var B=0,H=this.raw.craftWeapons;B<H.length;B++){var D=H[B];new Re(D)}for(var q=0,P=this.raw.ufos;q<P.length;q++){var R=P[q];new ze(R)}for(var W=0,z=this.raw.facilities;W<z.length;W++){var U=z[W];new Ue(U)}if(this.raw.startingConditions)for(var G=0,V=this.raw.startingConditions;G<V.length;G++){var K=V[G];new Ge(K)}for(var Y=0,X=this.raw.alienDeployments;Y<X.length;Y++){var Z=X[Y];new Pe(Z)}for(var Q=0,J=this.raw.research;Q<J.length;Q++){var tt=J[Q];new De(tt)}for(var et=0,nt=this.raw.manufacture;et<nt.length;et++){var rt=nt[et];new He(rt)}for(var it=0,ot=Object.values(this.facilities);it<ot.length;it++){var at=ot[it];if(at.buildCostItems)for(var st=0,lt=Object.keys(at.buildCostItems);st<lt.length;st++){var ct=lt[st];(yt=Ne.items[ct])&&(yt.componentOf||(yt.componentOf={}),yt.componentOf[at.type]=at.buildCostItems[ct].build,yt.manufacture||(yt.manufacture={}),yt.manufacture[at.type]=at.buildCostItems[ct].refund)}}for(var ut=0,pt=Object.values(this.items);ut<pt.length;ut++){if((yt=pt[ut]).attacks(),yt.compatibleAmmo)for(var ft=0,dt=yt.compatibleAmmo;ft<dt.length;ft++){var ht=dt[ft],mt=this.items[ht];mt&&(mt.compatibleWeapons=mt.compatibleWeapons||[],mt.compatibleWeapons.push(yt.type))}}for(var gt=0,vt=Object.values(this.research);gt<vt.length;gt++){var yt,bt=vt[gt];if(Fe(bt.name,bt.dependencies,Ne.research,"leadsTo"),Fe(bt.name,bt.getOneFree,Ne.research,"freeFrom"),bt.lookup&&bt.name==bt.lookup&&console.warn(bt.lookup+" lookup is to itself"),bt.lookup&&bt.name!=bt.lookup&&this.research[bt.lookup]){var $t=this.research[bt.lookup];$t.seeAlso=$t.seeAlso||[],$t.seeAlso.push(bt.name);var kt=this.article(bt.lookup),wt=this.article(bt.name);Ne.lang[wt.id]||(wt.title=kt.title),wt.text=kt.text,wt.image_id=kt.image_id}if(bt.spawnedItem)(yt=Ne.items[bt.spawnedItem]).spawnedBy=yt.spawnedBy||[],yt.spawnedBy.push(bt.name)}this.ourArmors=Object.values(this.armors).filter(function(t){return t.units}).map(function(t){return t.type});for(var xt=0,At=c;xt<At.length;xt++){var St=At[xt];Ne.sections[St]._articles=Ne.sections[St].articles.sort(function(t,e){return t.title<e.title?-1:1})}for(var Ot=0,Tt=Object.keys(this.categories);Ot<Tt.length;Ot++){var Ct=Tt[Ot];console.log(Ct),Ye.create({id:Ct,title:Ne.str(Ct),type_id:"CATEGORIES",section:"CATEGORIES"})}console.log(this),this.search=new Be},e.prototype.parsePedia=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.id){var i=new Ye(r);this.articlesOrder.push(i),this.articles[i.id]=i}}},e.prototype.parseSprites=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=new Ze(r);this.sprites[i.id]=i}},e.prototype.findNextArticle=function(t,e){if(!t)return null;var n=t.section,r=n?n.articles:this.articlesOrder,i=r.findIndex(function(e){return e.id==t.id});return null!=i?r[i+e]:void 0},e.prototype.decamelize=function(t,e){return void 0===e&&(e=" "),"string"==typeof t&&(t=(t=t.includes("_")&&-1==t.search(/[a-z]/)?t.replace(/_/g," "):t.replace(/([^A-Z])([A-Z])/g,"$1"+e+"$2")).substr(0,1).toUpperCase()+t.substr(1).toLowerCase()),t},e.prototype.sprite=function(t){return t in this.sprites?this.path+this.sprites[t].path:this.path+t},e.prototype.load=function(e){return n=this,r=void 0,o=function(){var n;return t(this,function(t){"base64"==(e=e.trim()).substr(0,6)&&(e=e.substr(6)),n=function(t){for(var e,n=[],r=/^FILE: (.+)\n/gm,i=[];e=r.exec(t);)i.push(e);for(var o=0;o<i.length;o++){var a=i[o][1],s=void 0;"п»ї"==(s=o<i.length-1?t.substr(i[o].index+7+a.length,i[o+1].index-i[o].index-7-a.length):t.substr(i[o].index+7+a.length)).substr(1,3)&&(s=s.substr(4));var l=void 0;try{l=Le.load(s,{json:!0,filename:a})}catch(t){console.log(t.message)}l&&n.push(l)}return n}(e);try{this.parse(n)}catch(t){console.error(t)}return[2]})},new((i=void 0)||(i=Promise))(function(t,e){function a(t){try{l(o.next(t))}catch(t){e(t)}}function s(t){try{l(o.throw(t))}catch(t){e(t)}}function l(e){e.done?t(e.value):new i(function(t){t(e.value)}).then(a,s)}l((o=o.apply(n,r||[])).next())});var n,r,i,o},e.prototype.addToSection=function(t,e){var n;return n=e in Ne.sections?Ne.sections[e]:Ne.sections[e]=new Xe(e),t.id!=n.id&&n.add(t),t.section=n,n},e.prototype.linksByType=function(t){switch(t){case"CONDITIONS":return Object.keys(this.startingConditions).map(function(t){return"CONDITIONS_"+t})}return[]},e.prototype.bodiesCompare=function(t){for(var e in t)2==t[e].length&&(t[e]=("M"==t[e].charAt(0)?"A":"B")+"0"+t[e].substr(1));return t[0]>t[1]?1:-1},e.prototype.article=function(t){return this.articles[this.redirect[t]||t]},e}();function en(){}function nn(t,e){for(const n in e)t[n]=e[n];return t}function rn(t){return t()}function on(){return Object.create(null)}function an(t){t.forEach(rn)}function sn(t){return"function"==typeof t}function ln(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function cn(t){return null==t?"":t}function un(t,e){t.appendChild(e)}function pn(t,e,n){t.insertBefore(e,n||null)}function fn(t){t.parentNode.removeChild(t)}function dn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function hn(t){return document.createElement(t)}function mn(t){return document.createTextNode(t)}function gn(){return mn(" ")}function vn(){return mn("")}function yn(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function bn(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function $n(t,e){e=""+e,t.data!==e&&(t.data=e)}function kn(t,e){(null!=e||t.value)&&(t.value=e)}function wn(t,e,n,r){t.style.setProperty(e,n,r?"important":"")}class xn{constructor(t,e=null){this.e=hn("div"),this.a=e,this.u(t)}m(t,e=null){for(let n=0;n<this.n.length;n+=1)pn(t,this.n[n],e);this.t=t}u(t){this.e.innerHTML=t,this.n=Array.from(this.e.childNodes)}p(t){this.d(),this.u(t),this.m(this.t,this.a)}d(){this.n.forEach(fn)}}let An;function Sn(t){An=t}function On(){if(!An)throw new Error("Function called outside component initialization");return An}const Tn=[],Cn=[],_n=[],jn=[],Mn=Promise.resolve();let In=!1;function En(){In||(In=!0,Mn.then(Ln))}function Nn(t){_n.push(t)}function Ln(){const t=new Set;do{for(;Tn.length;){const t=Tn.shift();Sn(t),Fn(t.$$)}for(;Cn.length;)Cn.pop()();for(let e=0;e<_n.length;e+=1){const n=_n[e];t.has(n)||(n(),t.add(n))}_n.length=0}while(Tn.length);for(;jn.length;)jn.pop()();In=!1}function Fn(t){t.fragment&&(t.update(t.dirty),an(t.before_update),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(Nn))}const Bn=new Set;let Hn;function Dn(){Hn={r:0,c:[],p:Hn}}function qn(){Hn.r||an(Hn.c),Hn=Hn.p}function Pn(t,e){t&&t.i&&(Bn.delete(t),t.i(e))}function Rn(t,e,n,r){if(t&&t.o){if(Bn.has(t))return;Bn.add(t),Hn.c.push(()=>{Bn.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const Wn="undefined"!=typeof window?window:global;function zn(t,e,n){const{fragment:r,on_mount:i,on_destroy:o,after_update:a}=t.$$;r.m(e,n),Nn(()=>{const e=i.map(rn).filter(sn);o?o.push(...e):an(e),t.$$.on_mount=[]}),a.forEach(Nn)}function Un(t,e){t.$$.fragment&&(an(t.$$.on_destroy),t.$$.fragment.d(e),t.$$.on_destroy=t.$$.fragment=null,t.$$.ctx={})}function Gn(t,e,n,r,i,o){const a=An;Sn(t);const s=e.props||{},l=t.$$={fragment:null,ctx:null,props:o,update:en,not_equal:i,bound:on(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:on(),dirty:null};let c=!1;var u;l.ctx=n?n(t,s,(e,n,r=n)=>(l.ctx&&i(l.ctx[e],l.ctx[e]=r)&&(l.bound[e]&&l.bound[e](r),c&&function(t,e){t.$$.dirty||(Tn.push(t),En(),t.$$.dirty=on()),t.$$.dirty[e]=!0}(t,e)),n)):s,l.update(),c=!0,an(l.before_update),l.fragment=r(l.ctx),e.target&&(e.hydrate?l.fragment.l((u=e.target,Array.from(u.childNodes))):l.fragment.c(),e.intro&&Pn(t.$$.fragment),zn(t,e.target,e.anchor),Ln()),Sn(a)}class Vn{$destroy(){Un(this,1),this.$destroy=en}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function Kn(t){var e,n=Ne.str(t.href)+"";return{c(){e=mn(n)},m(t,n){pn(t,e,n)},p(t,r){t.href&&n!==(n=Ne.str(r.href)+"")&&$n(e,n)},d(t){t&&fn(e)}}}function Yn(t){var e,n,r,i=Ne.str(t.href)+"";return{c(){e=hn("a"),n=mn(i),bn(e,"href",r="#"+t.href)},m(t,r){pn(t,e,r),un(e,n)},p(t,o){t.href&&i!==(i=Ne.str(o.href)+"")&&$n(n,i),t.href&&r!==(r="#"+o.href)&&bn(e,"href",r)},d(t){t&&fn(e)}}}function Xn(t){var e,n;function r(t,n){return(null==e||t.href)&&(e=!!Ne.article(n.href)),e?Yn:Kn}var i=r(null,t),o=i(t);return{c(){o.c(),n=vn()},m(t,e){o.m(t,e),pn(t,n,e)},p(t,e){i===(i=r(t,e))&&o?o.p(t,e):(o.d(1),(o=i(e))&&(o.c(),o.m(n.parentNode,n)))},i:en,o:en,d(t){o.d(t),t&&fn(n)}}}function Zn(t,e,n){let{href:r}=e;return t.$set=(t=>{"href"in t&&n("href",r=t.href)}),t.$$.update=((t={href:1})=>{t.href&&r&&r.type&&n("href",r=r.type)}),{href:r}}class Qn extends Vn{constructor(t){super(),Gn(this,t,Zn,Xn,ln,["href"])}}function Jn(t,e,n){const r=Object.create(t);return r.option=e[n],r}function tr(t){var e,n,r,i,o,a,s=!t.title&&er(t),l=t.title&&nr(t);let c=t.sortedList,u=[];for(let e=0;e<c.length;e+=1)u[e]=rr(Jn(t,c,e));const p=t=>Rn(u[t],1,1,()=>{u[t]=null});return{c(){s&&s.c(),e=gn(),n=hn("div"),l&&l.c(),r=gn(),i=hn("div"),o=hn("ol");for(let t=0;t<u.length;t+=1)u[t].c();bn(i,"class","cols"),bn(n,"class","links-page")},m(t,c){s&&s.m(t,c),pn(t,e,c),pn(t,n,c),l&&l.m(n,null),un(n,r),un(n,i),un(i,o);for(let t=0;t<u.length;t+=1)u[t].m(o,null);a=!0},p(t,i){if(i.title?s&&(s.d(1),s=null):s?s.p(t,i):((s=er(i)).c(),s.m(e.parentNode,e)),i.title?l?l.p(t,i):((l=nr(i)).c(),l.m(n,r)):l&&(l.d(1),l=null),t.sortedList){let e;for(c=i.sortedList,e=0;e<c.length;e+=1){const n=Jn(i,c,e);u[e]?(u[e].p(t,n),Pn(u[e],1)):(u[e]=rr(n),u[e].c(),Pn(u[e],1),u[e].m(o,null))}for(Dn(),e=c.length;e<u.length;e+=1)p(e);qn()}},i(t){if(!a){for(let t=0;t<c.length;t+=1)Pn(u[t]);a=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Rn(u[t]);a=!1},d(t){s&&s.d(t),t&&(fn(e),fn(n)),l&&l.d(),dn(u,t)}}}function er(t){var e,n,r,i,o,a=Ne.str("A-Z")+"";return{c(){e=hn("div"),n=hn("button"),r=mn(a),bn(n,"style",i=t.sorted?"":"text-decoration:line-through"),bn(e,"class","links-page-button"),o=yn(n,"click",t.click_handler)},m(t,i){pn(t,e,i),un(e,n),un(n,r)},p(t,e){t.sorted&&i!==(i=e.sorted?"":"text-decoration:line-through")&&bn(n,"style",i)},d(t){t&&fn(e),o()}}}function nr(t){var e,n;return{c(){e=hn("div"),n=mn(t.title),bn(e,"class","links-page-header")},m(t,r){pn(t,e,r),un(e,n)},p(t,e){t.title&&$n(n,e.title)},d(t){t&&fn(e)}}}function rr(t){var e,n,r,i=new Qn({props:{href:t.option}});return{c(){e=hn("li"),i.$$.fragment.c(),n=gn()},m(t,o){pn(t,e,o),zn(i,e,null),un(e,n),r=!0},p(t,e){var n={};t.sortedList&&(n.href=e.option),i.$set(n)},i(t){r||(Pn(i.$$.fragment,t),r=!0)},o(t){Rn(i.$$.fragment,t),r=!1},d(t){t&&fn(e),Un(i)}}}function ir(t){var e,n,r=t.links&&t.links.length>0&&tr(t);return{c(){r&&r.c(),e=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i),n=!0},p(t,n){n.links&&n.links.length>0?r?(r.p(t,n),Pn(r,1)):((r=tr(n)).c(),Pn(r,1),r.m(e.parentNode,e)):r&&(Dn(),Rn(r,1,1,()=>{r=null}),qn())},i(t){n||(Pn(r),n=!0)},o(t){Rn(r),n=!1},d(t){r&&r.d(t),t&&fn(e)}}}function or(t,e,n){let{links:r,title:i=null}=e,o=!1;let a;return t.$set=(t=>{"links"in t&&n("links",r=t.links),"title"in t&&n("title",i=t.title)}),t.$$.update=((t={sorted:1,links:1})=>{(t.sorted||t.links)&&n("sortedList",a=o?r.slice().sort((t,e)=>Ne.str(t)>Ne.str(e)?1:-1):r)}),{links:r,title:i,sorted:o,sortedList:a,click_handler:t=>n("sorted",o=!o)}}class ar extends Vn{constructor(t){super(),Gn(this,t,or,ir,ln,["links","title"])}}function sr(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m,g,v,y,b,$,k,w,x,A,S,O,T,C,_,j,M,I,E,N,L,F,B,H,D,q,P,R,W,z,U,G,V,K,Y,X,Z,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ct,ut,pt,ft,dt,ht,mt,gt,vt,yt,bt,$t,kt,wt,xt,At,St,Ot,Tt,Ct,_t,jt,Mt,It,Et,Nt,Lt,Ft,Bt,Ht,Dt,qt,Pt,Rt,Wt,zt,Ut,Gt,Vt,Kt,Yt,Xt,Zt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,pe,fe,de,he,me,ge,ve,ye,be,$e,ke,we,xe,Ae,Se,Oe,Te,Ce,_e,je,Me,Ie,Ee,Le,Fe,Be,He,De,qe,Pe,Re,We,ze,Ue,Ge,Ve,Ke,Ye,Xe,Ze,Qe,Je,tn,nn,rn,on,an,sn,ln,cn,dn,vn,yn,$n,kn,xn,An,Sn,On,Tn,Cn,_n,jn,Mn,In,En,Nn,Ln,Fn,Bn,Hn,Dn,qn,Pn,Rn,Wn,zn,Un,Gn,Vn,Kn,Yn,Xn,Zn,Qn,Jn,tr,er,nr,rr,ir,or,ar,sr,lr,cr,ur,pr,fr,dr,hr,mr,gr,vr,yr,br,$r,kr,wr,xr,Ar,Sr,Or,Tr,Cr,_r=Ne.str("Welcome to website about The X-COM Files - mod to OpenXcom.")+"",jr=Ne.str("What is XCF?")+"",Mr=Ne.str("This megamod is a global conversion to OpenXcom (reimplementation of the classic")+"",Ir=Ne.str("Enemy Unknown 1994).")+"",Er=Ne.str("With this mod the game starts in 1996. The player gets control over the newly formed organization X-Com - a project of the UN, designed to investigate abnormal events on our planet. The style of the series X-Files (where the name comes from) is surprisingly clear. In the beginning, no fighters, dozens of scientists, millions of dollars in budgets. You only have two special agents and they travel by public transport! Investigate mysterious incidents, tie the evidence together to shed light on extraterrestrial activities, develop X-COM and prepare for an alien invasion from Cydonia!")+"",Nr=Ne.str("This mod contains many, many additions, like new mission types, enemies, equipment and story arcs (including the entire Final Mod Pack project). It also places the game a bit more firmly in the 90's conspiracy genre and its clichés.")+"",Lr=Ne.str("Latest News")+"",Fr=Ne.str("Marching On")+"",Br=Ne.str("Our project continues to develop vigorously!")+"",Hr=Ne.str("Versions of the mod, starting from 1.1, are free from controversial content. In order to preserve the same diversity, original tactical maps continue to be created. And, of course, the mod content in general continues to develop, more balance and error fixes has been presented.")+"",Dr=Ne.str("We continue to develop our Wiki - added extended localization (thanks to Kato for help) and long-awaited search function (big thanks to Baturinsky for fixing a bug in the site engine). Also fixed bug in displaying armor articles.")+"",qr=Ne.str("We are developing a community of modders, guiding and inspiring newcomers. Solarius Scorch has released the first version of his")+"",Pr=Ne.str("map creation guide")+"",Rr=Ne.str("and on our")+"",Wr=Ne.str("channel we stream modding.")+"",zr=Ne.str("Dehobbesation")+"",Ur=Ne.str("Last week Hobbes - the author of some of the maps used in XCF (and many other mods) - demanded to stop using them. We've decided to temporarily limit the possibility of downloading the mod. Currently, all controversial content is removed and we are actively replacing it by original content. The positive side of the situation is an opportunity to rethink the existing maps and make them really interesting. We plan to release a new version as soon as possible, follow the news!")+"",Gr=Ne.str("The truth is... right here!")+"",Vr=Ne.str("Our site starting its work. Now you can find here fresh news and xpedia for our mod powered by")+"",Kr=Ne.str("Version 1.0 released!")+"",Yr=Ne.str("Now, this doesn't at all mean that this is the end. I will continue releasing new versions just like before, at least for the foreseeable future... The 1.0 only means that I am satisfied with how the mod works now and consider it 'done' enough to say so.")+"",Xr=Ne.str("mod author, lead designer")+"",Zr=Ne.str("Watch Dev's Talk - 1.0 release")+"",Qr=Ne.str("Main additions")+"",Jr=Ne.str("Updated to OXCE 6.1.1")+"",ti=Ne.str("New features")+"",ei=Ne.str("random events, commendations (with bonuses), enhancement treatments; basic agent stats lowered for balance.")+"",ni=Ne.str("New stat")+"",ri=Ne.str("Readiness, and associated exhaustion mechanics.")+"",ii=Ne.str("New alien race")+"",oi=Ne.str("Chaser.")+"",ai=Ne.str("Overhaul of agent advancement mechanics.")+"",si=Ne.str("New missions, units, items, balance fixes and musch more! For detail info see")+"",li=Ne.str("full changelog")+"",ci=Ne.str("Support project")+"",ui=Ne.str("Localization")+"",pi=Ne.str("To translate our mode for different languages we're using")+"",fi=Ne.str("You can help us by translating some part of a mod by")+"",di=Ne.str("this link")+"",hi=Ne.str("Donation")+"",mi=Ne.str("mod author, lead developing")+"",gi=Ne.str("game designer, russian community manager, website developer")+"",vi=Ne.str("Download")+"";return{c(){e=hn("div"),n=hn("div"),(r=hn("h1")).textContent="The X-COM Files",i=gn(),o=mn(_r),a=gn(),s=hn("br"),l=gn(),c=hn("h4"),u=mn(jr),p=gn(),f=mn(Mr),d=mn(" UFO:  "),h=mn(Ir),m=hn("br"),g=gn(),v=hn("br"),y=gn(),b=mn(Er),$=hn("br"),k=gn(),w=mn(Nr),x=hn("br"),A=gn(),S=hn("br"),O=gn(),(T=hn("div")).innerHTML='<div class="column media-bar" style="padding-bottom: 0px;"><a href="https://discordapp.com/invite/XrQQTPg"><img class="media-icon" src="https://cdn3.iconfinder.com/data/icons/popular-services-brands-vol-2/512/discord-256.png" alt="discord"></a> <a href="https://openxcom.org/forum/index.php/board,21.0.html"><img class="media-icon" src="https://www.gamerguides.com/forum/uploads/FG4SCQ58YFXV.jpg" alt="forum"></a> <a href="https://vk.com/thexcomfiles"><img class="media-icon" src="https://cdn3.iconfinder.com/data/icons/social-network-icon/112/vk-256.png" alt="VK"></a> <a href="https://www.youtube.com/channel/UCO7G6RlATE5EIg2gHnks3cA"><img class="media-icon" src="https://cdn0.iconfinder.com/data/icons/social-media-2091/100/social-16-256.png" alt="YouTube"></a> <a href="https://www.twitch.tv/finnik723studio"><img class="media-icon" src="https://cdn3.iconfinder.com/data/icons/popular-services-brands-vol-2/512/twitch-256.png" alt="Twitch"></a></div>',C=gn(),_=hn("h1"),j=mn(Lr),M=gn(),I=hn("div"),E=hn("article"),(N=hn("figure")).innerHTML='<p class="image is-128x128"><img style="margin-top: 20px" alt="launch" src="https://image.flaticon.com/icons/svg/993/993707.svg"></p>',L=gn(),F=hn("div"),B=hn("div"),(H=hn("small")).textContent="23/11/2019",D=gn(),q=hn("p"),P=mn(Fr),R=gn(),W=hn("div"),z=hn("p"),U=mn(Br),G=hn("br"),V=mn("\r\n                  - "),K=mn(Hr),Y=hn("br"),X=mn("\r\n                  - "),Z=mn(Dr),Q=hn("br"),J=mn("\r\n                  - "),tt=mn(qr),et=gn(),nt=hn("a"),rt=mn(Pr),it=mn(", "),ot=mn(Rr),at=gn(),(st=hn("a")).textContent="Twitch",lt=gn(),ct=mn(Wr),ut=gn(),pt=hn("br"),ft=gn(),dt=hn("h1"),ht=gn(),mt=hn("div"),gt=hn("article"),(vt=hn("figure")).innerHTML='<p class="image is-128x128"><img style="margin-top: 20px" alt="launch" src="https://image.flaticon.com/icons/svg/1008/1008766.svg"></p>',yt=gn(),bt=hn("div"),$t=hn("div"),(kt=hn("small")).textContent="23/11/2019",wt=gn(),xt=hn("p"),At=mn(zr),St=gn(),Ot=hn("div"),Tt=hn("p"),Ct=mn(Ur),_t=gn(),jt=hn("br"),Mt=gn(),It=hn("h1"),Et=gn(),Nt=hn("div"),Lt=hn("article"),(Ft=hn("figure")).innerHTML='<p class="image is-128x128"><img style="margin-top: 20px" alt="launch" src="https://image.flaticon.com/icons/svg/2254/2254743.svg"></p>',Bt=gn(),Ht=hn("div"),Dt=hn("div"),(qt=hn("small")).textContent="23/11/2019",Pt=gn(),Rt=hn("p"),Wt=mn(Gr),zt=gn(),Ut=hn("div"),Gt=hn("p"),Vt=mn(Vr),Kt=gn(),(Yt=hn("a")).textContent="Baturinsky's XPedia",Xt=mn("."),Zt=gn(),Qt=hn("br"),Jt=gn(),te=hn("h1"),ee=gn(),ne=hn("div"),re=hn("article"),(ie=hn("figure")).innerHTML='<p class="image is-128x128"><img style="margin-top: 20px" alt="1.0Release" src="https://image.flaticon.com/icons/svg/2254/2254616.svg"></p>',oe=gn(),ae=hn("div"),se=hn("div"),(le=hn("small")).textContent="03/11/2019",ce=gn(),ue=hn("p"),pe=mn(Kr),fe=gn(),de=hn("div"),he=hn("p"),me=mn('"'),ge=mn(Yr),ve=mn('"'),ye=gn(),be=hn("small"),$e=mn("– Solarius Scorch, "),ke=mn(Xr),we=mn("."),xe=gn(),Ae=hn("br"),Se=gn(),Oe=hn("br"),Te=gn(),Ce=hn("button"),_e=hn("img"),je=gn(),Me=hn("div"),Ie=mn(Zr),Ee=gn(),Le=hn("br"),Fe=gn(),Be=hn("div"),He=mn(Qr),De=mn(":\r\n          "),qe=hn("ul"),Pe=hn("li"),Re=mn(Jr),We=mn("."),ze=gn(),Ue=hn("li"),Ge=mn(ti),Ve=mn(": "),Ke=mn(ei),Ye=gn(),Xe=hn("li"),Ze=mn(ni),Qe=mn(": "),Je=mn(ri),tn=gn(),nn=hn("li"),rn=mn(ii),on=mn(": "),an=mn(oi),sn=gn(),ln=hn("li"),cn=mn(ai),dn=gn(),vn=hn("li"),yn=mn(si),$n=gn(),kn=hn("a"),xn=mn(li),An=mn("."),Sn=gn(),On=hn("div"),Tn=hn("h1"),Cn=mn(ci),_n=gn(),jn=hn("h4"),Mn=mn(ui),In=gn(),En=mn(pi),Nn=gn(),(Ln=hn("strong")).textContent="Transifex",Fn=mn(". \r\n      "),Bn=mn(fi),Hn=gn(),Dn=hn("a"),qn=mn(di),Pn=mn(".\r\n      "),Rn=hn("br"),Wn=gn(),zn=hn("br"),Un=gn(),Gn=hn("h4"),Vn=mn(hi),Kn=gn(),Yn=hn("div"),Xn=hn("div"),Zn=hn("div"),Qn=hn("img"),Jn=gn(),tr=hn("br"),er=gn(),(nr=hn("strong")).textContent="Solarius Scorch",rr=gn(),ir=hn("br"),or=gn(),ar=mn(mi),sr=gn(),lr=hn("div"),cr=hn("div"),(ur=hn("a")).innerHTML='<img class="donate-icon" src="xpedia/Finnik.png" alt="Finnik">',pr=gn(),fr=hn("br"),dr=gn(),(hr=hn("strong")).textContent="Finnik",mr=gn(),gr=hn("br"),vr=gn(),yr=mn(gi),br=gn(),$r=hn("br"),kr=gn(),wr=hn("br"),xr=gn(),Ar=hn("div"),Sr=hn("button"),Or=mn(vi),Tr=gn(),(Cr=hn("div")).innerHTML='<img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/osprey.1.png" alt="osprey.1.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/screen072.1.png" alt="screen072.1.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/callofcoding.1.png" alt="callofcoding.1.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/screen070.png" alt="screen070.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/village01.png" alt="village01.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/lilsub.png" alt="lilsub.png"> <img class="imgbox" src="https://thumb.mod.io/mods/0640/158/thumb_1020x2000/intheslums.png" alt="intheslums.png">',bn(T,"class","columns"),bn(N,"class","media-left"),bn(q,"class","title"),wn(q,"margin-bottom","10px"),bn(nt,"href","http://thexcomfiles.xyz/Mapping_manual.pdf"),bn(st,"href","https://www.twitch.tv/finnikxcf"),bn(B,"class","content"),bn(F,"class","media-content"),bn(E,"class","media"),bn(vt,"class","media-left"),bn(xt,"class","title"),wn(xt,"margin-bottom","10px"),bn($t,"class","content"),bn(bt,"class","media-content"),bn(gt,"class","media"),bn(Ft,"class","media-left"),bn(Rt,"class","title"),wn(Rt,"margin-bottom","10px"),bn(Yt,"href","https://github.com/baturinsky/xpedia/"),bn(Dt,"class","content"),bn(Ht,"class","media-content"),bn(Lt,"class","media"),bn(ie,"class","media-left"),bn(ue,"class","title"),wn(ue,"margin-bottom","10px"),bn(_e,"class","watchbtnicon"),bn(_e,"src","https://image.flaticon.com/icons/svg/419/419211.svg"),bn(_e,"alt","youtube"),bn(Me,"class","is-inline-block"),wn(Me,"margin-top","auto"),wn(Me,"margin-bottom","auto"),bn(Ce,"class","watchbtn"),bn(Ce,"onclick","window.open('https://youtu.be/hFKEFMyEcQU')"),bn(se,"class","content"),bn(ae,"class","media-content"),bn(re,"class","media"),bn(kn,"href","https://openxcom.org/forum/index.php/topic,5427.0.html"),bn(qe,"class","changelog"),bn(Be,"class","changelog"),bn(Dn,"href","https://www.transifex.com/signin/?next=/openxcom/openxcom-mods/translate/#ru/xcf/183492210"),bn(Qn,"class","donate-icon"),bn(Qn,"src","xpedia/Scorch.png"),bn(Qn,"alt","Scorch"),bn(nr,"class","man"),bn(Zn,"class","donatedescription"),bn(Xn,"class","donate"),bn(Xn,"onclick","window.open('https://www.patreon.com/user/posts?u=2957095')"),bn(ur,"href","https://www.patreon.com/FinnikXCF"),bn(hr,"class","man"),bn(lr,"class","donate"),bn(lr,"onclick","window.open('https://www.patreon.com/FinnikXCF')"),bn(Yn,"class","donations"),bn(n,"class","column is-full-touch is-9-desktop"),bn(Sr,"title","Download"),bn(Sr,"class","downloadbtn"),bn(Sr,"onclick"," window.open('https://openxcom.mod.io/the-x-com-files', '_blank'); return false;"),bn(Cr,"class","imgcol"),bn(Ar,"class","column is-hidden-touch is-3-desktop"),bn(e,"class","columns")},m(t,Ne){pn(t,e,Ne),un(e,n),un(n,r),un(n,i),un(n,o),un(n,a),un(n,s),un(n,l),un(n,c),un(c,u),un(n,p),un(n,f),un(n,d),un(n,h),un(n,m),un(n,g),un(n,v),un(n,y),un(n,b),un(n,$),un(n,k),un(n,w),un(n,x),un(n,A),un(n,S),un(n,O),un(n,T),un(n,C),un(n,_),un(_,j),un(n,M),un(n,I),un(I,E),un(E,N),un(E,L),un(E,F),un(F,B),un(B,H),un(B,D),un(B,q),un(q,P),un(B,R),un(B,W),un(W,z),un(z,U),un(z,G),un(z,V),un(z,K),un(z,Y),un(z,X),un(z,Z),un(z,Q),un(z,J),un(z,tt),un(z,et),un(z,nt),un(nt,rt),un(z,it),un(z,ot),un(z,at),un(z,st),un(z,lt),un(z,ct),un(I,ut),un(I,pt),un(n,ft),un(n,dt),un(n,ht),un(n,mt),un(mt,gt),un(gt,vt),un(gt,yt),un(gt,bt),un(bt,$t),un($t,kt),un($t,wt),un($t,xt),un(xt,At),un($t,St),un($t,Ot),un(Ot,Tt),un(Tt,Ct),un(mt,_t),un(mt,jt),un(n,Mt),un(n,It),un(n,Et),un(n,Nt),un(Nt,Lt),un(Lt,Ft),un(Lt,Bt),un(Lt,Ht),un(Ht,Dt),un(Dt,qt),un(Dt,Pt),un(Dt,Rt),un(Rt,Wt),un(Dt,zt),un(Dt,Ut),un(Ut,Gt),un(Gt,Vt),un(Gt,Kt),un(Gt,Yt),un(Gt,Xt),un(Nt,Zt),un(Nt,Qt),un(n,Jt),un(n,te),un(n,ee),un(n,ne),un(ne,re),un(re,ie),un(re,oe),un(re,ae),un(ae,se),un(se,le),un(se,ce),un(se,ue),un(ue,pe),un(se,fe),un(se,de),un(de,he),un(he,me),un(he,ge),un(he,ve),un(de,ye),un(de,be),un(be,$e),un(be,ke),un(be,we),un(de,xe),un(de,Ae),un(de,Se),un(de,Oe),un(de,Te),un(de,Ce),un(Ce,_e),un(Ce,je),un(Ce,Me),un(Me,Ie),un(ne,Ee),un(ne,Le),un(ne,Fe),un(ne,Be),un(Be,He),un(Be,De),un(Be,qe),un(qe,Pe),un(Pe,Re),un(Pe,We),un(qe,ze),un(qe,Ue),un(Ue,Ge),un(Ue,Ve),un(Ue,Ke),un(qe,Ye),un(qe,Xe),un(Xe,Ze),un(Xe,Qe),un(Xe,Je),un(qe,tn),un(qe,nn),un(nn,rn),un(nn,on),un(nn,an),un(qe,sn),un(qe,ln),un(ln,cn),un(qe,dn),un(qe,vn),un(vn,yn),un(vn,$n),un(vn,kn),un(kn,xn),un(vn,An),un(n,Sn),un(n,On),un(On,Tn),un(Tn,Cn),un(On,_n),un(On,jn),un(jn,Mn),un(On,In),un(On,En),un(On,Nn),un(On,Ln),un(On,Fn),un(On,Bn),un(On,Hn),un(On,Dn),un(Dn,qn),un(On,Pn),un(On,Rn),un(On,Wn),un(On,zn),un(On,Un),un(On,Gn),un(Gn,Vn),un(On,Kn),un(On,Yn),un(Yn,Xn),un(Xn,Zn),un(Zn,Qn),un(Zn,Jn),un(Zn,tr),un(Zn,er),un(Zn,nr),un(Zn,rr),un(Zn,ir),un(Zn,or),un(Zn,ar),un(Yn,sr),un(Yn,lr),un(lr,cr),un(cr,ur),un(cr,pr),un(cr,fr),un(cr,dr),un(cr,hr),un(cr,mr),un(cr,gr),un(cr,vr),un(cr,yr),un(n,br),un(n,$r),un(n,kr),un(n,wr),un(e,xr),un(e,Ar),un(Ar,Sr),un(Sr,Or),un(Ar,Tr),un(Ar,Cr)},p:en,i:en,o:en,d(t){t&&fn(e)}}}class lr extends Vn{constructor(t){super(),Gn(this,t,null,sr,ln,[])}}function cr(t,e,n){const r=Object.create(t);return r.item=e[n],r.i=n,r}function ur(t){var e,n,r,i=0==t.i?"":t.vertical?"</br>":", ",o=new Qn({props:{href:t.item}});return{c(){n=gn(),o.$$.fragment.c(),e=new xn(i,n)},m(t,i){e.m(t,i),pn(t,n,i),zn(o,t,i),r=!0},p(t,n){r&&!t.vertical||i===(i=0==n.i?"":n.vertical?"</br>":", ")||e.p(i);var a={};t.items&&(a.href=n.item),o.$set(a)},i(t){r||(Pn(o.$$.fragment,t),r=!0)},o(t){Rn(o.$$.fragment,t),r=!1},d(t){t&&(e.d(),fn(n)),Un(o,t)}}}function pr(t){var e,n;let r=t.items,i=[];for(let e=0;e<r.length;e+=1)i[e]=ur(cr(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.items||t.vertical){let a;for(r=n.items,a=0;a<r.length;a+=1){const o=cr(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=ur(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function fr(t,e,n){let{items:r,vertical:i=!1}=e;return t.$set=(t=>{"items"in t&&n("items",r=t.items),"vertical"in t&&n("vertical",i=t.vertical)}),{items:r,vertical:i}}class dr extends Vn{constructor(t){super(),Gn(this,t,fr,pr,ln,["items","vertical"])}}function hr(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function mr(t){var e,n=new Qn({props:{href:t.val}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.val&&(r.href=e.val),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function gr(t){var e,n,r=t.val.toLocaleString()+"";return{c(){e=hn("em"),n=mn(r),bn(e,"class","num")},m(t,r){pn(t,e,r),un(e,n)},p(t,e){t.val&&r!==(r=e.val.toLocaleString()+"")&&$n(n,r)},i:en,o:en,d(t){t&&fn(e)}}}function vr(t){var e,n,r=Ne.str(t.val)+"";return{c(){e=hn("span"),n=mn(r),wn(e,"color",t.val?"lime":"red")},m(t,r){pn(t,e,r),un(e,n)},p(t,i){t.val&&r!==(r=Ne.str(i.val)+"")&&$n(n,r),t.val&&wn(e,"color",i.val?"lime":"red")},i:en,o:en,d(t){t&&fn(e)}}}function yr(t){var e,n;let r=Object.keys(t.val).sort(),i=[];for(let e=0;e<r.length;e+=1)i[e]=$r(hr(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","number-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.val||t.rul){let a;for(r=Object.keys(n.val).sort(),a=0;a<r.length;a+=1){const o=hr(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=$r(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}function br(t){var e,n=new dr({props:{items:t.val,vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.val&&(r.items=e.val),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function $r(t){var e,n,r,i,o,a,s,l,c=Ne.str(t.field)+"",u=new Qn({props:{href:t.val[t.field]}});return{c(){e=hn("tr"),n=hn("td"),r=hn("nobr"),i=gn(),o=hn("td"),a=hn("em"),u.$$.fragment.c(),s=gn()},m(t,p){pn(t,e,p),un(e,n),un(n,r),r.innerHTML=c,un(e,i),un(e,o),un(o,a),zn(u,a,null),un(e,s),l=!0},p(t,e){l&&!t.val||c===(c=Ne.str(e.field)+"")||(r.innerHTML=c);var n={};t.val&&(n.href=e.val[e.field]),u.$set(n)},i(t){l||(Pn(u.$$.fragment,t),l=!0)},o(t){Rn(u.$$.fragment,t),l=!1},d(t){t&&fn(e),Un(u)}}}function kr(t){var e,n,r,i,o,a,s=[br,yr,vr,gr,mr],l=[];function c(t,r){return(null==e||t.val)&&(e=!!Array.isArray(r.val)),e?0:r.val instanceof Object?1:!0===r.val||!1===r.val?2:((null==n||t.val)&&(n=!isNaN(+r.val)),n?3:4)}return r=c(null,t),i=l[r]=s[r](t),{c(){i.c(),o=vn()},m(t,e){l[r].m(t,e),pn(t,o,e),a=!0},p(t,e){var n=r;(r=c(t,e))===n?l[r].p(t,e):(Dn(),Rn(l[n],1,1,()=>{l[n]=null}),qn(),(i=l[r])||(i=l[r]=s[r](e)).c(),Pn(i,1),i.m(o.parentNode,o))},i(t){a||(Pn(i),a=!0)},o(t){Rn(i),a=!1},d(t){l[r].d(t),t&&fn(o)}}}function wr(t,e,n){let{val:r}=e;return t.$set=(t=>{"val"in t&&n("val",r=t.val)}),{val:r}}class xr extends Vn{constructor(t){super(),Gn(this,t,wr,kr,ln,["val"])}}function Ar(t,e,n){const r=Object.create(t);return r.item=e[n],r.i=n,r}function Sr(t){var e,n,r,i=0==t.i?"":t.vertical?"</br>":", ",o=new Qn({props:{href:t.item}});return{c(){n=gn(),o.$$.fragment.c(),e=new xn(i,n)},m(t,i){e.m(t,i),pn(t,n,i),zn(o,t,i),r=!0},p(t,n){r&&!t.vertical||i===(i=0==n.i?"":n.vertical?"</br>":", ")||e.p(i);var a={};t.items&&(a.href=n.item),o.$set(a)},i(t){r||(Pn(o.$$.fragment,t),r=!0)},o(t){Rn(o.$$.fragment,t),r=!1},d(t){t&&(e.d(),fn(n)),Un(o,t)}}}function Or(t){var e,n;let r=t.items,i=[];for(let e=0;e<r.length;e+=1)i[e]=Sr(Ar(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.items||t.vertical){let a;for(r=n.items,a=0;a<r.length;a+=1){const o=Ar(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=Sr(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function Tr(t,e,n){let{items:r,vertical:i=!1}=e;return t.$set=(t=>{"items"in t&&n("items",r=t.items),"vertical"in t&&n("vertical",i=t.vertical)}),{items:r,vertical:i}}class Cr extends Vn{constructor(t){super(),Gn(this,t,Tr,Or,ln,["items","vertical"])}}function _r(t){var e,n,r,i,o,a;return{c(){e=hn("div"),bn(n=hn("img"),"class","pedia-image svelte-3txty7"),bn(n,"style",r=t.style+(t.left?"float:left":"")),bn(n,"alt",i=t.id||""),bn(n,"src",o=Ne.sprite(t.id)),a=yn(n,"load",t.load_handler)},m(t,r){pn(t,e,r),un(e,n)},p(t,e){(t.style||t.left)&&r!==(r=e.style+(e.left?"float:left":""))&&bn(n,"style",r),t.id&&i!==(i=e.id||"")&&bn(n,"alt",i),t.id&&o!==(o=Ne.sprite(e.id))&&bn(n,"src",o)},d(t){t&&fn(e),a()}}}function jr(t){var e,n=t.id&&Ne.sprite(t.id),r=n&&_r(t);return{c(){r&&r.c(),e=vn()},m(t,n){r&&r.m(t,n),pn(t,e,n)},p(t,i){t.id&&(n=i.id&&Ne.sprite(i.id)),n?r?r.p(t,i):((r=_r(i)).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null)},i:en,o:en,d(t){r&&r.d(t),t&&fn(e)}}}function Mr(t,e,n){let{id:r,left:i=!1,maxWidth:o=640,maxZoom:a=4,style:s=""}=e;function l(t){console.info(t);let e=Math.min(a,Math.max(1,Math.floor(o/t.naturalWidth)));t.width=t.naturalWidth*e,t.height=t.naturalHeight*e}console.log(r);return t.$set=(t=>{"id"in t&&n("id",r=t.id),"left"in t&&n("left",i=t.left),"maxWidth"in t&&n("maxWidth",o=t.maxWidth),"maxZoom"in t&&n("maxZoom",a=t.maxZoom),"style"in t&&n("style",s=t.style)}),{id:r,left:i,maxWidth:o,maxZoom:a,style:s,loaded:l,load_handler:t=>l(t.target)}}class Ir extends Vn{constructor(t){super(),Gn(this,t,Mr,jr,ln,["id","left","maxWidth","maxZoom","style"])}}const{Object:Er}=Wn;function Nr(t,e,n){const r=Er.create(t);return r.b=e[n],r.i=n,r}function Lr(t){var e;return{c(){e=mn("+")},m(t,n){pn(t,e,n)},d(t){t&&fn(e)}}}function Fr(t){var e,n=Ne.str(t.b[0])+(1!=t.b[1]?"×<em>"+t.b[1]+"</em>":"");return{c(){e=new xn(n,null)},m(t,n){e.m(t,n)},p(t,r){t.flat&&n!==(n=Ne.str(r.b[0])+(1!=r.b[1]?"×<em>"+r.b[1]+"</em>":""))&&e.p(n)},d(t){t&&e.d()}}}function Br(t){var e,n=100*t.b[1]+"";return{c(){e=new xn(n,null)},m(t,n){e.m(t,n)},p(t,r){t.flat&&n!==(n=100*r.b[1]+"")&&e.p(n)},d(t){t&&e.d()}}}function Hr(t){var e,n,r=0!=t.i&&function(t){var e;return{c(){e=mn(" +")},m(t,n){pn(t,e,n)},d(t){t&&fn(e)}}}();function i(t,e){return"flatHundred"==e.b[0]?Br:Fr}var o=i(0,t),a=o(t);return{c(){r&&r.c(),e=gn(),a.c(),n=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i),a.m(t,i),pn(t,n,i)},p(t,e){o===(o=i(0,e))&&a?a.p(t,e):(a.d(1),(a=o(e))&&(a.c(),a.m(n.parentNode,n)))},d(t){r&&r.d(t),t&&fn(e),a.d(t),t&&fn(n)}}}function Dr(t){var e,n,r=t.flat.length>0&&t.plus&&Lr();let i=t.flat,o=[];for(let e=0;e<i.length;e+=1)o[e]=Hr(Nr(t,i,e));return{c(){r&&r.c(),e=gn();for(let t=0;t<o.length;t+=1)o[t].c();n=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i);for(let e=0;e<o.length;e+=1)o[e].m(t,i);pn(t,n,i)},p(t,a){if(a.flat.length>0&&a.plus?r||((r=Lr()).c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),t.flat||t.rul){let e;for(i=a.flat,e=0;e<i.length;e+=1){const r=Nr(a,i,e);o[e]?o[e].p(t,r):(o[e]=Hr(r),o[e].c(),o[e].m(n.parentNode,n))}for(;e<o.length;e+=1)o[e].d(1);o.length=i.length}},i:en,o:en,d(t){r&&r.d(t),t&&fn(e),dn(o,t),t&&fn(n)}}}function qr(t,e,n){let r,{bonus:i,plus:o=!1}=e;return t.$set=(t=>{"bonus"in t&&n("bonus",i=t.bonus),"plus"in t&&n("plus",o=t.plus)}),t.$$.update=((t={bonus:1})=>{t.bonus&&n("flat",r=function(t){if(!t)return[];let e=[];for(let n of Object.keys(t))if(t[n].length)for(let r in t[n]){let i=t[n][r];0!=i&&(r=1*r+1,e.push([n+(1==r?"":"<sup>"+r+"</sup>"),i]))}else 0!=t[n]&&e.push([n,t[n]]);return e=e.sort((t,e)=>"flatHundred"==t[0]||t[0]<e[0]?-1:1)}(i))}),{bonus:i,plus:o,flat:r}}class Pr extends Vn{constructor(t){super(),Gn(this,t,qr,Dr,ln,["bonus","plus"])}}function Rr(t){var e,n,r;return{c(){e=hn("a"),bn(n=hn("canvas"),"class","pixelated"),wn(n,"display",t.loaded?"inline":"none"),bn(e,"href",t.src)},m(i,o){pn(i,e,o),un(e,n),t.canvas_1_binding(n),r=t.prepareCanvas.call(null,n)||{}},p(t,r){t.loaded&&wn(n,"display",r.loaded?"inline":"none"),t.src&&bn(e,"href",r.src)},i:en,o:en,d(n){n&&fn(e),t.canvas_1_binding(null),r&&"function"==typeof r.destroy&&r.destroy()}}}function Wr(t,e,n){let r,i,{src:o,maxWidth:a=1e6,maxHeight:s=1e6,zoom:l=1}=e,c=null,u=!1;function p(){n("canvas",r.width=Math.min(a,c.naturalWidth*l),r),n("canvas",r.height=Math.min(s,c.naturalHeight*l),r),i.imageSmoothingEnabled=!1,i.mozImageSmoothingEnabled=!1,i.webkitImageSmoothingEnabled=!1,i.drawImage(c,0,0,c.naturalWidth*l,c.naturalHeight*l),n("loaded",u=!0)}return t.$set=(t=>{"src"in t&&n("src",o=t.src),"maxWidth"in t&&n("maxWidth",a=t.maxWidth),"maxHeight"in t&&n("maxHeight",s=t.maxHeight),"zoom"in t&&n("zoom",l=t.zoom)}),t.$$.update=((t={src:1,img:1})=>{(t.src||t.img)&&o&&c&&(n("loaded",u=!1),n("img",c.src=o,c))}),{src:o,maxWidth:a,maxHeight:s,zoom:l,canvas:r,loaded:u,prepareCanvas:function(t){n("canvas",r=t),i=r.getContext("2d"),n("img",c=new Image),n("img",c.onload=p,c),n("img",c.src=o,c)},canvas_1_binding:function(t){Cn[t?"unshift":"push"](()=>{n("canvas",r=t)})}}}class zr extends Vn{constructor(t){super(),Gn(this,t,Wr,Rr,ln,["src","maxWidth","maxHeight","zoom"])}}function Ur(t,e,n){const r=Object.create(t);return r.sound=e[n],r.i=n,r}function Gr(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Vr(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function Kr(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Yr(t,e,n){const r=Object.create(t);return r.res=e[n],r}function Xr(t,e,n){const r=Object.create(t);return r.attack=e[n],r}function Zr(t){var e,n,r,i,o,a=new zr({props:{src:Ne.sprite(t.item.sprite),maxWidth:32*t.item.invWidth,maxHeight:32*t.item.invHeight,zoom:"2"}}),s=t.attacks.length>0&&Qr(t);return{c(){e=hn("tr"),n=hn("td"),r=hn("div"),a.$$.fragment.c(),i=gn(),s&&s.c(),wn(r,"display","flex"),wn(r,"align-items","flex-start"),wn(r,"margin","5px 3px"),bn(n,"colspan","2"),bn(n,"class","svelte-14kmuch")},m(t,l){pn(t,e,l),un(e,n),un(n,r),zn(a,r,null),un(r,i),s&&s.m(r,null),o=!0},p(t,e){var n={};t.item&&(n.src=Ne.sprite(e.item.sprite)),t.item&&(n.maxWidth=32*e.item.invWidth),t.item&&(n.maxHeight=32*e.item.invHeight),a.$set(n),e.attacks.length>0?s?(s.p(t,e),Pn(s,1)):((s=Qr(e)).c(),Pn(s,1),s.m(r,null)):s&&(Dn(),Rn(s,1,1,()=>{s=null}),qn())},i(t){o||(Pn(a.$$.fragment,t),Pn(s),o=!0)},o(t){Rn(a.$$.fragment,t),Rn(s),o=!1},d(t){t&&fn(e),Un(a),s&&s.d()}}}function Qr(t){var e,n,r,i,o,a,s,l=Ne.str("damage")+"",c=2!=t.item.battleType&&Jr();let u=t.attacks,p=[];for(let e=0;e<u.length;e+=1)p[e]=li(Xr(t,u,e));const f=t=>Rn(p[t],1,1,()=>{p[t]=null});return{c(){e=hn("table"),n=hn("thead"),c&&c.c(),r=gn(),i=hn("td"),o=mn(l),a=gn();for(let t=0;t<p.length;t+=1)p[t].c();bn(i,"class","svelte-14kmuch"),bn(e,"class","attacks-table")},m(t,l){pn(t,e,l),un(e,n),c&&c.m(n,null),un(n,r),un(n,i),un(i,o),un(e,a);for(let t=0;t<p.length;t+=1)p[t].m(e,null);s=!0},p(t,i){if(2!=i.item.battleType?c?c.p(t,i):((c=Jr()).c(),c.m(n,r)):c&&(c.d(1),c=null),t.attacks||t.rul||t.item){let n;for(u=i.attacks,n=0;n<u.length;n+=1){const r=Xr(i,u,n);p[n]?(p[n].p(t,r),Pn(p[n],1)):(p[n]=li(r),p[n].c(),Pn(p[n],1),p[n].m(e,null))}for(Dn(),n=u.length;n<p.length;n+=1)f(n);qn()}},i(t){if(!s){for(let t=0;t<u.length;t+=1)Pn(p[t]);s=!0}},o(t){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)Rn(p[t]);s=!1},d(t){t&&fn(e),c&&c.d(),dn(p,t)}}}function Jr(t){var e,n,r,i,o,a,s,l,c=Ne.str("mode")+"",u=Ne.str("accuracy")+"",p=Ne.str("cost")+"";return{c(){e=hn("td"),n=mn(c),r=gn(),i=hn("td"),o=mn(u),a=gn(),s=hn("td"),l=mn(p),bn(e,"class","svelte-14kmuch"),bn(i,"class","svelte-14kmuch"),bn(s,"class","svelte-14kmuch")},m(t,c){pn(t,e,c),un(e,n),pn(t,r,c),pn(t,i,c),un(i,o),pn(t,a,c),pn(t,s,c),un(s,l)},p:en,d(t){t&&(fn(e),fn(r),fn(i),fn(a),fn(s))}}}function ti(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m,g,v,y,b,$,k=Ne.str(t.attack.name)+"",w=1==t.attack.shots?"":"×"+t.attack.shots,x=t.attack.accuracy+"",A=t.attack.cost.time+(t.attack.flatTime?"":"%"),S=Ne.str("TU")+"",O=new Pr({props:{bonus:t.attack.accuracyMultiplier}});let T=Object.keys(t.attack.cost),C=[];for(let e=0;e<T.length;e+=1)C[e]=ri(Yr(t,T,e));const _=t=>Rn(C[t],1,1,()=>{C[t]=null});return{c(){e=hn("td"),n=mn(k),r=mn(w),i=gn(),o=hn("td"),a=hn("nobr"),s=hn("em"),l=mn(x),c=hn("small"),u=mn("%"),p=hn("br"),O.$$.fragment.c(),f=gn(),d=hn("td"),h=hn("em"),m=mn(A),g=gn(),v=hn("small"),y=mn(S),b=gn();for(let t=0;t<C.length;t+=1)C[t].c();bn(e,"rowspan","2"),bn(e,"class","svelte-14kmuch"),bn(o,"class","svelte-14kmuch"),bn(d,"class","svelte-14kmuch")},m(t,k){pn(t,e,k),un(e,n),un(e,r),pn(t,i,k),pn(t,o,k),un(o,a),un(a,s),un(s,l),un(a,c),un(c,u),un(c,p),zn(O,c,null),pn(t,f,k),pn(t,d,k),un(d,h),un(h,m),un(d,g),un(d,v),un(v,y),un(d,b);for(let t=0;t<C.length;t+=1)C[t].m(d,null);$=!0},p(t,e){$&&!t.attacks||k===(k=Ne.str(e.attack.name)+"")||$n(n,k),$&&!t.attacks||w===(w=1==e.attack.shots?"":"×"+e.attack.shots)||$n(r,w),$&&!t.attacks||x===(x=e.attack.accuracy+"")||$n(l,x);var i={};if(t.attacks&&(i.bonus=e.attack.accuracyMultiplier),O.$set(i),$&&!t.attacks||A===(A=e.attack.cost.time+(e.attack.flatTime?"":"%"))||$n(m,A),t.attacks||t.rul){let n;for(T=Object.keys(e.attack.cost),n=0;n<T.length;n+=1){const r=Yr(e,T,n);C[n]?(C[n].p(t,r),Pn(C[n],1)):(C[n]=ri(r),C[n].c(),Pn(C[n],1),C[n].m(d,null))}for(Dn(),n=T.length;n<C.length;n+=1)_(n);qn()}},i(t){if(!$){Pn(O.$$.fragment,t);for(let t=0;t<T.length;t+=1)Pn(C[t]);$=!0}},o(t){Rn(O.$$.fragment,t),C=C.filter(Boolean);for(let t=0;t<C.length;t+=1)Rn(C[t]);$=!1},d(t){t&&(fn(e),fn(i),fn(o)),Un(O),t&&(fn(f),fn(d)),dn(C,t)}}}function ei(t){var e,n,r=2!=t.item.battleType&&ii(t);return{c(){r&&r.c(),e=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i),n=!0},p(t,n){2!=n.item.battleType?r?(r.p(t,n),Pn(r,1)):((r=ii(n)).c(),Pn(r,1),r.m(e.parentNode,e)):r&&(Dn(),Rn(r,1,1,()=>{r=null}),qn())},i(t){n||(Pn(r),n=!0)},o(t){Rn(r),n=!1},d(t){r&&r.d(t),t&&fn(e)}}}function ni(t){var e,n,r,i,o,a=Ne.str(t.res)+"",s=new xr({props:{val:t.attack.cost[t.res]}});return{c(){e=hn("br"),s.$$.fragment.c(),n=mn(" "),r=hn("small"),i=mn(a)},m(t,a){pn(t,e,a),zn(s,t,a),pn(t,n,a),pn(t,r,a),un(r,i),o=!0},p(t,e){var n={};t.attacks&&(n.val=e.attack.cost[e.res]),s.$set(n),o&&!t.attacks||a===(a=Ne.str(e.res)+"")||$n(i,a)},i(t){o||(Pn(s.$$.fragment,t),o=!0)},o(t){Rn(s.$$.fragment,t),o=!1},d(t){t&&fn(e),Un(s,t),t&&(fn(n),fn(r))}}}function ri(t){var e,n,r="time"!=t.res&&0!=t.attack.cost[t.res]&&ni(t);return{c(){r&&r.c(),e=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i),n=!0},p(t,n){"time"!=n.res&&0!=n.attack.cost[n.res]?r?(r.p(t,n),Pn(r,1)):((r=ni(n)).c(),Pn(r,1),r.m(e.parentNode,e)):r&&(Dn(),Rn(r,1,1,()=>{r=null}),qn())},i(t){n||(Pn(r),n=!0)},o(t){Rn(r),n=!1},d(t){r&&r.d(t),t&&fn(e)}}}function ii(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h=Ne.str("Shots")+"",m=t.attack.item.clipSize+"",g=Ne.str("Wgt")+"",v=t.attack.item.weight+"",y=new zr({props:{src:Ne.sprite(t.attack.item.sprite),maxWidth:32*t.attack.item.invWidth,maxHeight:32*t.attack.item.invHeight,zoom:"2"}}),b=new Qn({props:{href:t.attack.item.type}});return{c(){e=hn("td"),y.$$.fragment.c(),n=gn(),r=hn("td"),b.$$.fragment.c(),i=hn("br"),o=hn("small"),a=mn(h),s=mn(": "),l=mn(m),c=gn(),u=mn(g),p=mn(":"),f=mn(v),bn(e,"rowspan","2"),bn(e,"class","ammo-img svelte-14kmuch"),bn(r,"colspan","2"),bn(r,"class","svelte-14kmuch")},m(t,h){pn(t,e,h),zn(y,e,null),pn(t,n,h),pn(t,r,h),zn(b,r,null),un(r,i),un(r,o),un(o,a),un(o,s),un(o,l),un(o,c),un(o,u),un(o,p),un(o,f),d=!0},p(t,e){var n={};t.attacks&&(n.src=Ne.sprite(e.attack.item.sprite)),t.attacks&&(n.maxWidth=32*e.attack.item.invWidth),t.attacks&&(n.maxHeight=32*e.attack.item.invHeight),y.$set(n);var r={};t.attacks&&(r.href=e.attack.item.type),b.$set(r),d&&!t.attacks||m===(m=e.attack.item.clipSize+"")||$n(l,m),d&&!t.attacks||v===(v=e.attack.item.weight+"")||$n(f,v)},i(t){d||(Pn(y.$$.fragment,t),Pn(b.$$.fragment,t),d=!0)},o(t){Rn(y.$$.fragment,t),Rn(b.$$.fragment,t),d=!1},d(t){t&&fn(e),Un(y),t&&(fn(n),fn(r)),Un(b)}}}function oi(t){var e,n,r,i,o,a,s,l,c,u,p,f,d=t.attack.pellets>1&&t.attack.damageBonus?"(":"",h=t.attack.damage||"0",m=t.attack.pellets>1&&t.attack.damageBonus?")":"",g=t.attack.pellets>1?" ×"+t.attack.pellets:"",v=new Pr({props:{plus:!0,bonus:t.attack.damageBonus}}),y=new Qn({props:{href:Ne.damageTypes[t.attack.damageType]}});return{c(){e=hn("nobr"),n=mn(d),r=hn("em"),i=mn(h),o=gn(),a=hn("small"),v.$$.fragment.c(),s=mn(m),l=gn(),c=mn(g),u=gn(),p=hn("br"),y.$$.fragment.c()},m(t,d){pn(t,e,d),un(e,n),un(e,r),un(r,i),un(e,o),un(e,a),zn(v,a,null),un(a,s),un(e,l),un(e,c),pn(t,u,d),pn(t,p,d),zn(y,t,d),f=!0},p(t,e){f&&!t.attacks||d===(d=e.attack.pellets>1&&e.attack.damageBonus?"(":"")||$n(n,d),f&&!t.attacks||h===(h=e.attack.damage||"0")||$n(i,h);var r={};t.attacks&&(r.bonus=e.attack.damageBonus),v.$set(r),f&&!t.attacks||m===(m=e.attack.pellets>1&&e.attack.damageBonus?")":"")||$n(s,m),f&&!t.attacks||g===(g=e.attack.pellets>1?" ×"+e.attack.pellets:"")||$n(c,g);var o={};t.attacks&&(o.href=Ne.damageTypes[e.attack.damageType]),y.$set(o)},i(t){f||(Pn(v.$$.fragment,t),Pn(y.$$.fragment,t),f=!0)},o(t){Rn(v.$$.fragment,t),Rn(y.$$.fragment,t),f=!1},d(t){t&&fn(e),Un(v),t&&(fn(u),fn(p)),Un(y,t)}}}function ai(t){var e,n;let r=Object.keys(t.attack.alter).sort(),i=[];for(let e=0;e<r.length;e+=1)i[e]=si(Kr(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.attacks||t.rul){let a;for(r=Object.keys(n.attack.alter).sort(),a=0;a<r.length;a+=1){const o=Kr(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=si(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function si(t){var e,n,r,i,o=Ne.str(t.field)+"",a=new xr({props:{val:t.attack.alter[t.field]}});return{c(){e=mn(o),n=mn(": "),a.$$.fragment.c(),r=hn("br")},m(t,o){pn(t,e,o),pn(t,n,o),zn(a,t,o),pn(t,r,o),i=!0},p(t,n){i&&!t.attacks||o===(o=Ne.str(n.field)+"")||$n(e,o);var r={};t.attacks&&(r.val=n.attack.alter[n.field]),a.$set(r)},i(t){i||(Pn(a.$$.fragment,t),i=!0)},o(t){Rn(a.$$.fragment,t),i=!1},d(t){t&&(fn(e),fn(n)),Un(a,t),t&&fn(r)}}}function li(t){var e,n,r,i,o,a,s,l,c,u,p,f=[ei,ti],d=[];function h(t,e){return"ammo"==e.attack.mode?0:1}n=h(0,t),r=d[n]=f[n](t);var m=("damage"in t.attack||"damageType"in t.attack)&&oi(t),g=t.attack.alter&&ai(t);return{c(){e=hn("tr"),r.c(),i=gn(),o=hn("td"),m&&m.c(),a=gn(),s=hn("tr"),l=hn("td"),c=hn("small"),g&&g.c(),u=gn(),bn(o,"class","svelte-14kmuch"),bn(l,"colspan","3"),wn(l,"columns","1"),bn(l,"class","svelte-14kmuch")},m(t,r){pn(t,e,r),d[n].m(e,null),un(e,i),un(e,o),m&&m.m(o,null),pn(t,a,r),pn(t,s,r),un(s,l),un(l,c),g&&g.m(c,null),un(s,u),p=!0},p(t,a){var s=n;(n=h(0,a))===s?d[n].p(t,a):(Dn(),Rn(d[s],1,1,()=>{d[s]=null}),qn(),(r=d[n])||(r=d[n]=f[n](a)).c(),Pn(r,1),r.m(e,i)),"damage"in a.attack||"damageType"in a.attack?m?(m.p(t,a),Pn(m,1)):((m=oi(a)).c(),Pn(m,1),m.m(o,null)):m&&(Dn(),Rn(m,1,1,()=>{m=null}),qn()),a.attack.alter?g?(g.p(t,a),Pn(g,1)):((g=ai(a)).c(),Pn(g,1),g.m(c,null)):g&&(Dn(),Rn(g,1,1,()=>{g=null}),qn())},i(t){p||(Pn(r),Pn(m),Pn(g),p=!0)},o(t){Rn(r),Rn(m),Rn(g),p=!1},d(t){t&&fn(e),d[n].d(),m&&m.d(),t&&(fn(a),fn(s)),g&&g.d()}}}function ci(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m=Ne.str(t.key)+"",g=[vi,gi,mi,hi,di,fi,pi,ui],v=[];function y(t,e){return(null==o||t.item)&&(o=!!["requiresBuyBaseFunc"].includes(e.key)),o?0:((null==a||t.item)&&(a=!!["manufacture","componentOf"].includes(e.key)),a?1:((null==s||t.item)&&(s=!!["damageBonus","meleeBonus","accuracyMultiplier","meleeMultiplier","closeQuartersMultiplier"].includes(e.key)),s?2:((null==l||t.item)&&(l=!!["damageType","meleeType"].includes(e.key)),l?3:"battleType"==e.key?4:((null==c||t.item)&&(c=!!e.key.includes("Sound")),c?5:((null==u||t.item)&&(u=!!["floorSprite","handSprite"].includes(e.key)),u?6:7)))))}return p=y(null,t),f=v[p]=g[p](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),f.c(),d=gn(),bn(n,"class","svelte-14kmuch"),bn(i,"class","right-column svelte-14kmuch")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=m,un(e,r),un(e,i),v[p].m(i,null),un(e,d),h=!0},p(t,e){h&&!t.item||m===(m=Ne.str(e.key)+"")||(n.innerHTML=m);var r=p;(p=y(t,e))===r?v[p].p(t,e):(Dn(),Rn(v[r],1,1,()=>{v[r]=null}),qn(),(f=v[p])||(f=v[p]=g[p](e)).c(),Pn(f,1),f.m(i,null))},i(t){h||(Pn(f),h=!0)},o(t){Rn(f),h=!1},d(t){t&&fn(e),v[p].d()}}}function ui(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.item&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function pi(t){var e,n,r,i,o,a,s,l=t.prop+"";return{c(){e=hn("a"),n=mn(l),i=gn(),o=hn("img"),wn(e,"vertical-align","top"),bn(e,"href",r=Ne.specialSprite(t.key,t.prop)),bn(o,"class","sprite svelte-14kmuch"),bn(o,"alt",a=t.prop),bn(o,"src",s=Ne.specialSprite(t.key,t.prop))},m(t,r){pn(t,e,r),un(e,n),pn(t,i,r),pn(t,o,r)},p(t,i){t.item&&l!==(l=i.prop+"")&&$n(n,l),t.item&&r!==(r=Ne.specialSprite(i.key,i.prop))&&bn(e,"href",r),t.item&&a!==(a=i.prop)&&bn(o,"alt",a),t.item&&s!==(s=Ne.specialSprite(i.key,i.prop))&&bn(o,"src",s)},i:en,o:en,d(t){t&&(fn(e),fn(i),fn(o))}}}function fi(t){var e;let n=wi(t.prop),r=[];for(let e=0;e<n.length;e+=1)r[e]=yi(Ur(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=vn()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);pn(t,e,n)},p(t,i){if(t.soundsFrom||t.item){let o;for(n=wi(i.prop),o=0;o<n.length;o+=1){const a=Ur(i,n,o);r[o]?r[o].p(t,a):(r[o]=yi(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:en,o:en,d(t){dn(r,t),t&&fn(e)}}}function di(t){var e,n,r,i=t.prop+"",o=Ne.str(Ne.battleTypes[t.prop])+"";return{c(){e=mn(i),n=mn(": "),r=mn(o)},m(t,i){pn(t,e,i),pn(t,n,i),pn(t,r,i)},p(t,n){t.item&&i!==(i=n.prop+"")&&$n(e,i),t.item&&o!==(o=Ne.str(Ne.battleTypes[n.prop])+"")&&$n(r,o)},i:en,o:en,d(t){t&&(fn(e),fn(n),fn(r))}}}function hi(t){var e,n=Ne.damageTypeName(t.prop)+"";return{c(){e=mn(n)},m(t,n){pn(t,e,n)},p(t,r){t.item&&n!==(n=Ne.damageTypeName(r.prop)+"")&&$n(e,n)},i:en,o:en,d(t){t&&fn(e)}}}function mi(t){var e,n=new Pr({props:{bonus:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.item&&(r.bonus=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function gi(t){var e,n;let r=Object.keys(t.prop),i=[];for(let e=0;e<r.length;e+=1)i[e]=bi(Gr(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","number-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.item){let a;for(r=Object.keys(n.prop),a=0;a<r.length;a+=1){const o=Gr(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=bi(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}function vi(t){var e,n=new Cr({props:{items:t.prop,vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.item&&(r.items=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function yi(t){var e,n,r,i,o,a=t.i>0?"<br/>":"";return{c(){n=gn(),r=hn("audio"),i=mn("Audio tag not working"),e=new xn(a,n),r.controls=!0,bn(r,"src",o=t.sound)},m(t,o){e.m(t,o),pn(t,n,o),pn(t,r,o),un(r,i)},p(t,e){t.item&&o!==(o=e.sound)&&bn(r,"src",o)},d(t){t&&(e.d(),fn(n),fn(r))}}}function bi(t){var e,n,r,i,o,a,s=t.prop[t.field]+"",l=new Qn({props:{href:t.field}});return{c(){e=hn("tr"),n=hn("td"),r=hn("em"),i=mn(s),o=hn("td"),l.$$.fragment.c(),bn(n,"class","svelte-14kmuch"),bn(o,"class","svelte-14kmuch")},m(t,s){pn(t,e,s),un(e,n),un(n,r),un(r,i),un(e,o),zn(l,o,null),a=!0},p(t,e){a&&!t.item||s===(s=e.prop[e.field]+"")||$n(i,s);var n={};t.item&&(n.href=e.field),l.$set(n)},i(t){a||(Pn(l.$$.fragment,t),a=!0)},o(t){Rn(l.$$.fragment,t),a=!1},d(t){t&&fn(e),Un(l)}}}function $i(t){var e,n,r=!["sprite","type","_attacks","damageAlter"].includes(t.key),i=r&&ci(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.item&&(r=!["sprite","type","_attacks","damageAlter"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=ci(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function ki(t){var e,n,r,i,o,a,s,l=(t.item.sprite&&"Resources/Blanks/Blank.png"!=t.item.sprite||t.attacks.length>0)&&Zr(t);let c=Object.entries(t.item).sort(xi),u=[];for(let e=0;e<c.length;e+=1)u[e]=$i(Vr(t,c,e));const p=t=>Rn(u[t],1,1,()=>{u[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(t.title),i=gn(),l&&l.c(),o=gn();for(let t=0;t<u.length;t+=1)u[t].c();a=vn(),bn(n,"colspan","2"),bn(n,"class","table-header svelte-14kmuch")},m(t,c){pn(t,e,c),un(e,n),un(n,r),pn(t,i,c),l&&l.m(t,c),pn(t,o,c);for(let e=0;e<u.length;e+=1)u[e].m(t,c);pn(t,a,c),s=!0},p(t,e){if(s&&!t.title||$n(r,e.title),e.item.sprite&&"Resources/Blanks/Blank.png"!=e.item.sprite||e.attacks.length>0?l?(l.p(t,e),Pn(l,1)):((l=Zr(e)).c(),Pn(l,1),l.m(o.parentNode,o)):l&&(Dn(),Rn(l,1,1,()=>{l=null}),qn()),t.item||t.rul||t.soundsFrom){let n;for(c=Object.entries(e.item).sort(xi),n=0;n<c.length;n+=1){const r=Vr(e,c,n);u[n]?(u[n].p(t,r),Pn(u[n],1)):(u[n]=$i(r),u[n].c(),Pn(u[n],1),u[n].m(a.parentNode,a))}for(Dn(),n=c.length;n<u.length;n+=1)p(n);qn()}},i(t){if(!s){Pn(l);for(let t=0;t<c.length;t+=1)Pn(u[t]);s=!0}},o(t){Rn(l),u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Rn(u[t]);s=!1},d(t){t&&(fn(e),fn(i)),l&&l.d(t),t&&fn(o),dn(u,t),t&&fn(a)}}}function wi(t){return t?(t.length||(t=[t]),t.map(t=>Ne.path+Ne.sounds[t]).filter(t=>t)):[]}const xi=(t,e)=>t[0]>e[0]?1:-1;function Ai(t,e,n){let r,{item:i,title:o=Ne.str("Item")}=e;return console.info(i),t.$set=(t=>{"item"in t&&n("item",i=t.item),"title"in t&&n("title",o=t.title)}),t.$$.update=((t={item:1,attacks:1})=>{if(t.item||t.attacks){if(n("attacks",r=i.attacks().slice()),i.compatibleAmmo)for(let t of i.compatibleAmmo){let e=Ne.items[t],n=e.attacks()[0];n.item=e,r.push(n)}console.info(r)}}),{item:i,title:o,attacks:r}}class Si extends Vn{constructor(t){super(),Gn(this,t,Ai,ki,ln,["item","title"])}}function Oi(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Ti(t,e,n){const r=Object.create(t);return r.res=e[n],r.i=n,r}function Ci(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function _i(t,e,n){const r=Object.create(t);return r.subfield=e[n],r.j=n,r}function ji(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.val=e[n][1],r.i=n,r}function Mi(t,e,n){const r=Object.create(t);return r.prop=e[n],r}function Ii(t,e,n){const r=Object.create(t);return r.url=e[n],r.j=n,r}function Ei(t,e,n){const r=Object.create(t);return r.body=e[n],r.i=n,r}function Ni(t){var e,n,r,i,o,a=Ne.str("see also")+"",s=new dr({props:{items:t.seeAlso}});return{c(){e=hn("span"),n=mn("- "),r=mn(a),i=gn(),s.$$.fragment.c(),wn(e,"color","white")},m(t,a){pn(t,e,a),un(e,n),un(e,r),pn(t,i,a),zn(s,t,a),o=!0},p(t,e){var n={};t.seeAlso&&(n.items=e.seeAlso),s.$set(n)},i(t){o||(Pn(s.$$.fragment,t),o=!0)},o(t){Rn(s.$$.fragment,t),o=!1},d(t){t&&(fn(e),fn(i)),Un(s,t)}}}function Li(t){var e,n,r,i,o,a,s=t.seeAllVariants?Ne.str("Hide"):Ne.str("Show")+"",l=Ne.str("all variants")+"";return{c(){e=hn("p"),n=hn("button"),r=mn(s),i=gn(),o=mn(l),bn(n,"class","btn-hover-effect btn-hover-effect--effect-1"),a=yn(n,"click",t.click_handler)},m(t,a){pn(t,e,a),un(e,n),un(n,r),un(n,i),un(n,o)},p(t,e){t.seeAllVariants&&s!==(s=e.seeAllVariants?Ne.str("Hide"):Ne.str("Show")+"")&&$n(r,s)},d(t){t&&fn(e),a()}}}function Fi(t){var e,n,r;let i=Object.keys(t.armor.dollSprites).sort(t.func),o=[];for(let e=0;e<i.length;e+=1)o[e]=qi(Ei(t,i,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=gn(),bn(n=hn("div"),"style",r="height:"+(t.seeAllVariants?120*(Math.floor(Object.keys(t.armor.dollSprites).length/oo)+1):120)+"px")},m(t,r){for(let e=0;e<o.length;e+=1)o[e].m(t,r);pn(t,e,r),pn(t,n,r)},p(t,a){if(t.seeAllVariants||t.dollColumns||t.armor||t.rul){let n;for(i=Object.keys(a.armor.dollSprites).sort(a.func),n=0;n<i.length;n+=1){const r=Ei(a,i,n);o[n]?o[n].p(t,r):(o[n]=qi(r),o[n].c(),o[n].m(e.parentNode,e))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}(t.seeAllVariants||t.armor)&&r!==(r="height:"+(a.seeAllVariants?120*(Math.floor(Object.keys(a.armor.dollSprites).length/oo)+1):120)+"px")&&bn(n,"style",r)},d(t){dn(o,t),t&&(fn(e),fn(n))}}}function Bi(t){var e,n,r=t.seeAllVariants&&Hi(t);let i=t.armor.dollSprites[t.body],o=[];for(let e=0;e<i.length;e+=1)o[e]=Di(Ii(t,i,e));return{c(){e=hn("div"),r&&r.c(),n=gn();for(let t=0;t<o.length;t+=1)o[t].c();bn(e,"class","armor"),wn(e,"left",t.i%oo*80+"px"),wn(e,"top",120*Math.floor(t.i/oo)+"px")},m(t,i){pn(t,e,i),r&&r.m(e,null),un(e,n);for(let t=0;t<o.length;t+=1)o[t].m(e,null)},p(t,a){if(a.seeAllVariants?r?r.p(t,a):((r=Hi(a)).c(),r.m(e,n)):r&&(r.d(1),r=null),t.armor||t.rul){let n;for(i=a.armor.dollSprites[a.body],n=0;n<i.length;n+=1){const r=Ii(a,i,n);o[n]?o[n].p(t,r):(o[n]=Di(r),o[n].c(),o[n].m(e,null))}for(;n<o.length;n+=1)o[n].d(1);o.length=i.length}},d(t){t&&fn(e),r&&r.d(),dn(o,t)}}}function Hi(t){var e,n,r=t.body+"";return{c(){e=hn("div"),n=mn(r),bn(e,"class","armor-variant")},m(t,r){pn(t,e,r),un(e,n)},p(t,e){t.armor&&r!==(r=e.body+"")&&$n(n,r)},d(t){t&&fn(e)}}}function Di(t){var e,n,r;return{c(){bn(e=hn("img"),"src",n=t.url),bn(e,"alt",r=t.body),bn(e,"class","armor-layer")},m(t,n){pn(t,e,n)},p(t,i){t.armor&&n!==(n=i.url)&&bn(e,"src",n),t.armor&&r!==(r=i.body)&&bn(e,"alt",r)},d(t){t&&fn(e)}}}function qi(t){var e,n=(t.seeAllVariants||0==t.i)&&Bi(t);return{c(){n&&n.c(),e=vn()},m(t,r){n&&n.m(t,r),pn(t,e,r)},p(t,r){r.seeAllVariants||0==r.i?n?n.p(t,r):((n=Bi(r)).c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&fn(e)}}}function Pi(t){var e,n,r,i,o,a,s,l=Ne.str(t.prop)+"";let c=Object.entries(t.armor[t.prop]).sort(t.func_1),u=[];for(let e=0;e<c.length;e+=1)u[e]=Vi(ji(t,c,e));const p=t=>Rn(u[t],1,1,()=>{u[t]=null});return{c(){e=hn("table"),n=hn("thead"),r=hn("tr"),i=hn("td"),o=gn();for(let t=0;t<u.length;t+=1)u[t].c();a=gn(),bn(i,"colspan","2"),bn(i,"class","number-table-header"),wn(i,"text-align","center"),bn(e,"class","number-table armor-column")},m(t,c){pn(t,e,c),un(e,n),un(n,r),un(r,i),i.innerHTML=l,un(e,o);for(let t=0;t<u.length;t+=1)u[t].m(e,null);un(e,a),s=!0},p(t,n){if(t.armor||t.rul){let r;for(c=Object.entries(n.armor[n.prop]).sort(n.func_1),r=0;r<c.length;r+=1){const i=ji(n,c,r);u[r]?(u[r].p(t,i),Pn(u[r],1)):(u[r]=Vi(i),u[r].c(),Pn(u[r],1),u[r].m(e,a))}for(Dn(),r=c.length;r<u.length;r+=1)p(r);qn()}},i(t){if(!s){for(let t=0;t<c.length;t+=1)Pn(u[t]);s=!0}},o(t){u=u.filter(Boolean);for(let t=0;t<u.length;t+=1)Rn(u[t]);s=!1},d(t){t&&fn(e),dn(u,t)}}}function Ri(t){var e,n,r=Ne.str(t.key)+"";return{c(){e=hn("nobr"),n=mn(r)},m(t,r){pn(t,e,r),un(e,n)},p(t,e){t.armor&&r!==(r=Ne.str(e.key)+"")&&$n(n,r)},i:en,o:en,d(t){t&&fn(e)}}}function Wi(t){var e,n=new Qn({props:{href:Ne.damageTypes[t.key]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.armor&&(r.href=Ne.damageTypes[e.key]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function zi(t){var e,n="damageModifier"==t.prop?Math.floor(100*t.val):Ne.str(t.val)+"";return{c(){e=hn("em")},m(t,r){pn(t,e,r),e.innerHTML=n},p(t,r){t.armor&&n!==(n="damageModifier"==r.prop?Math.floor(100*r.val):Ne.str(r.val)+"")&&(e.innerHTML=n)},d(t){t&&fn(e)}}}function Ui(t){var e;let n=Object.keys(t.val),r=[];for(let e=0;e<n.length;e+=1)r[e]=Gi(_i(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=vn()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);pn(t,e,n)},p(t,i){if(t.rul||t.armor){let o;for(n=Object.keys(i.val),o=0;o<n.length;o+=1){const a=_i(i,n,o);r[o]?r[o].p(t,a):(r[o]=Gi(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){dn(r,t),t&&fn(e)}}}function Gi(t){var e,n,r,i,o,a=Ne.str(t.subfield)+"",s=Ne.str(t.val[t.subfield])+"",l=0!=t.j&&{c(){o=hn("br")},m(t,e){pn(t,o,e)},d(t){t&&fn(o)}};return{c(){l&&l.c(),e=gn(),r=mn("\r\n                        :\r\n                        "),i=hn("em"),n=new xn(a,r)},m(t,o){l&&l.m(t,o),pn(t,e,o),n.m(t,o),pn(t,r,o),pn(t,i,o),i.innerHTML=s},p(t,e){t.armor&&a!==(a=Ne.str(e.subfield)+"")&&n.p(a),t.armor&&s!==(s=Ne.str(e.val[e.subfield])+"")&&(i.innerHTML=s)},d(t){l&&l.d(t),t&&(fn(e),n.d(),fn(r),fn(i))}}}function Vi(t){var e,n,r,i,o,a,s,l=[Wi,Ri],c=[];r=function(t,e){return"damageModifier"==e.prop?0:1}(0,t),i=c[r]=l[r](t);var u=function(t,e){return"recovery"==e.prop?Ui:zi}(0,t)(t);return{c(){e=hn("tr"),n=hn("td"),i.c(),o=gn(),a=hn("td"),u.c()},m(t,i){pn(t,e,i),un(e,n),c[r].m(n,null),un(e,o),un(e,a),u.m(a,null),s=!0},p(t,e){i.p(t,e),u.p(t,e)},i(t){s||(Pn(i),s=!0)},o(t){Rn(i),s=!1},d(t){t&&fn(e),c[r].d(),u.d()}}}function Ki(t){var e,n,r=t.armor[t.prop]&&Pi(t);return{c(){r&&r.c(),e=vn()},m(t,i){r&&r.m(t,i),pn(t,e,i),n=!0},p(t,n){n.armor[n.prop]?r?(r.p(t,n),Pn(r,1)):((r=Pi(n)).c(),Pn(r,1),r.m(e.parentNode,e)):r&&(Dn(),Rn(r,1,1,()=>{r=null}),qn())},i(t){n||(Pn(r),n=!0)},o(t){Rn(r),n=!1},d(t){r&&r.d(t),t&&fn(e)}}}function Yi(t){var e,n,r,i,o,a,s,l,c,u,p=Ne.str(t.key)+"",f=[to,Ji,Qi,Zi,Xi],d=[];function h(t,e){return"damageModifier"==e.key?0:((null==o||t.armor)&&(o=!!["corpseBattle"].includes(e.key)),o?1:"spriteSheet"==e.key?2:((null==a||t.armor)&&(a=!!["builtInWeapons","users","units"].includes(e.key)),a?3:4))}return s=h(null,t),l=d[s]=f[s](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),l.c(),c=gn()},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=p,un(e,r),un(e,i),d[s].m(i,null),un(e,c),u=!0},p(t,e){u&&!t.armor||p===(p=Ne.str(e.key)+"")||(n.innerHTML=p);var r=s;(s=h(t,e))===r?d[s].p(t,e):(Dn(),Rn(d[r],1,1,()=>{d[r]=null}),qn(),(l=d[s])||(l=d[s]=f[s](e)).c(),Pn(l,1),l.m(i,null))},i(t){u||(Pn(l),u=!0)},o(t){Rn(l),u=!1},d(t){t&&fn(e),d[s].d()}}}function Xi(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.armor&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Zi(t){var e,n;let r=t.prop.filter(so),i=[];for(let e=0;e<r.length;e+=1)i[e]=eo(Oi(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.armor){let a;for(r=n.prop.filter(so),a=0;a<r.length;a+=1){const o=Oi(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=eo(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function Qi(t){var e,n,r,i=t.prop+"";return{c(){e=hn("a"),n=mn(i),bn(e,"href",r=Ne.sprite(t.prop))},m(t,r){pn(t,e,r),un(e,n)},p(t,o){t.armor&&i!==(i=o.prop+"")&&$n(n,i),t.armor&&r!==(r=Ne.sprite(o.prop))&&bn(e,"href",r)},i:en,o:en,d(t){t&&fn(e)}}}function Ji(t){var e,n=new Qn({props:{href:t.prop[0]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.armor&&(r.href=e.prop[0]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function to(t){var e;let n=t.prop,r=[];for(let e=0;e<n.length;e+=1)r[e]=no(Ti(t,n,e));return{c(){e=hn("table");for(let t=0;t<r.length;t+=1)r[t].c();bn(e,"class","number-table")},m(t,n){pn(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(t.armor||t.rul){let o;for(n=i.prop,o=0;o<n.length;o+=1){const a=Ti(i,n,o);r[o]?r[o].p(t,a):(r[o]=no(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:en,o:en,d(t){t&&fn(e),dn(r,t)}}}function eo(t){var e,n,r=0!=t.i&&function(t){var e;return{c(){e=mn(",")},m(t,n){pn(t,e,n)},d(t){t&&fn(e)}}}(),i=new Qn({props:{href:t.field}});return{c(){r&&r.c(),e=gn(),i.$$.fragment.c()},m(t,o){r&&r.m(t,o),pn(t,e,o),zn(i,t,o),n=!0},p(t,e){var n={};t.armor&&(n.href=e.field),i.$set(n)},i(t){n||(Pn(i.$$.fragment,t),n=!0)},o(t){Rn(i.$$.fragment,t),n=!1},d(t){r&&r.d(t),t&&fn(e),Un(i,t)}}}function no(t){var e,n,r,i,o,a,s,l,c=Ne.damageTypeName(t.i)+"",u=Math.round(100*t.res)+"";return{c(){e=hn("tr"),n=hn("td"),r=mn(c),i=gn(),o=hn("td"),a=mn(u),s=mn("%"),l=gn(),bn(n,"width","50%"),bn(n,"class","number-table1"),bn(o,"width","50%"),bn(o,"class","number-table2")},m(t,c){pn(t,e,c),un(e,n),un(n,r),un(e,i),un(e,o),un(o,a),un(o,s),un(e,l)},p(t,e){t.armor&&u!==(u=Math.round(100*e.res)+"")&&$n(a,u)},d(t){t&&fn(e)}}}function ro(t){var e,n,r=!["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","scripts","armor","damageModifier","stats"].includes(t.key),i=r&&Yi(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.armor&&(r=!["recovery","type","layersDefinition","spriteFaceColor","spriteHairColor","spriteUtileColor","spriteFaceGroup","spriteHairGroup","spriteUtileGroup","customArmorPreviewIndex","dollSprites","layersDefaultPrefix","frontArmor","sideArmor","rearArmor","underArmor","spriteInv","scripts","armor","damageModifier","stats"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=Yi(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function io(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m,g,v=Ne.str("Armor")+"",y=Object.keys(t.armor.dollSprites).length>1,b=t.seeAlso.length>0&&Ni(t),$=y&&Li(t),k=t.armor.dollSprites&&Fi(t);let w=["armor","damageModifier","stats","recovery"],x=[];for(let e=0;e<4;e+=1)x[e]=Ki(Mi(t,w,e));const A=t=>Rn(x[t],1,1,()=>{x[t]=null});let S=Object.entries(t.armor).sort(ao),O=[];for(let e=0;e<S.length;e+=1)O[e]=ro(Ci(t,S,e));const T=t=>Rn(O[t],1,1,()=>{O[t]=null});return{c(){e=hn("table"),n=hn("tr"),r=hn("td"),i=mn(v),o=gn(),b&&b.c(),a=gn(),s=hn("tr"),l=hn("td"),c=hn("div"),$&&$.c(),u=gn(),k&&k.c(),p=gn(),f=hn("tr"),d=hn("td"),h=hn("div");for(let t=0;t<4;t+=1)x[t].c();m=gn();for(let t=0;t<O.length;t+=1)O[t].c();bn(r,"colspan","2"),bn(r,"class","table-header"),bn(c,"class","armors"),bn(l,"colspan","2"),bn(h,"class","flex-horisontal"),bn(d,"colspan","2"),bn(e,"class","main-table")},m(t,v){pn(t,e,v),un(e,n),un(n,r),un(r,i),un(r,o),b&&b.m(r,null),un(e,a),un(e,s),un(s,l),un(l,c),$&&$.m(c,null),un(c,u),k&&k.m(c,null),un(e,p),un(e,f),un(f,d),un(d,h);for(let t=0;t<4;t+=1)x[t].m(h,null);un(e,m);for(let t=0;t<O.length;t+=1)O[t].m(e,null);g=!0},p(t,n){if(n.seeAlso.length>0?b?(b.p(t,n),Pn(b,1)):((b=Ni(n)).c(),Pn(b,1),b.m(r,null)):b&&(Dn(),Rn(b,1,1,()=>{b=null}),qn()),t.armor&&(y=Object.keys(n.armor.dollSprites).length>1),y?$?$.p(t,n):(($=Li(n)).c(),$.m(c,u)):$&&($.d(1),$=null),n.armor.dollSprites?k?k.p(t,n):((k=Fi(n)).c(),k.m(c,null)):k&&(k.d(1),k=null),t.armor||t.rul){let e;for(w=["armor","damageModifier","stats","recovery"],e=0;e<w.length;e+=1){const r=Mi(n,w,e);x[e]?(x[e].p(t,r),Pn(x[e],1)):(x[e]=Ki(r),x[e].c(),Pn(x[e],1),x[e].m(h,null))}for(Dn(),e=w.length;e<4;e+=1)A(e);qn()}if(t.armor||t.rul){let r;for(S=Object.entries(n.armor).sort(ao),r=0;r<S.length;r+=1){const i=Ci(n,S,r);O[r]?(O[r].p(t,i),Pn(O[r],1)):(O[r]=ro(i),O[r].c(),Pn(O[r],1),O[r].m(e,null))}for(Dn(),r=S.length;r<O.length;r+=1)T(r);qn()}},i(t){if(!g){Pn(b);for(let t=0;t<4;t+=1)Pn(x[t]);for(let t=0;t<S.length;t+=1)Pn(O[t]);g=!0}},o(t){Rn(b),x=x.filter(Boolean);for(let t=0;t<4;t+=1)Rn(x[t]);O=O.filter(Boolean);for(let t=0;t<O.length;t+=1)Rn(O[t]);g=!1},d(t){t&&fn(e),b&&b.d(),$&&$.d(),k&&k.d(),dn(x,t),dn(O,t)}}}let oo=6;const ao=(t,e)=>t[0]>e[0]?1:-1,so=t=>"INV_NULL"!=t.substr(0,8);function lo(t,e,n){let{armor:r}=e,i=!1,o=[];return t.$set=(t=>{"armor"in t&&n("armor",r=t.armor)}),t.$$.update=((t={armor:1,seeAlso:1})=>{if((t.armor||t.seeAlso)&&(console.log(r),n("seeAlso",o=[]),"storeItem"in r&&"STR_NONE"!=r.storeItem&&o.push(r.storeItem),"users"in r))for(let t of r.users.filter(t=>"INV_NULL"!=t.substr(0,8)&&t!=r.type&&"#"+t!=window.location.hash))o.push(t)}),{armor:r,seeAllVariants:i,seeAlso:o,click_handler:t=>n("seeAllVariants",i=!i),func:(t,e)=>Ne.bodiesCompare([t,e]),func_1:(t,e)=>Ne.str(t[0])>Ne.str(e[0])?1:-1}}class co extends Vn{constructor(t){super(),Gn(this,t,lo,io,ln,["armor"])}}function uo(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function po(t){var e,n,r,i,o,a,s,l,c,u,p,f=Ne.str(t.key)+"",d=[go,mo,ho,fo],h=[];function m(t,e){return(null==o||t.craft)&&(o=!!["weaponStrings"].includes(e.key)),o?0:((null==a||t.craft)&&(a=!!["sprite"].includes(e.key)),a?1:((null==s||t.craft)&&(s=!!["requiresBaseFunc"].includes(e.key)),s?2:3))}return l=m(null,t),c=h[l]=d[l](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),c.c(),u=gn(),bn(n,"class","padding-right")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=f,un(e,r),un(e,i),h[l].m(i,null),un(e,u),p=!0},p(t,e){p&&!t.craft||f===(f=Ne.str(e.key)+"")||(n.innerHTML=f);var r=l;(l=m(t,e))===r?h[l].p(t,e):(Dn(),Rn(h[r],1,1,()=>{h[r]=null}),qn(),(c=h[l])||(c=h[l]=d[l](e)).c(),Pn(c,1),c.m(i,null))},i(t){p||(Pn(c),p=!0)},o(t){Rn(c),p=!1},d(t){t&&fn(e),h[l].d()}}}function fo(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.craft&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ho(t){var e,n=new Cr({props:{items:t.prop,vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.craft&&(r.items=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function mo(t){var e,n;return{c(){bn(e=hn("img"),"class","sprite"),bn(e,"alt","X"),bn(e,"src",n=Ne.specialSprite("baseSprite",1*t.prop+33))},m(t,n){pn(t,e,n)},p(t,r){t.craft&&n!==(n=Ne.specialSprite("baseSprite",1*r.prop+33))&&bn(e,"src",n)},i:en,o:en,d(t){t&&fn(e)}}}function go(t){var e,n=new xr({props:{val:t.prop.map(t.func_1)}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.craft&&(r.val=e.prop.map(e.func_1)),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function vo(t){var e,n,r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t.key),i=r&&po(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.craft&&(r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=po(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function yo(t){var e,n,r,i;let o=Object.entries(t.craft).sort(bo),a=[];for(let e=0;e<o.length;e+=1)a[e]=vo(uo(t,o,e));const s=t=>Rn(a[t],1,1,()=>{a[t]=null});return{c(){e=hn("table"),(n=hn("tr")).innerHTML='<td colspan="2" class="table-header">Craft</td>',r=gn();for(let t=0;t<a.length;t+=1)a[t].c();bn(e,"class","main-table")},m(t,o){pn(t,e,o),un(e,n),un(e,r);for(let t=0;t<a.length;t+=1)a[t].m(e,null);i=!0},p(t,n){if(t.craft||t.rul){let r;for(o=Object.entries(n.craft).sort(bo),r=0;r<o.length;r+=1){const i=uo(n,o,r);a[r]?(a[r].p(t,i),Pn(a[r],1)):(a[r]=vo(i),a[r].c(),Pn(a[r],1),a[r].m(e,null))}for(Dn(),r=o.length;r<a.length;r+=1)s(r);qn()}},i(t){if(!i){for(let t=0;t<o.length;t+=1)Pn(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)Rn(a[t]);i=!1},d(t){t&&fn(e),dn(a,t)}}}const bo=(t,e)=>t[0]>e[0]?1:-1;function $o(t,e,n){let{craft:r}=e;return t.$set=(t=>{"craft"in t&&n("craft",r=t.craft)}),t.$$.update=((t={craft:1})=>{t.craft&&console.info(r)}),{craft:r,func_1:t=>Ne.str(t).replace(">{ALT}{0}","")}}class ko extends Vn{constructor(t){super(),Gn(this,t,$o,yo,ln,["craft"])}}function wo(t,e,n){const r=Object.create(t);return r.prop=e[n],r}function xo(t){var e,n,r,i,o,a,s=Ne.str(t.prop[0])+"",l=new xr({props:{val:t.prop[1]}});return{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),l.$$.fragment.c(),o=gn(),bn(n,"class","padding-right svelte-8df2j8"),bn(i,"class","svelte-8df2j8")},m(t,c){pn(t,e,c),un(e,n),n.innerHTML=s,un(e,r),un(e,i),zn(l,i,null),un(e,o),a=!0},p(t,e){a&&!t.weapon||s===(s=Ne.str(e.prop[0])+"")||(n.innerHTML=s);var r={};t.weapon&&(r.val=e.prop[1]),l.$set(r)},i(t){a||(Pn(l.$$.fragment,t),a=!0)},o(t){Rn(l.$$.fragment,t),a=!1},d(t){t&&fn(e),Un(l)}}}function Ao(t){var e,n,r=!["type"].includes(t.prop[0]),i=r&&xo(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.weapon&&(r=!["type"].includes(n.prop[0])),r?i?(i.p(t,n),Pn(i,1)):((i=xo(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function So(t){var e,n=new Si({props:{item:Ne.items[t.weapon.launcher],title:Ne.str("Launcher")+": "+Ne.str(t.weapon.launcher)}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.weapon&&(r.item=Ne.items[e.weapon.launcher]),t.weapon&&(r.title=Ne.str("Launcher")+": "+Ne.str(e.weapon.launcher)),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Oo(t){var e,n=new Si({props:{item:Ne.items[t.weapon.clip],title:Ne.str("Clip")+": "+Ne.str(t.weapon.clip)}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.weapon&&(r.item=Ne.items[e.weapon.clip]),t.weapon&&(r.title=Ne.str("Clip")+": "+Ne.str(e.weapon.clip)),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function To(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h=Ne.str("Weapon")+"";let m=Object.entries(t.weapon).sort(Co),g=[];for(let e=0;e<m.length;e+=1)g[e]=Ao(wo(t,m,e));const v=t=>Rn(g[t],1,1,()=>{g[t]=null});var y=t.weapon.launcher&&So(t),b=t.weapon.clip&&Oo(t);return{c(){e=hn("table"),n=hn("tr"),r=hn("td"),i=hn("table"),o=hn("tr"),a=hn("td"),s=mn(h),l=gn();for(let t=0;t<g.length;t+=1)g[t].c();c=gn(),u=hn("td"),p=hn("table"),y&&y.c(),f=gn(),b&&b.c(),bn(a,"colspan","2"),bn(a,"class","table-header svelte-8df2j8"),bn(i,"class","main-table"),bn(r,"class","svelte-8df2j8"),bn(p,"class","main-table"),bn(u,"class","svelte-8df2j8"),bn(e,"class","panels3 svelte-8df2j8")},m(t,h){pn(t,e,h),un(e,n),un(n,r),un(r,i),un(i,o),un(o,a),un(a,s),un(i,l);for(let t=0;t<g.length;t+=1)g[t].m(i,null);un(n,c),un(n,u),un(u,p),y&&y.m(p,null),un(p,f),b&&b.m(p,null),d=!0},p(t,e){if(t.weapon||t.rul){let n;for(m=Object.entries(e.weapon).sort(Co),n=0;n<m.length;n+=1){const r=wo(e,m,n);g[n]?(g[n].p(t,r),Pn(g[n],1)):(g[n]=Ao(r),g[n].c(),Pn(g[n],1),g[n].m(i,null))}for(Dn(),n=m.length;n<g.length;n+=1)v(n);qn()}e.weapon.launcher?y?(y.p(t,e),Pn(y,1)):((y=So(e)).c(),Pn(y,1),y.m(p,f)):y&&(Dn(),Rn(y,1,1,()=>{y=null}),qn()),e.weapon.clip?b?(b.p(t,e),Pn(b,1)):((b=Oo(e)).c(),Pn(b,1),b.m(p,null)):b&&(Dn(),Rn(b,1,1,()=>{b=null}),qn())},i(t){if(!d){for(let t=0;t<m.length;t+=1)Pn(g[t]);Pn(y),Pn(b),d=!0}},o(t){g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)Rn(g[t]);Rn(y),Rn(b),d=!1},d(t){t&&fn(e),dn(g,t),y&&y.d(),b&&b.d()}}}const Co=(t,e)=>t[0]>e[0]?1:-1;function _o(t,e,n){let{weapon:r}=e;return t.$set=(t=>{"weapon"in t&&n("weapon",r=t.weapon)}),t.$$.update=((t={weapon:1})=>{t.weapon&&console.log(r)}),{weapon:r}}class jo extends Vn{constructor(t){super(),Gn(this,t,_o,To,ln,["weapon"])}}function Mo(t,e,n){const r=Object.create(t);return r.field=e[n],r.j=n,r}function Io(t,e,n){const r=Object.create(t);return r.set=e[n],r.i=n,r}function Eo(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function No(t){var e,n,r,i,o,a,s,l,c,u=Ne.decamelize(t.key)+"",p=[Fo,Lo],f=[];function d(t,e){return(null==o||t.unit)&&(o=!!["builtInWeaponSets"].includes(e.prop[0])),o?0:1}return a=d(null,t),s=f[a]=p[a](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),s.c(),l=gn(),bn(n,"class","padding-right")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=u,un(e,r),un(e,i),f[a].m(i,null),un(e,l),c=!0},p(t,e){c&&!t.unit||u===(u=Ne.decamelize(e.key)+"")||(n.innerHTML=u);var r=a;(a=d(t,e))===r?f[a].p(t,e):(Dn(),Rn(f[r],1,1,()=>{f[r]=null}),qn(),(s=f[a])||(s=f[a]=p[a](e)).c(),Pn(s,1),s.m(i,null))},i(t){c||(Pn(s),c=!0)},o(t){Rn(s),c=!1},d(t){t&&fn(e),f[a].d()}}}function Lo(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.unit&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Fo(t){var e,n;let r=Object.values(t.prop),i=[];for(let e=0;e<r.length;e+=1)i[e]=Ho(Io(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.unit){let a;for(r=Object.values(n.prop),a=0;a<r.length;a+=1){const o=Io(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=Ho(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function Bo(t){var e,n,r=0!=t.j&&function(t){var e;return{c(){e=mn(",")},m(t,n){pn(t,e,n)},d(t){t&&fn(e)}}}(),i=new Qn({props:{href:t.field}});return{c(){r&&r.c(),e=gn(),i.$$.fragment.c()},m(t,o){r&&r.m(t,o),pn(t,e,o),zn(i,t,o),n=!0},p(t,e){var n={};t.unit&&(n.href=e.field),i.$set(n)},i(t){n||(Pn(i.$$.fragment,t),n=!0)},o(t){Rn(i.$$.fragment,t),n=!1},d(t){r&&r.d(t),t&&fn(e),Un(i,t)}}}function Ho(t){var e,n,r,i,o=0!=t.i&&{c(){i=hn("br")},m(t,e){pn(t,i,e)},d(t){t&&fn(i)}};let a=t.set,s=[];for(let e=0;e<a.length;e+=1)s[e]=Bo(Mo(t,a,e));const l=t=>Rn(s[t],1,1,()=>{s[t]=null});return{c(){o&&o.c(),e=gn();for(let t=0;t<s.length;t+=1)s[t].c();n=vn()},m(t,i){o&&o.m(t,i),pn(t,e,i);for(let e=0;e<s.length;e+=1)s[e].m(t,i);pn(t,n,i),r=!0},p(t,e){if(t.unit){let r;for(a=e.set,r=0;r<a.length;r+=1){const i=Mo(e,a,r);s[r]?(s[r].p(t,i),Pn(s[r],1)):(s[r]=Bo(i),s[r].c(),Pn(s[r],1),s[r].m(n.parentNode,n))}for(Dn(),r=a.length;r<s.length;r+=1)l(r);qn()}},i(t){if(!r){for(let t=0;t<a.length;t+=1)Pn(s[t]);r=!0}},o(t){s=s.filter(Boolean);for(let t=0;t<s.length;t+=1)Rn(s[t]);r=!1},d(t){o&&o.d(t),t&&fn(e),dn(s,t),t&&fn(n)}}}function Do(t){var e,n,r=!["type","deathSound","scripts"].includes(t.key),i=r&&No(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.unit&&(r=!["type","deathSound","scripts"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=No(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function qo(t){var e,n,r,i,o,a,s=Ne.str("Unit")+"";let l=Object.entries(t.unit).sort(Po),c=[];for(let e=0;e<l.length;e+=1)c[e]=Do(Eo(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(s),i=gn();for(let t=0;t<c.length;t+=1)c[t].c();o=vn(),bn(n,"colspan","2"),bn(n,"class","table-header")},m(t,s){pn(t,e,s),un(e,n),un(n,r),pn(t,i,s);for(let e=0;e<c.length;e+=1)c[e].m(t,s);pn(t,o,s),a=!0},p(t,e){if(t.unit||t.rul){let n;for(l=Object.entries(e.unit).sort(Po),n=0;n<l.length;n+=1){const r=Eo(e,l,n);c[n]?(c[n].p(t,r),Pn(c[n],1)):(c[n]=Do(r),c[n].c(),Pn(c[n],1),c[n].m(o.parentNode,o))}for(Dn(),n=l.length;n<c.length;n+=1)u(n);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&(fn(e),fn(i)),dn(c,t),t&&fn(o)}}}const Po=(t,e)=>t[0]>e[0]?1:-1;function Ro(t,e,n){let{unit:r}=e;return t.$set=(t=>{"unit"in t&&n("unit",r=t.unit)}),t.$$.update=((t={unit:1})=>{t.unit&&console.log(r)}),{unit:r}}class Wo extends Vn{constructor(t){super(),Gn(this,t,Ro,qo,ln,["unit"])}}function zo(t,e,n){const r=Object.create(t);return r.key=e[n],r}function Uo(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Go(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function Vo(t){var e,n,r,i,o,a,s=Ne.str(t.key)+"",l=new xr({props:{val:t.prop}});return{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),l.$$.fragment.c(),o=gn()},m(t,c){pn(t,e,c),un(e,n),n.innerHTML=s,un(e,r),un(e,i),zn(l,i,null),un(e,o),a=!0},p(t,e){a&&!t.research||s===(s=Ne.str(e.key)+"")||(n.innerHTML=s);var r={};t.research&&(r.val=e.prop),l.$set(r)},i(t){a||(Pn(l.$$.fragment,t),a=!0)},o(t){Rn(l.$$.fragment,t),a=!1},d(t){t&&fn(e),Un(l)}}}function Ko(t){var e,n,r,i,o,a,s=Ne.str(t.key)+"";let l=Object.keys(t.prop),c=[];for(let e=0;e<l.length;e+=1)c[e]=Zo(zo(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(s),i=gn();for(let t=0;t<c.length;t+=1)c[t].c();o=vn(),bn(n,"colspan","2"),bn(n,"class","table-subheader")},m(t,s){pn(t,e,s),un(e,n),un(n,r),pn(t,i,s);for(let e=0;e<c.length;e+=1)c[e].m(t,s);pn(t,o,s),a=!0},p(t,e){if(a&&!t.research||s===(s=Ne.str(e.key)+"")||$n(r,s),t.research||t.longLists){let n;for(l=Object.keys(e.prop),n=0;n<l.length;n+=1){const r=zo(e,l,n);c[n]?(c[n].p(t,r),Pn(c[n],1)):(c[n]=Zo(r),c[n].c(),Pn(c[n],1),c[n].m(o.parentNode,o))}for(Dn(),n=l.length;n<c.length;n+=1)u(n);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&(fn(e),fn(i)),dn(c,t),t&&fn(o)}}}function Yo(t){var e,n=new Cr({props:{items:t.prop,vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.research&&(r.items=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Xo(t){var e,n,r,i,o,a,s,l,c,u=Ne.str(t.key)+"";let p=t.prop,f=[];for(let e=0;e<p.length;e+=1)f[e]=Qo(Uo(t,p,e));const d=t=>Rn(f[t],1,1,()=>{f[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(u),i=gn(),o=hn("tr"),a=hn("td"),s=hn("ul");for(let t=0;t<f.length;t+=1)f[t].c();l=gn(),bn(n,"colspan","2"),bn(n,"class","table-subheader"),bn(s,"class","research-links"),bn(a,"colspan","2"),bn(a,"class","cols"),wn(a,"columns","2")},m(t,u){pn(t,e,u),un(e,n),un(n,r),pn(t,i,u),pn(t,o,u),un(o,a),un(a,s);for(let t=0;t<f.length;t+=1)f[t].m(s,null);un(a,l),c=!0},p(t,e){if(c&&!t.research||u===(u=Ne.str(e.key)+"")||$n(r,u),t.research||t.longLists){let n;for(p=e.prop,n=0;n<p.length;n+=1){const r=Uo(e,p,n);f[n]?(f[n].p(t,r),Pn(f[n],1)):(f[n]=Qo(r),f[n].c(),Pn(f[n],1),f[n].m(s,null))}for(Dn(),n=p.length;n<f.length;n+=1)d(n);qn()}},i(t){if(!c){for(let t=0;t<p.length;t+=1)Pn(f[t]);c=!0}},o(t){f=f.filter(Boolean);for(let t=0;t<f.length;t+=1)Rn(f[t]);c=!1},d(t){t&&(fn(e),fn(i),fn(o)),dn(f,t)}}}function Zo(t){var e,n,r,i,o=new Qn({props:{href:t.key}}),a=new dr({props:{items:t.prop[t.key]}});return{c(){e=hn("tr"),n=hn("td"),o.$$.fragment.c(),r=hn("td"),a.$$.fragment.c()},m(t,s){pn(t,e,s),un(e,n),zn(o,n,null),un(e,r),zn(a,r,null),i=!0},p(t,e){var n={};t.research&&(n.href=e.key),o.$set(n);var r={};t.research&&(r.items=e.prop[e.key]),a.$set(r)},i(t){i||(Pn(o.$$.fragment,t),Pn(a.$$.fragment,t),i=!0)},o(t){Rn(o.$$.fragment,t),Rn(a.$$.fragment,t),i=!1},d(t){t&&fn(e),Un(o),Un(a)}}}function Qo(t){var e,n,r=new Qn({props:{href:t.field}});return{c(){e=hn("li"),r.$$.fragment.c()},m(t,i){pn(t,e,i),zn(r,e,null),n=!0},p(t,e){var n={};t.research&&(n.href=e.field),r.$set(n)},i(t){n||(Pn(r.$$.fragment,t),n=!0)},o(t){Rn(r.$$.fragment,t),n=!1},d(t){t&&fn(e),Un(r)}}}function Jo(t){var e,n,r,i,o,a,s,l=[Xo,Yo,Ko,Vo],c=[];function u(t,i){return(null==e||t.research)&&(e=!!(i.longLists.includes(i.key)&&i.prop&&i.prop.length>0)),e?0:((null==n||t.research)&&(n=!!["requiresBaseFunc"].includes(i.key)),n?1:"getOneFreeProtected"==i.key?2:((null==r||t.research)&&(r=!["name"].includes(i.key)),r?3:-1))}return~(i=u(null,t))&&(o=c[i]=l[i](t)),{c(){o&&o.c(),a=vn()},m(t,e){~i&&c[i].m(t,e),pn(t,a,e),s=!0},p(t,e){var n=i;(i=u(t,e))===n?~i&&c[i].p(t,e):(o&&(Dn(),Rn(c[n],1,1,()=>{c[n]=null}),qn()),~i?((o=c[i])||(o=c[i]=l[i](e)).c(),Pn(o,1),o.m(a.parentNode,a)):o=null)},i(t){s||(Pn(o),s=!0)},o(t){Rn(o),s=!1},d(t){~i&&c[i].d(t),t&&fn(a)}}}function ta(t){var e,n,r,i,o,a,s=Ne.str("Research")+"";let l=Object.entries(t.research).sort(t.func),c=[];for(let e=0;e<l.length;e+=1)c[e]=Jo(Go(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(s),i=gn();for(let t=0;t<c.length;t+=1)c[t].c();o=vn(),bn(n,"colspan","2"),bn(n,"class","table-header")},m(t,s){pn(t,e,s),un(e,n),un(n,r),pn(t,i,s);for(let e=0;e<c.length;e+=1)c[e].m(t,s);pn(t,o,s),a=!0},p(t,e){if(t.longLists||t.research||t.rul){let n;for(l=Object.entries(e.research).sort(e.func),n=0;n<l.length;n+=1){const r=Go(e,l,n);c[n]?(c[n].p(t,r),Pn(c[n],1)):(c[n]=Jo(r),c[n].c(),Pn(c[n],1),c[n].m(o.parentNode,o))}for(Dn(),n=l.length;n<c.length;n+=1)u(n);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&(fn(e),fn(i)),dn(c,t),t&&fn(o)}}}function ea(t,e,n){let{research:r,title:i="Research"}=e,o=["seeAlso","requiresBaseFunc","manufacture","getOneFree","freeFrom","unlocks","dependencies","leadsTo","disables"];return t.$set=(t=>{"research"in t&&n("research",r=t.research),"title"in t&&n("title",i=t.title)}),t.$$.update=((t={research:1})=>{t.research&&console.log(r)}),{research:r,title:i,longLists:o,func:(t,e)=>(o.includes(e[0])?-10:10)+(t[0]>e[0]?1:-1)}}class na extends Vn{constructor(t){super(),Gn(this,t,ea,ta,ln,["research","title"])}}function ra(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function ia(t,e,n){const r=Object.create(t);return r.prop=e[n],r}function oa(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function aa(t,e,n){const r=Object.create(t);return r.chance=e[n],r}function sa(t){var e,n,r,i,o,a,s,l,c=Ne.str("randomProducedItems")+"";let u=t.manufacture.randomProducedItems,p=[];for(let e=0;e<u.length;e+=1)p[e]=ua(aa(t,u,e));const f=t=>Rn(p[t],1,1,()=>{p[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(c),i=gn(),o=hn("tr"),a=hn("td"),s=hn("table");for(let t=0;t<p.length;t+=1)p[t].c();bn(n,"colspan","2"),bn(n,"class","table-subheader"),bn(s,"class","number-table"),bn(s,"width","100%"),wn(s,"margin","0px"),bn(a,"colspan","2")},m(t,c){pn(t,e,c),un(e,n),un(n,r),pn(t,i,c),pn(t,o,c),un(o,a),un(a,s);for(let t=0;t<p.length;t+=1)p[t].m(s,null);l=!0},p(t,e){if(t.manufacture){let n;for(u=e.manufacture.randomProducedItems,n=0;n<u.length;n+=1){const r=aa(e,u,n);p[n]?(p[n].p(t,r),Pn(p[n],1)):(p[n]=ua(r),p[n].c(),Pn(p[n],1),p[n].m(s,null))}for(Dn(),n=u.length;n<p.length;n+=1)f(n);qn()}},i(t){if(!l){for(let t=0;t<u.length;t+=1)Pn(p[t]);l=!0}},o(t){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)Rn(p[t]);l=!1},d(t){t&&(fn(e),fn(i),fn(o)),dn(p,t)}}}function la(t){var e;return{c(){(e=hn("tr")).innerHTML='<td colspan="2" style="text-align:center;">NOTHING</td>'},m(t,n){pn(t,e,n)},d(t){t&&fn(e)}}}function ca(t){var e,n,r,i,o,a=t.chance[1][t.field]+"",s=new Qn({props:{href:t.field}});return{c(){e=hn("tr"),n=hn("td"),r=mn(a),i=hn("td"),s.$$.fragment.c()},m(t,a){pn(t,e,a),un(e,n),un(n,r),un(e,i),zn(s,i,null),o=!0},p(t,e){o&&!t.manufacture||a===(a=e.chance[1][e.field]+"")||$n(r,a);var n={};t.manufacture&&(n.href=e.field),s.$set(n)},i(t){o||(Pn(s.$$.fragment,t),o=!0)},o(t){Rn(s.$$.fragment,t),o=!1},d(t){t&&fn(e),Un(s)}}}function ua(t){var e,n,r,i,o,a,s,l,c,u,p=0==Object.keys(t.chance[1]).length,f=t.chance[0]+"",d=(t.chance[0]/t.manufacture.chanceSum*100).toFixed(3)+"",h=p&&la();let m=Object.keys(t.chance[1]).sort(),g=[];for(let e=0;e<m.length;e+=1)g[e]=ca(oa(t,m,e));const v=t=>Rn(g[t],1,1,()=>{g[t]=null});return{c(){h&&h.c(),e=gn();for(let t=0;t<g.length;t+=1)g[t].c();n=gn(),r=hn("tr"),i=hn("td"),o=mn("×"),a=mn(f),s=mn(" / "),l=mn(d),c=mn("%"),bn(i,"colspan","2"),wn(i,"text-align","center"),wn(i,"border-bottom","solid 0.3px #382C44")},m(t,p){h&&h.m(t,p),pn(t,e,p);for(let e=0;e<g.length;e+=1)g[e].m(t,p);pn(t,n,p),pn(t,r,p),un(r,i),un(i,o),un(i,a),un(i,s),un(i,l),un(i,c),u=!0},p(t,r){if(t.manufacture&&(p=0==Object.keys(r.chance[1]).length),p?h||((h=la()).c(),h.m(e.parentNode,e)):h&&(h.d(1),h=null),t.manufacture){let e;for(m=Object.keys(r.chance[1]).sort(),e=0;e<m.length;e+=1){const i=oa(r,m,e);g[e]?(g[e].p(t,i),Pn(g[e],1)):(g[e]=ca(i),g[e].c(),Pn(g[e],1),g[e].m(n.parentNode,n))}for(Dn(),e=m.length;e<g.length;e+=1)v(e);qn()}u&&!t.manufacture||f===(f=r.chance[0]+"")||$n(a,f),u&&!t.manufacture||d===(d=(r.chance[0]/r.manufacture.chanceSum*100).toFixed(3)+"")||$n(l,d)},i(t){if(!u){for(let t=0;t<m.length;t+=1)Pn(g[t]);u=!0}},o(t){g=g.filter(Boolean);for(let t=0;t<g.length;t+=1)Rn(g[t]);u=!1},d(t){h&&h.d(t),t&&fn(e),dn(g,t),t&&(fn(n),fn(r))}}}function pa(t){var e,n,r,i,o,a,s,l,c,u,p=Ne.str(t.prop[0])+"",f=[ha,da,fa],d=[];function h(t,e){return(null==o||t.manufacture)&&(o=!!["requiresBaseFunc"].includes(e.prop[0])),o?0:((null==a||t.manufacture)&&(a=!!["producedItems","requiredItems"].includes(e.prop[0])),a?1:2)}return s=h(null,t),l=d[s]=f[s](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),l.c(),c=gn(),bn(n,"class","padding-right")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=p,un(e,r),un(e,i),d[s].m(i,null),un(e,c),u=!0},p(t,e){u&&!t.manufacture||p===(p=Ne.str(e.prop[0])+"")||(n.innerHTML=p);var r=s;(s=h(t,e))===r?d[s].p(t,e):(Dn(),Rn(d[r],1,1,()=>{d[r]=null}),qn(),(l=d[s])||(l=d[s]=f[s](e)).c(),Pn(l,1),l.m(i,null))},i(t){u||(Pn(l),u=!0)},o(t){Rn(l),u=!1},d(t){t&&fn(e),d[s].d()}}}function fa(t){var e,n=new xr({props:{val:t.prop[1]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.manufacture&&(r.val=e.prop[1]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function da(t){var e,n;let r=Object.keys(t.prop[1]).sort(),i=[];for(let e=0;e<r.length;e+=1)i[e]=ma(ra(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","number-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.manufacture){let a;for(r=Object.keys(n.prop[1]).sort(),a=0;a<r.length;a+=1){const o=ra(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=ma(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}function ha(t){var e,n=new Cr({props:{items:t.prop[1],vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.manufacture&&(r.items=e.prop[1]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ma(t){var e,n,r,i,o,a=t.prop[1][t.field]+"",s=new Qn({props:{href:t.field}});return{c(){e=hn("tr"),n=hn("td"),r=mn(a),i=hn("td"),s.$$.fragment.c()},m(t,a){pn(t,e,a),un(e,n),un(n,r),un(e,i),zn(s,i,null),o=!0},p(t,e){o&&!t.manufacture||a===(a=e.prop[1][e.field]+"")||$n(r,a);var n={};t.manufacture&&(n.href=e.field),s.$set(n)},i(t){o||(Pn(s.$$.fragment,t),o=!0)},o(t){Rn(s.$$.fragment,t),o=!1},d(t){t&&fn(e),Un(s)}}}function ga(t){var e,n,r=!["name","randomProducedItems"].includes(t.prop[0]),i=r&&pa(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.manufacture&&(r=!["name","randomProducedItems"].includes(n.prop[0])),r?i?(i.p(t,n),Pn(i,1)):((i=pa(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function va(t){var e,n,r,i,o,a,s,l=Ne.str("Manufacture")+"",c="randomProducedItems"in t.manufacture&&sa(t);let u=Object.entries(t.manufacture).sort(ya),p=[];for(let e=0;e<u.length;e+=1)p[e]=ga(ia(t,u,e));const f=t=>Rn(p[t],1,1,()=>{p[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(l),i=gn(),c&&c.c(),o=gn();for(let t=0;t<p.length;t+=1)p[t].c();a=vn(),bn(n,"colspan","2"),bn(n,"class","table-header")},m(t,l){pn(t,e,l),un(e,n),un(n,r),pn(t,i,l),c&&c.m(t,l),pn(t,o,l);for(let e=0;e<p.length;e+=1)p[e].m(t,l);pn(t,a,l),s=!0},p(t,e){if("randomProducedItems"in e.manufacture?c?(c.p(t,e),Pn(c,1)):((c=sa(e)).c(),Pn(c,1),c.m(o.parentNode,o)):c&&(Dn(),Rn(c,1,1,()=>{c=null}),qn()),t.manufacture||t.rul){let n;for(u=Object.entries(e.manufacture).sort(ya),n=0;n<u.length;n+=1){const r=ia(e,u,n);p[n]?(p[n].p(t,r),Pn(p[n],1)):(p[n]=ga(r),p[n].c(),Pn(p[n],1),p[n].m(a.parentNode,a))}for(Dn(),n=u.length;n<p.length;n+=1)f(n);qn()}},i(t){if(!s){Pn(c);for(let t=0;t<u.length;t+=1)Pn(p[t]);s=!0}},o(t){Rn(c),p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)Rn(p[t]);s=!1},d(t){t&&(fn(e),fn(i)),c&&c.d(t),t&&fn(o),dn(p,t),t&&fn(a)}}}const ya=(t,e)=>t[0]>e[0]?1:-1;function ba(t,e,n){let{manufacture:r}=e;return t.$set=(t=>{"manufacture"in t&&n("manufacture",r=t.manufacture)}),t.$$.update=((t={manufacture:1})=>{t.manufacture&&console.log(r)}),{manufacture:r}}class $a extends Vn{constructor(t){super(),Gn(this,t,ba,va,ln,["manufacture"])}}function ka(t){var e,n,r,i,o,a=new ar({props:{links:t.conditions.allowedCraft,title:Ne.str("Allowed Craft")}}),s=new ar({props:{links:t.conditions.allowedItemCategories,title:Ne.str("Allowed Item Categories")}}),l=new ar({props:{links:t.conditions.allowedArmors,title:Ne.str("Allowed Armors")}}),c=new ar({props:{links:t.conditions.allowedVehicles,title:Ne.str("Allowed Vehicles")}}),u=new ar({props:{links:t.conditions.deployments,title:Ne.str("Deployments")}});return{c(){a.$$.fragment.c(),e=gn(),s.$$.fragment.c(),n=gn(),l.$$.fragment.c(),r=gn(),c.$$.fragment.c(),i=gn(),u.$$.fragment.c()},m(t,p){zn(a,t,p),pn(t,e,p),zn(s,t,p),pn(t,n,p),zn(l,t,p),pn(t,r,p),zn(c,t,p),pn(t,i,p),zn(u,t,p),o=!0},p(t,e){var n={};t.conditions&&(n.links=e.conditions.allowedCraft),a.$set(n);var r={};t.conditions&&(r.links=e.conditions.allowedItemCategories),s.$set(r);var i={};t.conditions&&(i.links=e.conditions.allowedArmors),l.$set(i);var o={};t.conditions&&(o.links=e.conditions.allowedVehicles),c.$set(o);var p={};t.conditions&&(p.links=e.conditions.deployments),u.$set(p)},i(t){o||(Pn(a.$$.fragment,t),Pn(s.$$.fragment,t),Pn(l.$$.fragment,t),Pn(c.$$.fragment,t),Pn(u.$$.fragment,t),o=!0)},o(t){Rn(a.$$.fragment,t),Rn(s.$$.fragment,t),Rn(l.$$.fragment,t),Rn(c.$$.fragment,t),Rn(u.$$.fragment,t),o=!1},d(t){Un(a,t),t&&fn(e),Un(s,t),t&&fn(n),Un(l,t),t&&fn(r),Un(c,t),t&&fn(i),Un(u,t)}}}function wa(t,e,n){let{conditions:r}=e;return t.$set=(t=>{"conditions"in t&&n("conditions",r=t.conditions)}),{conditions:r}}class xa extends Vn{constructor(t){super(),Gn(this,t,wa,ka,ln,["conditions"])}}function Aa(t,e,n){const r=Object.create(t);return r.field2=e[n],r.i2=n,r}function Sa(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Oa(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function Ta(t){var e,n,r,i,o,a,s,l,c,u=Ne.str(t.key)+"",p=[ja,_a,Ca],f=[];function d(t,e){return(null==o||t.ufo)&&(o=!!["modSprite"].includes(e.key)),o?0:"raceBonus"==e.key?1:2}return a=d(null,t),s=f[a]=p[a](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),s.c(),l=gn(),bn(n,"class","padding-right")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=u,un(e,r),un(e,i),f[a].m(i,null),un(e,l),c=!0},p(t,e){c&&!t.ufo||u===(u=Ne.str(e.key)+"")||(n.innerHTML=u);var r=a;(a=d(t,e))===r?f[a].p(t,e):(Dn(),Rn(f[r],1,1,()=>{f[r]=null}),qn(),(s=f[a])||(s=f[a]=p[a](e)).c(),Pn(s,1),s.m(i,null))},i(t){c||(Pn(s),c=!0)},o(t){Rn(s),c=!1},d(t){t&&fn(e),f[a].d()}}}function Ca(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.ufo&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function _a(t){var e,n;let r=Object.keys(t.prop).sort(),i=[];for(let e=0;e<r.length;e+=1)i[e]=Ia(Sa(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","number-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.ufo||t.rul){let a;for(r=Object.keys(n.prop).sort(),a=0;a<r.length;a+=1){const o=Sa(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=Ia(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}function ja(t){var e,n;return{c(){bn(e=hn("img"),"class","sprite"),bn(e,"alt","X"),bn(e,"src",n=Ne.sprite(t.prop))},m(t,n){pn(t,e,n)},p(t,r){t.ufo&&n!==(n=Ne.sprite(r.prop))&&bn(e,"src",n)},i:en,o:en,d(t){t&&fn(e)}}}function Ma(t){var e,n,r,i,o,a=Ne.str(t.field2)+"",s=new Qn({props:{href:t.prop[t.field][t.field2]}});return{c(){e=mn(a),n=mn(": "),r=hn("em"),s.$$.fragment.c(),i=hn("br")},m(t,a){pn(t,e,a),pn(t,n,a),pn(t,r,a),zn(s,r,null),pn(t,i,a),o=!0},p(t,n){o&&!t.ufo||a===(a=Ne.str(n.field2)+"")||$n(e,a);var r={};t.ufo&&(r.href=n.prop[n.field][n.field2]),s.$set(r)},i(t){o||(Pn(s.$$.fragment,t),o=!0)},o(t){Rn(s.$$.fragment,t),o=!1},d(t){t&&(fn(e),fn(n),fn(r)),Un(s),t&&fn(i)}}}function Ia(t){var e,n,r,i,o,a,s=Ne.str(t.field)+"";let l=Object.keys(t.prop[t.field]).sort(),c=[];for(let e=0;e<l.length;e+=1)c[e]=Ma(Aa(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("tr"),n=hn("td"),r=mn(s),i=hn("td");for(let t=0;t<c.length;t+=1)c[t].c();o=gn()},m(t,s){pn(t,e,s),un(e,n),un(n,r),un(e,i);for(let t=0;t<c.length;t+=1)c[t].m(i,null);un(i,o),a=!0},p(t,e){if(a&&!t.ufo||s===(s=Ne.str(e.field)+"")||$n(r,s),t.ufo||t.rul){let n;for(l=Object.keys(e.prop[e.field]).sort(),n=0;n<l.length;n+=1){const r=Aa(e,l,n);c[n]?(c[n].p(t,r),Pn(c[n],1)):(c[n]=Ma(r),c[n].c(),Pn(c[n],1),c[n].m(i,o))}for(Dn(),n=l.length;n<c.length;n+=1)u(n);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&fn(e),dn(c,t)}}}function Ea(t){var e,n,r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t.key),i=r&&Ta(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.ufo&&(r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=Ta(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function Na(t){var e,n,r,i,o,a,s=Ne.str("Craft")+"";let l=Object.entries(t.ufo).sort(La),c=[];for(let e=0;e<l.length;e+=1)c[e]=Ea(Oa(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("table"),n=hn("tr"),r=hn("td"),i=mn(s),o=gn();for(let t=0;t<c.length;t+=1)c[t].c();bn(r,"colspan","2"),bn(r,"class","table-header"),bn(e,"class","main-table")},m(t,s){pn(t,e,s),un(e,n),un(n,r),un(r,i),un(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);a=!0},p(t,n){if(t.ufo||t.rul){let r;for(l=Object.entries(n.ufo).sort(La),r=0;r<l.length;r+=1){const i=Oa(n,l,r);c[r]?(c[r].p(t,i),Pn(c[r],1)):(c[r]=Ea(i),c[r].c(),Pn(c[r],1),c[r].m(e,null))}for(Dn(),r=l.length;r<c.length;r+=1)u(r);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&fn(e),dn(c,t)}}}const La=(t,e)=>t[0]>e[0]?1:-1;function Fa(t,e,n){let{ufo:r}=e;return t.$set=(t=>{"ufo"in t&&n("ufo",r=t.ufo)}),t.$$.update=((t={ufo:1})=>{t.ufo&&console.info(r)}),{ufo:r}}class Ba extends Vn{constructor(t){super(),Gn(this,t,Fa,Na,ln,["ufo"])}}function Ha(t,e,n){const r=Object.create(t);return r._=e[n],r.x=n,r}function Da(t,e,n){const r=Object.create(t);return r._=e[n],r.y=n,r}function qa(t,e,n){const r=Object.create(t);return r.field=e[n],r.i=n,r}function Pa(t,e,n){const r=Object.create(t);return r.key=e[n][0],r.prop=e[n][1],r}function Ra(t){var e,n,r,i,o,a,s,l,c,u,p,f,d=Ne.str(t.key)+"",h=[Va,Ga,Ua,za,Wa],m=[];function g(t,e){return(null==o||t.facility)&&(o=!!["buildCostItems"].includes(e.key)),o?0:((null==a||t.facility)&&(a=!!["storageTiles"].includes(e.key)),a?1:((null==s||t.facility)&&(s=!!["provideBaseFunc","requiresBaseFunc","forbiddenBaseFunc"].includes(e.key)),s?2:((null==l||t.facility)&&(l=!!["spriteFacility","spriteShape"].includes(e.key)),l?3:4)))}return c=g(null,t),u=m[c]=h[c](t),{c(){e=hn("tr"),n=hn("td"),r=gn(),i=hn("td"),u.c(),p=gn(),bn(n,"class","padding-right")},m(t,o){pn(t,e,o),un(e,n),n.innerHTML=d,un(e,r),un(e,i),m[c].m(i,null),un(e,p),f=!0},p(t,e){f&&!t.facility||d===(d=Ne.str(e.key)+"")||(n.innerHTML=d);var r=c;(c=g(t,e))===r?m[c].p(t,e):(Dn(),Rn(m[r],1,1,()=>{m[r]=null}),qn(),(u=m[c])||(u=m[c]=h[c](e)).c(),Pn(u,1),u.m(i,null))},i(t){f||(Pn(u),f=!0)},o(t){Rn(u),f=!1},d(t){t&&fn(e),m[c].d()}}}function Wa(t){var e,n=new xr({props:{val:t.prop}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.facility&&(r.val=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function za(t){var e;let n={length:t.size},r=[];for(let e=0;e<n.length;e+=1)r[e]=Ya(Da(t,n,e));return{c(){e=hn("div");for(let t=0;t<r.length;t+=1)r[t].c();bn(e,"class","tight"),wn(e,"columns",t.size),wn(e,"width",32*t.size+"px"),wn(e,"zoom","2")},m(t,n){pn(t,e,n);for(let t=0;t<r.length;t+=1)r[t].m(e,null)},p(t,i){if(t.size||t.rul||t.facility){let o;for(n={length:i.size},o=0;o<n.length;o+=1){const a=Da(i,n,o);r[o]?r[o].p(t,a):(r[o]=Ya(a),r[o].c(),r[o].m(e,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}t.size&&(wn(e,"columns",i.size),wn(e,"width",32*i.size+"px"))},i:en,o:en,d(t){t&&fn(e),dn(r,t)}}}function Ua(t){var e,n=new Cr({props:{items:t.prop,vertical:!0}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.facility&&(r.items=e.prop),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Ga(t){var e,n,r,i,o,a,s,l,c=Ne.str("Expand")+"",u=new dr({props:{items:t.prop,vertical:!0}});return{c(){e=hn("div"),n=hn("div"),r=hn("button"),i=mn(c),o=gn(),a=hn("div"),s=hn("div"),u.$$.fragment.c(),bn(r,"class","button"),bn(r,"aria-haspopup","true"),bn(r,"aria-controls","dropdown-tiles"),bn(n,"class","dropdown-trigger"),bn(s,"class","dropdown-content svelte-fh4l44"),wn(s,"columns","6"),bn(a,"class","dropdown-menu"),bn(a,"id","dropdown-tiles"),bn(a,"role","menu"),bn(e,"class","dropdown is-hoverable")},m(t,c){pn(t,e,c),un(e,n),un(n,r),un(r,i),un(e,o),un(e,a),un(a,s),zn(u,s,null),l=!0},p(t,e){var n={};t.facility&&(n.items=e.prop),u.$set(n)},i(t){l||(Pn(u.$$.fragment,t),l=!0)},o(t){Rn(u.$$.fragment,t),l=!1},d(t){t&&fn(e),Un(u)}}}function Va(t){var e,n;let r=Object.keys(t.prop).sort(),i=[];for(let e=0;e<r.length;e+=1)i[e]=Xa(qa(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=vn()},m(t,r){for(let e=0;e<i.length;e+=1)i[e].m(t,r);pn(t,e,r),n=!0},p(t,n){if(t.facility){let a;for(r=Object.keys(n.prop).sort(),a=0;a<r.length;a+=1){const o=qa(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=Xa(o),i[a].c(),Pn(i[a],1),i[a].m(e.parentNode,e))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){dn(i,t),t&&fn(e)}}}function Ka(t){var e,n;return{c(){bn(e=hn("img"),"class","sprite"),bn(e,"alt","X"),bn(e,"src",n=Ne.specialSprite("baseSprite",1*t.prop+t.x*t.size+t.y))},m(t,n){pn(t,e,n)},p(t,r){(t.facility||t.size)&&n!==(n=Ne.specialSprite("baseSprite",1*r.prop+r.x*r.size+r.y))&&bn(e,"src",n)},d(t){t&&fn(e)}}}function Ya(t){var e;let n={length:t.size},r=[];for(let e=0;e<n.length;e+=1)r[e]=Ka(Ha(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=vn()},m(t,n){for(let e=0;e<r.length;e+=1)r[e].m(t,n);pn(t,e,n)},p(t,i){if(t.rul||t.facility||t.size){let o;for(n={length:i.size},o=0;o<n.length;o+=1){const a=Ha(i,n,o);r[o]?r[o].p(t,a):(r[o]=Ka(a),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){dn(r,t),t&&fn(e)}}}function Xa(t){var e,n,r,i,o,a,s,l=t.prop[t.field].build+"",c=t.prop[t.field].refund+"",u=0!=t.i&&{c(){s=hn("br")},m(t,e){pn(t,s,e)},d(t){t&&fn(s)}},p=new Qn({props:{href:t.field}});return{c(){u&&u.c(),e=gn(),p.$$.fragment.c(),n=mn("\r\n              : "),r=mn(l),i=mn(" / "),o=mn(c)},m(t,s){u&&u.m(t,s),pn(t,e,s),zn(p,t,s),pn(t,n,s),pn(t,r,s),pn(t,i,s),pn(t,o,s),a=!0},p(t,e){var n={};t.facility&&(n.href=e.field),p.$set(n),a&&!t.facility||l===(l=e.prop[e.field].build+"")||$n(r,l),a&&!t.facility||c===(c=e.prop[e.field].refund+"")||$n(o,c)},i(t){a||(Pn(p.$$.fragment,t),a=!0)},o(t){Rn(p.$$.fragment,t),a=!1},d(t){u&&u.d(t),t&&fn(e),Un(p,t),t&&(fn(n),fn(r),fn(i),fn(o))}}}function Za(t){var e,n,r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(t.key),i=r&&Ra(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.facility&&(r=!["type","battlescapeTerrainData","craftInventoryTile","deployment"].includes(n.key)),r?i?(i.p(t,n),Pn(i,1)):((i=Ra(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function Qa(t){var e,n,r,i,o,a,s=Ne.str("Facility")+"";let l=Object.entries(t.facility).sort(Ja),c=[];for(let e=0;e<l.length;e+=1)c[e]=Za(Pa(t,l,e));const u=t=>Rn(c[t],1,1,()=>{c[t]=null});return{c(){e=hn("table"),n=hn("tr"),r=hn("td"),i=mn(s),o=gn();for(let t=0;t<c.length;t+=1)c[t].c();bn(r,"colspan","2"),bn(r,"class","table-header"),bn(e,"class","main-table")},m(t,s){pn(t,e,s),un(e,n),un(n,r),un(r,i),un(e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);a=!0},p(t,n){if(t.facility||t.rul||t.size){let r;for(l=Object.entries(n.facility).sort(Ja),r=0;r<l.length;r+=1){const i=Pa(n,l,r);c[r]?(c[r].p(t,i),Pn(c[r],1)):(c[r]=Za(i),c[r].c(),Pn(c[r],1),c[r].m(e,null))}for(Dn(),r=l.length;r<c.length;r+=1)u(r);qn()}},i(t){if(!a){for(let t=0;t<l.length;t+=1)Pn(c[t]);a=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)Rn(c[t]);a=!1},d(t){t&&fn(e),dn(c,t)}}}const Ja=(t,e)=>t[0]>e[0]&&"storageTiles"!=t[0]?1:-1;function ts(t,e,n){let{facility:r}=e,i=1;return t.$set=(t=>{"facility"in t&&n("facility",r=t.facility)}),t.$$.update=((t={facility:1,size:1})=>{(t.facility||t.size)&&(n("size",i=r.size||1),console.log(i),console.info(r))}),{facility:r,size:i}}class es extends Vn{constructor(t){super(),Gn(this,t,ts,Qa,ln,["facility"])}}function ns(t,e,n){const r=Object.create(t);return r.prop=e[n],r}function rs(t){var e,n,r,i,o,a,s=Ne.str(t.prop[0])+"",l=new dr({props:{items:t.prop[1]}});return{c(){e=hn("tr"),n=hn("td"),r=mn(s),i=gn(),o=hn("td"),l.$$.fragment.c()},m(t,s){pn(t,e,s),un(e,n),un(n,r),un(e,i),un(e,o),zn(l,o,null),a=!0},p(t,e){a&&!t.service||s===(s=Ne.str(e.prop[0])+"")||$n(r,s);var n={};t.service&&(n.items=e.prop[1]),l.$set(n)},i(t){a||(Pn(l.$$.fragment,t),a=!0)},o(t){Rn(l.$$.fragment,t),a=!1},d(t){t&&fn(e),Un(l)}}}function is(t){var e,n,r=!["id"].includes(t.prop[0]),i=r&&rs(t);return{c(){i&&i.c(),e=vn()},m(t,r){i&&i.m(t,r),pn(t,e,r),n=!0},p(t,n){t.service&&(r=!["id"].includes(n.prop[0])),r?i?(i.p(t,n),Pn(i,1)):((i=rs(n)).c(),Pn(i,1),i.m(e.parentNode,e)):i&&(Dn(),Rn(i,1,1,()=>{i=null}),qn())},i(t){n||(Pn(i),n=!0)},o(t){Rn(i),n=!1},d(t){i&&i.d(t),t&&fn(e)}}}function os(t){var e,n;let r=Object.entries(t.service).sort(as),i=[];for(let e=0;e<r.length;e+=1)i[e]=is(ns(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","main-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.service||t.rul){let a;for(r=Object.entries(n.service).sort(as),a=0;a<r.length;a+=1){const o=ns(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=is(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}const as=(t,e)=>("providedBy"==t[0]?-10:10)+(t[0]>e[0]?1:-1);function ss(t,e,n){let{service:r}=e;return t.$set=(t=>{"service"in t&&n("service",r=t.service)}),{service:r}}class ls extends Vn{constructor(t){super(),Gn(this,t,ss,os,ln,["service"])}}function cs(t,e,n){const r=Object.create(t);return r.service=e[n],r}function us(t){var e,n,r,i,o,a,s,l,c=Ne.str(t.service[0])+"",u=new dr({props:{items:t.service[1].providedBy}});return{c(){e=hn("tr"),n=hn("td"),r=hn("a"),i=gn(),o=hn("td"),u.$$.fragment.c(),a=gn(),bn(r,"color","cyan"),bn(r,"href","#"+t.service[0]),bn(r,"class","svelte-edz6kn"),bn(n,"class","svelte-edz6kn"),bn(o,"class","svelte-edz6kn"),bn(e,"class",s=cn(t.service[0]==t.query?"highlight":"")+" svelte-edz6kn")},m(t,s){pn(t,e,s),un(e,n),un(n,r),r.innerHTML=c,un(e,i),un(e,o),zn(u,o,null),un(e,a),l=!0},p(t,n){l&&!t.query||s===(s=cn(n.service[0]==n.query?"highlight":"")+" svelte-edz6kn")||bn(e,"class",s)},i(t){l||(Pn(u.$$.fragment,t),l=!0)},o(t){Rn(u.$$.fragment,t),l=!1},d(t){t&&fn(e),Un(u)}}}function ps(t){var e,n;let r=Object.entries(Ne.baseServices),i=[];for(let e=0;e<r.length;e+=1)i[e]=us(cs(t,r,e));const o=t=>Rn(i[t],1,1,()=>{i[t]=null});return{c(){e=hn("table");for(let t=0;t<i.length;t+=1)i[t].c();bn(e,"class","main-table")},m(t,r){pn(t,e,r);for(let t=0;t<i.length;t+=1)i[t].m(e,null);n=!0},p(t,n){if(t.rul||t.query){let a;for(r=Object.entries(Ne.baseServices),a=0;a<r.length;a+=1){const o=cs(n,r,a);i[a]?(i[a].p(t,o),Pn(i[a],1)):(i[a]=us(o),i[a].c(),Pn(i[a],1),i[a].m(e,null))}for(Dn(),a=r.length;a<i.length;a+=1)o(a);qn()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Pn(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Rn(i[t]);n=!1},d(t){t&&fn(e),dn(i,t)}}}function fs(t,e,n){let{query:r=null}=e;return console.log(r),t.$set=(t=>{"query"in t&&n("query",r=t.query)}),{query:r}}class ds extends Vn{constructor(t){super(),Gn(this,t,fs,ps,ln,["query"])}}function hs(t){var e,n=new Ir({props:{id:t.article.image_id}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.id=e.article.image_id),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ms(t){var e,n=new ar({props:{links:Ne.sections[t.article.id].articles.map(Ms)}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.links=Ne.sections[e.article.id].articles.map(Ms)),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function gs(t){var e,n=new ar({props:{links:Ne.categories[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.links=Ne.categories[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function vs(t){var e,n=new xa({props:{conditions:Ne.startingConditions[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.conditions=Ne.startingConditions[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ys(t){var e,n=new ds({});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p:en,i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function bs(t){var e,n=new Wo({props:{unit:Ne.units[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.unit=Ne.units[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function $s(t){var e,n=new Si({props:{item:Ne.items[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.item=Ne.items[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ks(t){var e,n=new co({props:{armor:Ne.armors[Ne.units[t.article.id].armor]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.armor=Ne.armors[Ne.units[e.article.id].armor]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function ws(t){var e,n=new co({props:{armor:Ne.armors[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.armor=Ne.armors[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function xs(t){var e,n=new ls({props:{service:Ne.baseServices[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.service=Ne.baseServices[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function As(t){var e,n=new ko({props:{craft:Ne.crafts[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.craft=Ne.crafts[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Ss(t){var e,n=new jo({props:{weapon:Ne.craftWeapons[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.weapon=Ne.craftWeapons[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Os(t){var e,n=new Ba({props:{ufo:Ne.ufos[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.ufo=Ne.ufos[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Ts(t){var e,n=new es({props:{facility:Ne.facilities[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.facility=Ne.facilities[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function Cs(t){var e,n=new $a({props:{manufacture:Ne.manufacture[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.manufacture=Ne.manufacture[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function _s(t){var e,n=new na({props:{research:Ne.research[t.article.id]}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.research=Ne.research[e.article.id]),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function js(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m,g,v,y,b,$,k,w,x,A,S,O,T,C,_,j=t.article.title||t.article.id+"";document.title=e=t.article.title||"XPedia";var M=!(t.article.id in Ne.units)&&hs(t),I=[ys,vs,gs,ms],E=[];function N(t,e){return"SERVICES"==e.article.id?0:"CONDITIONS"==e.article.type_id?1:"CATEGORIES"==e.article.type_id?2:"PEDIA"==e.article.type_id||"TYPE"==e.article.type_id?3:-1}~(c=N(0,t))&&(u=E[c]=I[c](t));var L=t.other;function F(t){return{props:{query:t.query}}}if(L)var B=new L(F(t));var H=t.article.id in Ne.units&&bs(t),D=t.article.id in Ne.items&&$s(t),q=[ws,ks],P=[];function R(t,e){return e.article.id in Ne.armors?0:e.article.id in Ne.units&&Ne.units[e.article.id].armor?1:-1}~(y=R(0,t))&&(b=P[y]=q[y](t));var W=t.article.id in Ne.baseServices&&xs(t),z=t.article.id in Ne.crafts&&As(t),U=t.article.id in Ne.craftWeapons&&Ss(t),G=t.article.id in Ne.ufos&&Os(t),V=t.article.id in Ne.facilities&&Ts(t),K=t.article.id in Ne.manufacture&&Cs(t),Y=t.article.id in Ne.research&&_s(t);return{c(){n=gn(),r=hn("h1"),i=mn(j),o=gn(),M&&M.c(),a=gn(),s=hn("div"),l=gn(),u&&u.c(),p=gn(),f=hn("div"),B&&B.$$.fragment.c(),d=gn(),h=hn("div"),m=hn("table"),H&&H.c(),g=gn(),D&&D.c(),v=gn(),b&&b.c(),$=gn(),W&&W.c(),k=gn(),z&&z.c(),w=gn(),U&&U.c(),x=gn(),G&&G.c(),A=gn(),V&&V.c(),S=gn(),O=hn("div"),T=hn("table"),K&&K.c(),C=gn(),Y&&Y.c(),bn(s,"class","article-text"),bn(m,"class","main-table"),bn(h,"class","flex-vertical"),bn(T,"class","main-table"),bn(O,"class","flex-vertical"),bn(f,"class","flex-horisontal")},m(e,u){pn(e,n,u),pn(e,r,u),un(r,i),pn(e,o,u),M&&M.m(e,u),pn(e,a,u),pn(e,s,u),s.innerHTML=t.textwithHighlights,pn(e,l,u),~c&&E[c].m(e,u),pn(e,p,u),pn(e,f,u),B&&zn(B,f,null),un(f,d),un(f,h),un(h,m),H&&H.m(m,null),un(m,g),D&&D.m(m,null),un(f,v),~y&&P[y].m(f,null),un(f,$),W&&W.m(f,null),un(f,k),z&&z.m(f,null),un(f,w),U&&U.m(f,null),un(f,x),G&&G.m(f,null),un(f,A),V&&V.m(f,null),un(f,S),un(f,O),un(O,T),K&&K.m(T,null),un(T,C),Y&&Y.m(T,null),_=!0},p(t,n){_&&!t.article||e===(e=n.article.title||"XPedia")||(document.title=e),_&&!t.article||j===(j=n.article.title||n.article.id+"")||$n(i,j),n.article.id in Ne.units?M&&(Dn(),Rn(M,1,1,()=>{M=null}),qn()):M?(M.p(t,n),Pn(M,1)):((M=hs(n)).c(),Pn(M,1),M.m(a.parentNode,a)),_&&!t.textwithHighlights||(s.innerHTML=n.textwithHighlights);var r=c;(c=N(0,n))===r?~c&&E[c].p(t,n):(u&&(Dn(),Rn(E[r],1,1,()=>{E[r]=null}),qn()),~c?((u=E[c])||(u=E[c]=I[c](n)).c(),Pn(u,1),u.m(p.parentNode,p)):u=null);var o={};if(t.query&&(o.query=n.query),L!==(L=n.other)){if(B){Dn();const t=B;Rn(t.$$.fragment,1,0,()=>{Un(t,1)}),qn()}L?((B=new L(F(n))).$$.fragment.c(),Pn(B.$$.fragment,1),zn(B,f,d)):B=null}else L&&B.$set(o);n.article.id in Ne.units?H?(H.p(t,n),Pn(H,1)):((H=bs(n)).c(),Pn(H,1),H.m(m,g)):H&&(Dn(),Rn(H,1,1,()=>{H=null}),qn()),n.article.id in Ne.items?D?(D.p(t,n),Pn(D,1)):((D=$s(n)).c(),Pn(D,1),D.m(m,null)):D&&(Dn(),Rn(D,1,1,()=>{D=null}),qn());var l=y;(y=R(0,n))===l?~y&&P[y].p(t,n):(b&&(Dn(),Rn(P[l],1,1,()=>{P[l]=null}),qn()),~y?((b=P[y])||(b=P[y]=q[y](n)).c(),Pn(b,1),b.m(f,$)):b=null),n.article.id in Ne.baseServices?W?(W.p(t,n),Pn(W,1)):((W=xs(n)).c(),Pn(W,1),W.m(f,k)):W&&(Dn(),Rn(W,1,1,()=>{W=null}),qn()),n.article.id in Ne.crafts?z?(z.p(t,n),Pn(z,1)):((z=As(n)).c(),Pn(z,1),z.m(f,w)):z&&(Dn(),Rn(z,1,1,()=>{z=null}),qn()),n.article.id in Ne.craftWeapons?U?(U.p(t,n),Pn(U,1)):((U=Ss(n)).c(),Pn(U,1),U.m(f,x)):U&&(Dn(),Rn(U,1,1,()=>{U=null}),qn()),n.article.id in Ne.ufos?G?(G.p(t,n),Pn(G,1)):((G=Os(n)).c(),Pn(G,1),G.m(f,A)):G&&(Dn(),Rn(G,1,1,()=>{G=null}),qn()),n.article.id in Ne.facilities?V?(V.p(t,n),Pn(V,1)):((V=Ts(n)).c(),Pn(V,1),V.m(f,S)):V&&(Dn(),Rn(V,1,1,()=>{V=null}),qn()),n.article.id in Ne.manufacture?K?(K.p(t,n),Pn(K,1)):((K=Cs(n)).c(),Pn(K,1),K.m(T,C)):K&&(Dn(),Rn(K,1,1,()=>{K=null}),qn()),n.article.id in Ne.research?Y?(Y.p(t,n),Pn(Y,1)):((Y=_s(n)).c(),Pn(Y,1),Y.m(T,null)):Y&&(Dn(),Rn(Y,1,1,()=>{Y=null}),qn())},i(t){_||(Pn(M),Pn(u),B&&Pn(B.$$.fragment,t),Pn(H),Pn(D),Pn(b),Pn(W),Pn(z),Pn(U),Pn(G),Pn(V),Pn(K),Pn(Y),_=!0)},o(t){Rn(M),Rn(u),B&&Rn(B.$$.fragment,t),Rn(H),Rn(D),Rn(b),Rn(W),Rn(z),Rn(U),Rn(G),Rn(V),Rn(K),Rn(Y),_=!1},d(t){t&&(fn(n),fn(r),fn(o)),M&&M.d(t),t&&(fn(a),fn(s),fn(l)),~c&&E[c].d(t),t&&(fn(p),fn(f)),B&&Un(B),H&&H.d(),D&&D.d(),~y&&P[y].d(),W&&W.d(),z&&z.d(),U&&U.d(),G&&G.d(),V&&V.d(),K&&K.d(),Y&&Y.d()}}}const Ms=t=>t.id;function Is(t,e,n){let r,{article:i,query:o}=e,a=!1;return t.$set=(t=>{"article"in t&&n("article",i=t.article),"query"in t&&n("query",o=t.query)}),t.$$.update=((t={article:1,query:1,textwithHighlights:1})=>{if((t.article||t.query||t.textwithHighlights)&&(n("textwithHighlights",r=i.text||""),n("other",a="OTHER"==i.type_id&&{BaseServices:ds}[i.id]),o))for(let t of o.split()){let e=new RegExp(t,"ig");n("textwithHighlights",r=r.replace(e,"<span class='queried'>$&</span>"))}}),{article:i,query:o,textwithHighlights:r,other:a}}class Es extends Vn{constructor(t){super(),Gn(this,t,Is,js,ln,["article","query"])}}const{document:Ns}=Wn;function Ls(t,e,n){const r=Object.create(t);return r.option=e[n],r}function Fs(t,e,n){const r=Object.create(t);return r.section=e[n],r}function Bs(t,e,n){const r=Object.create(t);return r.section=e[n],r}function Hs(t,e,n){const r=Object.create(t);return r.section=e[n],r}function Ds(t,e,n){const r=Object.create(t);return r.section=e[n],r}function qs(t,e,n){const r=Object.create(t);return r.section=e[n],r}function Ps(t){return{c(){Ns.title="The X-Com Files Wiki"},m:en,d:en}}function Rs(t){return{c:en,m:en,p:en,i:en,o:en,d:en}}function Ws(t){var e,n,r,i,o,a,s,l,c,u,p,f,d,h,m,g,v,y,b,$,k,w,x,A,S,O,T,C,_,j,M,I,E,N,L,F,B,H,D,q,P,R,W,z,U,G,V,K,Y,X,Z,Q,J,tt,et,nt,rt,it,ot,at,st,lt,ct,ut,pt,ft,dt,ht,mt,gt,vt,yt,bt,$t,kt,wt,xt,At,St,Ot,Tt,Ct,_t,jt,Mt,It,Et,Nt,Lt,Ft,Bt,Ht,Dt,qt,Pt,Rt,Wt,zt,Ut,Gt,Vt,Kt,Yt,Xt,Zt,Qt,Jt,te,ee,ne,re,ie,oe,ae,se,le,ce,ue,pe,fe,de,he,me,ge,ve,ye,be,$e,ke,we,xe,Ae=Ne.modName+"",Se=t.currentSection?t.currentSection.title:"",Oe=t.article&&!["TYPE","PEDIA"].includes(t.article.type_id),Te=Ne.modName+"",Ce=Ne.str("HOME")+"",_e=Ne.str("A-Z")+"";let je=Ne.sectionsOrder,Me=[];for(let e=0;e<je.length;e+=1)Me[e]=zs(qs(t,je,e));let Ie=Ne.typeSectionsOrder,Ee=[];for(let e=0;e<Ie.length;e+=1)Ee[e]=Us(Ds(t,Ie,e));var Le=Oe&&Gs(t);let Fe=Ne.sectionsOrder,Be=[];for(let e=0;e<Fe.length;e+=1)Be[e]=Vs(Hs(t,Fe,e));let He=Ne.typeSectionsOrder,De=[];for(let e=0;e<He.length;e+=1)De[e]=Ks(Bs(t,He,e));let qe=t.article&&t.article.section&&t.article.section.isType()?Ne.typeSectionsOrder:Ne.sectionsOrder,Pe=[];for(let e=0;e<qe.length;e+=1)Pe[e]=Js(Fs(t,qe,e));var Re=[nl,el,tl],We=[];function ze(t,e){return e.article?0:e.query?1:e.query?-1:2}return~($e=ze(0,t))&&(ke=We[$e]=Re[$e](t)),{c(){e=hn("nav"),n=hn("div"),r=hn("div"),i=hn("a"),o=hn("img"),a=gn(),s=mn(Ae),l=gn(),c=hn("div"),u=hn("div"),p=hn("div");for(let t=0;t<Me.length;t+=1)Me[t].c();f=gn(),d=hn("div");for(let t=0;t<Ee.length;t+=1)Ee[t].c();h=gn(),m=hn("div"),g=hn("a"),v=mn(Se),b=gn(),Le&&Le.c(),$=gn(),k=hn("div"),w=hn("div"),x=hn("div"),(A=hn("button")).innerHTML='<img class="media-icon" src="http://icons.iconarchive.com/icons/dtafalonso/modern-xp/512/ModernXP-73-Globe-icon.png" alt="language" style="margin-right: 5px;">',S=gn(),O=hn("div"),T=hn("a"),C=mn("English"),j=gn(),M=hn("a"),I=mn("Русский"),N=gn(),L=hn("a"),F=mn("Polski"),H=gn(),D=hn("a"),q=mn("Ruleset"),R=gn(),W=hn("div"),z=hn("div"),U=hn("p"),G=hn("input"),V=gn(),K=hn("nav"),Y=hn("div"),X=hn("button"),Z=mn(Te),Q=gn(),J=hn("div"),tt=hn("div"),et=hn("a"),nt=mn(Ce),rt=gn();for(let t=0;t<Be.length;t+=1)Be[t].c();it=gn(),ot=hn("hr"),at=gn(),st=hn("div");for(let t=0;t<De.length;t+=1)De[t].c();lt=gn(),ct=hn("div"),ut=hn("div"),(pt=hn("button")).innerHTML='<img class="media-icon" src="https://img.icons8.com/cotton/2x/globe.png" alt="language" style="margin-left: 0px;">',ft=gn(),dt=hn("div"),ht=hn("a"),mt=mn("Eng"),vt=gn(),yt=hn("a"),bt=mn("Рус"),kt=gn(),wt=hn("a"),xt=mn("Pol"),St=gn(),Ot=hn("a"),Tt=mn("Ruleset"),_t=gn(),jt=hn("div"),Mt=hn("div"),It=hn("p"),Et=hn("input"),Nt=gn(),Lt=hn("div"),Ft=hn("div"),(Bt=hn("button")).innerHTML='<img class="media-icon" src="https://img.icons8.com/cotton/2x/globe.png" alt="language" style="margin-right: 5px;">',Ht=gn(),Dt=hn("div"),qt=hn("a"),Pt=mn("English"),Wt=gn(),zt=hn("a"),Ut=mn("Русский"),Vt=gn(),Kt=hn("a"),Yt=mn("Polski"),Zt=gn(),Qt=hn("a"),Jt=mn("Ruleset"),ee=gn(),ne=hn("div"),re=hn("div"),ie=hn("p"),oe=hn("input"),ae=gn(),se=hn("div"),le=hn("div"),ce=hn("div"),ue=hn("button"),pe=mn(_e),de=gn();for(let t=0;t<Pe.length;t+=1)Pe[t].c();he=gn(),me=hn("div"),ge=gn(),ve=hn("div"),ye=gn(),be=hn("div"),ke&&ke.c(),bn(o,"src","xpedia/favicon.png"),bn(o,"alt","favicon"),bn(i,"href","#MAIN"),bn(i,"class","navbar-link"),wn(u,"display","flex"),bn(c,"class","navbar-dropdown"),bn(r,"class","navbar-item has-dropdown is-hoverable "),wn(g,"color","white"),bn(g,"href",y="#"+(t.currentSection?t.currentSection.id:"MAIN")),bn(m,"class","navbar-item"),bn(n,"class","navbar-brand "),bn(A,"class","dropbtn navbar-link"),bn(T,"href",_="index.html#"+t.id),bn(M,"href",E="xpedia_ru.html#"+t.id),bn(L,"href",B="xpedia_pl.html#"+t.id),bn(D,"href",P="xpedia_ruleset.html#"+t.id),bn(O,"class","dropdown-content"),bn(x,"class","dropdown"),bn(w,"class","navbar-item is-paddingless"),bn(G,"class","input"),bn(G,"type","text"),bn(G,"placeholder",Ne.str("Search...")),bn(U,"class","control"),bn(z,"class","field has-addons"),bn(W,"class","navbar-item"),bn(k,"class","navbar-end"),bn(e,"class","navbar is-fixed-top is-hidden-touch"),bn(e,"role","navigation"),bn(e,"aria-label","main navigation"),bn(X,"class","dropbtn navbar-link"),bn(et,"href","#MAIN"),bn(ot,"class","dropdown-divider"),bn(J,"class","dropdown-content"),wn(J,"height","300px"),wn(J,"overflow-y","scroll"),wn(J,"width","140%"),bn(Y,"class","dropdown is-inline-block"),bn(pt,"class","dropbtn navbar-link is"),wn(pt,"padding-left","0px"),wn(pt,"padding-right","15px"),bn(ht,"href",gt="index.html#"+t.id),bn(yt,"href",$t="xpedia_ru.html#"+t.id),bn(wt,"href",At="xpedia_pl.html#"+t.id),bn(Ot,"href",Ct="xpedia_ruleset.html#"+t.id),bn(dt,"class","dropdown-content"),bn(ut,"class","dropdown is-inline-block"),wn(ut,"padding-left","0px"),bn(Et,"class","input"),bn(Et,"type","text"),bn(Et,"placeholder",Ne.str("Search...")),bn(It,"class","control"),bn(Mt,"class","field has-addons"),bn(jt,"class","navbar-item is-inline-block"),wn(jt,"width","100px"),wn(jt,"padding-left","0px"),wn(jt,"padding-right","8px"),bn(ct,"class","is-pulled-right is-hidden-tablet is-inline-block"),bn(Bt,"class","dropbtn navbar-link"),bn(qt,"href",Rt="index.html#"+t.id),bn(zt,"href",Gt="xpedia_ru.html#"+t.id),bn(Kt,"href",Xt="xpedia_pl.html#"+t.id),bn(Qt,"href",te="xpedia_ruleset.html#"+t.id),bn(Dt,"class","dropdown-content"),bn(Ft,"class","dropdown is-inline-block"),bn(oe,"class","input"),bn(oe,"type","text"),bn(oe,"placeholder",Ne.str("Search...")),bn(ie,"class","control"),bn(re,"class","field has-addons"),bn(ne,"class","navbar-item is-inline-block"),bn(Lt,"class","is-pulled-right is-hidden-mobile is-inline-block"),bn(K,"class","navbar is-fixed-top is-hidden-desktop"),bn(K,"role","navigation"),bn(K,"aria-label","main navigation"),wn(K,"border-left-width","0px"),wn(K,"border-right-width","0px"),bn(ue,"class","is-hidden-touch is-inline-block"),bn(ue,"style",fe=t.sortArticles?"":"text-decoration:line-through"),bn(le,"class","column is-2 is-sidebar-menu is-hidden-touch sidebar svelte-qnx4rt"),bn(me,"class","column is-2 is-hidden-touch"),bn(ve,"class","side-sort-button"),bn(be,"class","column is-main-content main"),wn(be,"padding-top","0px"),bn(se,"class","columns is-fullheight is-marginless"),xe=[yn(G,"input",t.input0_input_handler),yn(G,"keyup",t.searchKeyUp),yn(Et,"input",t.input1_input_handler),yn(Et,"keyup",t.searchKeyUp),yn(oe,"input",t.input2_input_handler),yn(oe,"keyup",t.searchKeyUp),yn(ue,"click",t.click_handler_1)]},m(y,_){pn(y,e,_),un(e,n),un(n,r),un(r,i),un(i,o),un(i,a),un(i,s),un(r,l),un(r,c),un(c,u),un(u,p);for(let t=0;t<Me.length;t+=1)Me[t].m(p,null);un(u,f),un(u,d);for(let t=0;t<Ee.length;t+=1)Ee[t].m(d,null);un(n,h),un(n,m),un(m,g),un(g,v),un(n,b),Le&&Le.m(n,null),un(e,$),un(e,k),un(k,w),un(w,x),un(x,A),un(x,S),un(x,O),un(O,T),un(T,C),un(O,j),un(O,M),un(M,I),un(O,N),un(O,L),un(L,F),un(O,H),un(O,D),un(D,q),un(k,R),un(k,W),un(W,z),un(z,U),un(U,G),kn(G,t.query),pn(y,V,_),pn(y,K,_),un(K,Y),un(Y,X),un(X,Z),un(Y,Q),un(Y,J),un(J,tt),un(tt,et),un(et,nt),un(tt,rt);for(let t=0;t<Be.length;t+=1)Be[t].m(tt,null);un(J,it),un(J,ot),un(J,at),un(J,st);for(let t=0;t<De.length;t+=1)De[t].m(st,null);un(K,lt),un(K,ct),un(ct,ut),un(ut,pt),un(ut,ft),un(ut,dt),un(dt,ht),un(ht,mt),un(dt,vt),un(dt,yt),un(yt,bt),un(dt,kt),un(dt,wt),un(wt,xt),un(dt,St),un(dt,Ot),un(Ot,Tt),un(ct,_t),un(ct,jt),un(jt,Mt),un(Mt,It),un(It,Et),kn(Et,t.query),un(K,Nt),un(K,Lt),un(Lt,Ft),un(Ft,Bt),un(Ft,Ht),un(Ft,Dt),un(Dt,qt),un(qt,Pt),un(Dt,Wt),un(Dt,zt),un(zt,Ut),un(Dt,Vt),un(Dt,Kt),un(Kt,Yt),un(Dt,Zt),un(Dt,Qt),un(Qt,Jt),un(Lt,ee),un(Lt,ne),un(ne,re),un(re,ie),un(ie,oe),kn(oe,t.query),pn(y,ae,_),pn(y,se,_),un(se,le),un(le,ce),un(ce,ue),un(ue,pe),un(le,de);for(let t=0;t<Pe.length;t+=1)Pe[t].m(le,null);un(se,he),un(se,me),un(se,ge),un(se,ve),un(se,ye),un(se,be),~$e&&We[$e].m(be,null),we=!0},p(t,e){if(t.rul){let n;for(je=Ne.sectionsOrder,n=0;n<je.length;n+=1){const r=qs(e,je,n);Me[n]?Me[n].p(t,r):(Me[n]=zs(r),Me[n].c(),Me[n].m(p,null))}for(;n<Me.length;n+=1)Me[n].d(1);Me.length=je.length}if(t.rul){let n;for(Ie=Ne.typeSectionsOrder,n=0;n<Ie.length;n+=1){const r=Ds(e,Ie,n);Ee[n]?Ee[n].p(t,r):(Ee[n]=Us(r),Ee[n].c(),Ee[n].m(d,null))}for(;n<Ee.length;n+=1)Ee[n].d(1);Ee.length=Ie.length}if(we&&!t.currentSection||Se===(Se=e.currentSection?e.currentSection.title:"")||$n(v,Se),we&&!t.currentSection||y===(y="#"+(e.currentSection?e.currentSection.id:"MAIN"))||bn(g,"href",y),t.article&&(Oe=e.article&&!["TYPE","PEDIA"].includes(e.article.type_id)),Oe?Le?Le.p(t,e):((Le=Gs(e)).c(),Le.m(n,null)):Le&&(Le.d(1),Le=null),we&&!t.id||_===(_="index.html#"+e.id)||bn(T,"href",_),we&&!t.id||E===(E="xpedia_ru.html#"+e.id)||bn(M,"href",E),we&&!t.id||B===(B="xpedia_pl.html#"+e.id)||bn(L,"href",B),we&&!t.id||P===(P="xpedia_ruleset.html#"+e.id)||bn(D,"href",P),t.query&&G.value!==e.query&&kn(G,e.query),t.rul){let n;for(Fe=Ne.sectionsOrder,n=0;n<Fe.length;n+=1){const r=Hs(e,Fe,n);Be[n]?Be[n].p(t,r):(Be[n]=Vs(r),Be[n].c(),Be[n].m(tt,null))}for(;n<Be.length;n+=1)Be[n].d(1);Be.length=Fe.length}if(t.rul){let n;for(He=Ne.typeSectionsOrder,n=0;n<He.length;n+=1){const r=Bs(e,He,n);De[n]?De[n].p(t,r):(De[n]=Ks(r),De[n].c(),De[n].m(st,null))}for(;n<De.length;n+=1)De[n].d(1);De.length=He.length}if(we&&!t.id||gt===(gt="index.html#"+e.id)||bn(ht,"href",gt),we&&!t.id||$t===($t="xpedia_ru.html#"+e.id)||bn(yt,"href",$t),we&&!t.id||At===(At="xpedia_pl.html#"+e.id)||bn(wt,"href",At),we&&!t.id||Ct===(Ct="xpedia_ruleset.html#"+e.id)||bn(Ot,"href",Ct),t.query&&Et.value!==e.query&&kn(Et,e.query),we&&!t.id||Rt===(Rt="index.html#"+e.id)||bn(qt,"href",Rt),we&&!t.id||Gt===(Gt="xpedia_ru.html#"+e.id)||bn(zt,"href",Gt),we&&!t.id||Xt===(Xt="xpedia_pl.html#"+e.id)||bn(Kt,"href",Xt),we&&!t.id||te===(te="xpedia_ruleset.html#"+e.id)||bn(Qt,"href",te),t.query&&oe.value!==e.query&&kn(oe,e.query),we&&!t.sortArticles||fe===(fe=e.sortArticles?"":"text-decoration:line-through")||bn(ue,"style",fe),t.currentSection||t.article||t.rul||t.sortedArticles||t.activeOption){let n;for(qe=e.article&&e.article.section&&e.article.section.isType()?Ne.typeSectionsOrder:Ne.sectionsOrder,n=0;n<qe.length;n+=1){const r=Fs(e,qe,n);Pe[n]?Pe[n].p(t,r):(Pe[n]=Js(r),Pe[n].c(),Pe[n].m(le,null))}for(;n<Pe.length;n+=1)Pe[n].d(1);Pe.length=qe.length}var r=$e;($e=ze(0,e))===r?~$e&&We[$e].p(t,e):(ke&&(Dn(),Rn(We[r],1,1,()=>{We[r]=null}),qn()),~$e?((ke=We[$e])||(ke=We[$e]=Re[$e](e)).c(),Pn(ke,1),ke.m(be,null)):ke=null)},i(t){we||(Pn(ke),we=!0)},o(t){Rn(ke),we=!1},d(t){t&&fn(e),dn(Me,t),dn(Ee,t),Le&&Le.d(),t&&(fn(V),fn(K)),dn(Be,t),dn(De,t),t&&(fn(ae),fn(se)),dn(Pe,t),~$e&&We[$e].d(),an(xe)}}}function zs(t){var e,n,r,i=t.section.title+"";return{c(){e=hn("a"),n=mn(i),r=gn(),bn(e,"class","navbar-item"),bn(e,"href","#"+t.section.id)},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,d(t){t&&fn(e)}}}function Us(t){var e,n,r,i=t.section.title+"";return{c(){e=hn("a"),n=mn(i),r=gn(),bn(e,"class","navbar-item"),bn(e,"href","#"+t.section.id)},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,d(t){t&&fn(e)}}}function Gs(t){var e,n,r,i,o,a=t.article.title+"";return{c(){e=hn("div"),n=hn("a"),r=mn(a),wn(n,"color","white"),bn(n,"href",i="#"+t.article.id),bn(e,"class","navbar-item"),o=yn(n,"click",t.click_handler)},m(t,i){pn(t,e,i),un(e,n),un(n,r)},p(t,e){t.article&&a!==(a=e.article.title+"")&&$n(r,a),t.article&&i!==(i="#"+e.article.id)&&bn(n,"href",i)},d(t){t&&fn(e),o()}}}function Vs(t){var e,n,r,i=t.section.title+"";return{c(){e=hn("a"),n=mn(i),r=gn(),bn(e,"href","#"+t.section.id)},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,d(t){t&&fn(e)}}}function Ks(t){var e,n,r,i=t.section.title+"";return{c(){e=hn("a"),n=mn(i),r=gn(),bn(e,"href","#"+t.section.id)},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,d(t){t&&fn(e)}}}function Ys(t){var e,n,r,i,o,a=t.section.title+"";let s=t.sortedArticles(t.section.articles),l=[];for(let e=0;e<s.length;e+=1)l[e]=Qs(Ls(t,s,e));return{c(){e=hn("p"),n=mn(a),r=gn(),i=hn("ul");for(let t=0;t<l.length;t+=1)l[t].c();o=gn(),bn(e,"class","sidemenu-label"),bn(i,"class","menu-list")},m(t,a){pn(t,e,a),un(e,n),pn(t,r,a),pn(t,i,a);for(let t=0;t<l.length;t+=1)l[t].m(i,null);un(i,o)},p(t,e){if(t.article&&a!==(a=e.section.title+"")&&$n(n,a),t.article||t.sortedArticles||t.rul||t.activeOption){let n;for(s=e.sortedArticles(e.section.articles),n=0;n<s.length;n+=1){const r=Ls(e,s,n);l[n]?l[n].p(t,r):(l[n]=Qs(r),l[n].c(),l[n].m(i,o))}for(;n<l.length;n+=1)l[n].d(1);l.length=s.length}},d(t){t&&(fn(e),fn(r),fn(i)),dn(l,t)}}}function Xs(t){var e,n,r,i,o=t.option.title+"";return{c(){e=hn("a"),n=mn(o),bn(e,"href",r="#"+t.option.id),i=yn(e,"click",t.click_handler_2)},m(t,r){pn(t,e,r),un(e,n)},p(t,i){(t.sortedArticles||t.article)&&o!==(o=i.option.title+"")&&$n(n,o),(t.sortedArticles||t.article)&&r!==(r="#"+i.option.id)&&bn(e,"href",r)},d(t){t&&fn(e),i()}}}function Zs(t){var e,n,r,i=t.option.title+"";return{c(){e=hn("a"),n=mn(i),bn(e,"href",r="#"+t.option.id),bn(e,"class","active-article-option svelte-qnx4rt")},m(r,i){pn(r,e,i),un(e,n),t.a_binding(e)},p(t,o){(t.sortedArticles||t.article)&&i!==(i=o.option.title+"")&&$n(n,i),(t.sortedArticles||t.article)&&r!==(r="#"+o.option.id)&&bn(e,"href",r)},d(n){n&&fn(e),t.a_binding(null)}}}function Qs(t){var e;function n(t,e){return e.article&&e.article.id==e.option.id?Zs:Xs}var r=n(0,t),i=r(t);return{c(){e=hn("li"),i.c()},m(t,n){pn(t,e,n),i.m(e,null)},p(t,o){r===(r=n(0,o))&&i?i.p(t,o):(i.d(1),(i=r(o))&&(i.c(),i.m(e,null)))},d(t){t&&fn(e),i.d()}}}function Js(t){var e,n=(!t.currentSection||t.section.id==t.currentSection.id)&&Ys(t);return{c(){n&&n.c(),e=vn()},m(t,r){n&&n.m(t,r),pn(t,e,r)},p(t,r){r.currentSection&&r.section.id!=r.currentSection.id?n&&(n.d(1),n=null):n?n.p(t,r):((n=Ys(r)).c(),n.m(e.parentNode,e))},d(t){n&&n.d(t),t&&fn(e)}}}function tl(t){var e,n=new lr({});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p:en,i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function el(t){var e,n,r,i,o,a,s,l,c,u,p,f=Ne.str("Searching")+"",d=[al,ol,il,rl],h=[];function m(t,e){return e.found&&e.found.length>0?0:e.query.length<2?1:e.searchDelayHandle?2:3}return l=m(0,t),c=h[l]=d[l](t),{c(){e=mn(f),n=mn(' "\r\n        '),r=hn("em"),i=mn(t.query),o=mn('\r\n        ":\r\n        '),a=hn("br"),s=gn(),c.c(),u=vn()},m(t,c){pn(t,e,c),pn(t,n,c),pn(t,r,c),un(r,i),pn(t,o,c),pn(t,a,c),pn(t,s,c),h[l].m(t,c),pn(t,u,c),p=!0},p(t,e){p&&!t.query||$n(i,e.query);var n=l;(l=m(0,e))===n?h[l].p(t,e):(Dn(),Rn(h[n],1,1,()=>{h[n]=null}),qn(),(c=h[l])||(c=h[l]=d[l](e)).c(),Pn(c,1),c.m(u.parentNode,u))},i(t){p||(Pn(c),p=!0)},o(t){Rn(c),p=!1},d(t){t&&(fn(e),fn(n),fn(r),fn(o),fn(a),fn(s)),h[l].d(t),t&&fn(u)}}}function nl(t){var e,n=new Es({props:{article:t.article,query:t.query}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.article&&(r.article=e.article),t.query&&(r.query=e.query),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function rl(t){var e,n,r,i=Ne.str("Nothing found")+"";return{c(){e=hn("i"),n=mn(i),r=mn(" =(")},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,i:en,o:en,d(t){t&&fn(e)}}}function il(t){var e;return{c(){e=mn("...")},m(t,n){pn(t,e,n)},p:en,i:en,o:en,d(t){t&&fn(e)}}}function ol(t){var e,n,r,i=Ne.str("Query too short")+"";return{c(){e=hn("i"),n=mn(i),r=mn("!")},m(t,i){pn(t,e,i),un(e,n),un(e,r)},p:en,i:en,o:en,d(t){t&&fn(e)}}}function al(t){var e,n=new ar({props:{links:t.found}});return{c(){n.$$.fragment.c()},m(t,r){zn(n,t,r),e=!0},p(t,e){var r={};t.found&&(r.links=e.found),n.$set(r)},i(t){e||(Pn(n.$$.fragment,t),e=!0)},o(t){Rn(n.$$.fragment,t),e=!1},d(t){Un(n,t)}}}function sl(t){var e;return{c(){bn(e=hn("img"),"class","centered svelte-qnx4rt"),bn(e,"alt","Loading rules..."),bn(e,"src","xpedia/spinner.svg")},m(t,n){pn(t,e,n)},p:en,i:en,o:en,d(t){t&&fn(e)}}}function ll(t){var e,n,r,i,o=!t.article&&Ps();let a={ctx:t,current:null,token:null,pending:sl,then:Ws,catch:Rs,value:"null",error:"null",blocks:[,,,]};return function(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=i&&{[i]:o};const a=nn(nn({},e.ctx),e.resolved),s=t&&(e.current=t)(a);e.block&&(e.blocks?e.blocks.forEach((t,n)=>{n!==r&&t&&(Dn(),Rn(t,1,1,()=>{e.blocks[n]=null}),qn())}):e.block.d(1),s.c(),Pn(s,1),s.m(e.mount(),e.anchor),Ln()),e.block=s,e.blocks&&(e.blocks[r]=s)}if((i=t)&&"object"==typeof i&&"function"==typeof i.then){const n=On();if(t.then(t=>{Sn(n),r(e.then,1,e.value,t),Sn(null)},t=>{Sn(n),r(e.catch,2,e.error,t),Sn(null)}),e.current!==e.pending)return r(e.pending,0),!0}else{if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved={[e.value]:t}}var i}(t.rulesLoaded,a),{c(){o&&o.c(),e=vn(),n=gn(),r=vn(),a.block.c()},m(t,s){o&&o.m(Ns.head,null),un(Ns.head,e),pn(t,n,s),pn(t,r,s),a.block.m(t,a.anchor=s),a.mount=(()=>r.parentNode),a.anchor=r,i=!0},p(n,r){(t=r).article?o&&(o.d(1),o=null):o||((o=Ps()).c(),o.m(e.parentNode,e)),a.block.p(n,nn(nn({},t),a.resolved))},i(t){i||(Pn(a.block),i=!0)},o(t){for(let t=0;t<3;t+=1){Rn(a.blocks[t])}i=!1},d(t){o&&o.d(t),fn(e),t&&(fn(n),fn(r)),a.block.d(t),a.token=null,a=null}}}function cl(t){window.location.hash="#"+t}function ul(t,e,n){let r,{source:i}=e,o=null,a=null,s="",l=null,c=!1,u="",p=null;let f=async function(){await Ne.load(i)}();function d(){let t=decodeURI(document.location.hash);if("#MAIN"==t&&n("query",s=""),t){let e=t.indexOf("::");-1!=e?(n("id",u=t.substr(1,e-1)),n("query",s=t.substr(e+2))):n("id",u=t.substr(1)),"SEARCH"==u?(s.length>=2?n("found",a=Ne.search.findArticles(s).map(t=>t.id)):n("found",a=0),n("article",o=null)):(n("found",a=null),o&&o.id==u||n("article",o=Ne.article(u))),console.log(u),console.log(o)}o?o.section&&l!=o.section&&n("currentSection",l=o.section):n("currentSection",l=null)}function h(t){let e=Ne.findNextArticle(o,t);e&&cl(e.id)}var m;document.addEventListener("keydown",t=>{const e=t.key;"ArrowRight"==e&&h(1),"ArrowLeft"==e&&h(-1)}),window.onhashchange=d,f.then(d),m=(()=>{r&&(En(),Mn).then(()=>r.scrollIntoView({behavior:"auto",block:"center"}))}),On().$$.after_update.push(m);let g=!1;let v;return t.$set=(t=>{"source"in t&&n("source",i=t.source)}),t.$$.update=((t={article:1,sortArticles:1})=>{t.article&&console.info(o||"no article"),t.sortArticles&&n("sortedArticles",v=(t=>g?t.slice().sort((t,e)=>t.title>e.title?1:-1):t))}),{source:i,article:o,found:a,query:s,currentSection:l,activeOption:r,ignoreNextAutoscroll:c,id:u,searchDelayHandle:p,rulesLoaded:f,searchKeyUp:function(t){p&&clearTimeout(p),n("searchDelayHandle",p=setTimeout(()=>{cl("SEARCH::"+t.target.value),n("searchDelayHandle",p=null)},"Enter"==t.key?10:1e3))},sortArticles:g,window:window,sortedArticles:v,click_handler:t=>window.scrollTo(0,0),input0_input_handler:function(){s=this.value,n("query",s)},input1_input_handler:function(){s=this.value,n("query",s)},input2_input_handler:function(){s=this.value,n("query",s)},click_handler_1:t=>n("sortArticles",g=!g),a_binding:function(t){Cn[t?"unshift":"push"](()=>{n("activeOption",r=t)})},click_handler_2:()=>n("ignoreNextAutoscroll",c=!0)}}class pl extends Vn{constructor(t){super(),Gn(this,t,ul,ll,ln,["source"])}}return window.onload=function(){let t=document.body.textContent;document.body.innerHTML="",document.body.style.display="block",new tn,app=new pl({props:{source:t},target:document.body})},app}();
